var zu=Object.defineProperty;var Eo=e=>{throw TypeError(e)};var Bu=(e,t,n)=>t in e?zu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qt=(e,t,n)=>Bu(e,typeof t!="symbol"?t+"":t,n),Co=(e,t,n)=>t.has(e)||Eo("Cannot "+n);var it=(e,t,n)=>(Co(e,t,"read from private field"),n?n.call(e):t.get(e)),An=(e,t,n)=>t.has(e)?Eo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Et=(e,t,n,r)=>(Co(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);import"../chunks/CWj6FrbW.js";import{a0 as Gl,aK as Mu,aW as Vu,aX as Zl,aY as Uu,Z as Kl,aa as Bs,U as Je,F as Vi,ag as Ms,T as aa,G as gn,ah as Wu,S as Xl,aZ as Yl,E as Xr,z as Jl,k as w,at as Hu,ac as $u,ad as ju,ae as So,D as Yr,C as qu,I as Gu,af as Vs,a_ as Sa,M as Ql,ak as ec,X as ai,a$ as Us,b0 as Io,b1 as Ws,am as Zu,b2 as To,b3 as Ku,b4 as Xu,L as Yu,b5 as Ju,aG as tc,b6 as Qu,A as ed,b7 as td,ab as nc,b8 as nd,W as rd,b9 as id,ai as rc,i as sa,aj as Hs,l as ad,ba as sd,bb as od,bc as ld,bd as ic,aB as cd,Y as Ne,be as Ao,bf as Oo,bg as ud,bh as ac,bi as dd,p as be,bj as fd,s as Pe,a as ee,q as ye,b as Z,v as j,x as H,c as Se,f as pe,aE as ce,bk as hd,aP as dt,g as Me,d as ue,an as Q,aD as ge,t as Te,aw as tt,u as vd,a4 as sc,a8 as pd,a6 as gd,bl as oa,aF as sr,n as ot,bm as Jn,bn as Qn,a9 as md}from"../chunks/C1-V_80i.js";import{b as Ro,c as bd,w as Cn,s as nt,g as Dt,d as oc,o as yd}from"../chunks/BP2mvHdX.js";import{p as $,r as Fe,s as He,a as rn,d as je,e as Ye,i as Le,b as kt,c as ht,m as _d}from"../chunks/aAlA7Ae_.js";import{a as Ge,s as Ve,b as st,r as We,c as ns,d as Qt,i as rs,e as is,f as Nt}from"../chunks/Dkb_4-bf.js";import{b as lc}from"../chunks/7Ox7PZmI.js";import{p as Gt}from"../chunks/V897BVav.js";const wd=[];function jn(e,t=!1){return Fi(e,new Map,"",wd)}function Fi(e,t,n,r,i=null){if(typeof e=="object"&&e!==null){var s=t.get(e);if(s!==void 0)return s;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Gl(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var o=0;o<e.length;o+=1){var u=e[o];o in e&&(a[o]=Fi(u,t,n,r))}return a}if(Mu(e)===Vu){a={},t.set(e,a),i!==null&&t.set(i,a);for(var d in e)a[d]=Fi(e[d],t,n,r);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return Fi(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function zi(e,t,n){Je&&Vi();var r=e,i=Wu,s,a=Zl()?Uu:Kl;Bs(()=>{a(i,i=t())&&(s&&Ms(s),s=aa(()=>n(r)))}),Je&&(r=gn)}function vt(e,t){return t}function xd(e,t,n,r){for(var i=[],s=t.length,a=0;a<s;a++)Xu(t[a].e,i,!0);var o=s>0&&i.length===0&&n!==null;if(o){var u=n.parentNode;Yu(u),u.append(n),r.clear(),On(e,t[0].prev,t[s-1].next)}Ju(i,()=>{for(var d=0;d<s;d++){var f=t[d];o||(r.delete(f.k),On(e,f.prev,f.next)),tc(f.e,!o)}})}function pt(e,t,n,r,i,s=null){var a=e,o={flags:t,items:new Map,first:null},u=(t&Yl)!==0;if(u){var d=e;a=Je?Xr(Jl(d)):d.appendChild(Xl())}Je&&Vi();var f=null,g=!1,c=Hu(()=>{var l=n();return Gl(l)?l:l==null?[]:Ql(l)});Bs(()=>{var l=w(c),p=l.length;if(g&&p===0)return;g=p===0;let h=!1;if(Je){var m=$u(a)===ju;m!==(p===0)&&(a=So(),Xr(a),Yr(!1),h=!0)}if(Je){for(var v=null,y,x=0;x<p;x++){if(gn.nodeType===qu&&gn.data===Gu){a=gn,h=!0,Yr(!1);break}var E=l[x],k=r(E,x);y=cc(gn,o,v,null,E,k,x,i,t,n),o.items.set(k,y),v=y}p>0&&Xr(So())}Je||kd(l,o,a,i,t,r,n),s!==null&&(p===0?f?Vs(f):f=aa(()=>s(a)):f!==null&&Ms(f,()=>{f=null})),h&&Yr(!0),w(c)}),Je&&(a=gn)}function kd(e,t,n,r,i,s,a){var b,D,V,U;var o=(i&Ku)!==0,u=(i&(Us|Ws))!==0,d=e.length,f=t.items,g=t.first,c=g,l,p=null,h,m=[],v=[],y,x,E,k;if(o)for(k=0;k<d;k+=1)y=e[k],x=s(y,k),E=f.get(x),E!==void 0&&((b=E.a)==null||b.measure(),(h??(h=new Set)).add(E));for(k=0;k<d;k+=1){if(y=e[k],x=s(y,k),E=f.get(x),E===void 0){var T=c?c.e.nodes_start:n;p=cc(T,t,p,p===null?t.first:p.next,y,x,k,r,i,a),f.set(x,p),m=[],v=[],c=p.next;continue}if(u&&Ed(E,y,k,i),(E.e.f&Sa)!==0&&(Vs(E.e),o&&((D=E.a)==null||D.unfix(),(h??(h=new Set)).delete(E))),E!==c){if(l!==void 0&&l.has(E)){if(m.length<v.length){var A=v[0],L;p=A.prev;var O=m[0],B=m[m.length-1];for(L=0;L<m.length;L+=1)Lo(m[L],A,n);for(L=0;L<v.length;L+=1)l.delete(v[L]);On(t,O.prev,B.next),On(t,p,O),On(t,B,A),c=A,p=B,k-=1,m=[],v=[]}else l.delete(E),Lo(E,c,n),On(t,E.prev,E.next),On(t,E,p===null?t.first:p.next),On(t,p,E),p=E;continue}for(m=[],v=[];c!==null&&c.k!==x;)(c.e.f&Sa)===0&&(l??(l=new Set)).add(c),v.push(c),c=c.next;if(c===null)continue;E=c}m.push(E),p=E,c=E.next}if(c!==null||l!==void 0){for(var F=l===void 0?[]:Ql(l);c!==null;)(c.e.f&Sa)===0&&F.push(c),c=c.next;var C=F.length;if(C>0){var R=(i&Yl)!==0&&d===0?n:null;if(o){for(k=0;k<C;k+=1)(V=F[k].a)==null||V.measure();for(k=0;k<C;k+=1)(U=F[k].a)==null||U.fix()}xd(t,F,R,f)}}o&&ec(()=>{var X;if(h!==void 0)for(E of h)(X=E.a)==null||X.apply()}),ai.first=t.first&&t.first.e,ai.last=p&&p.e}function Ed(e,t,n,r){(r&Us)!==0&&Io(e.v,t),(r&Ws)!==0?Io(e.i,n):e.i=n}function cc(e,t,n,r,i,s,a,o,u,d){var f=(u&Us)!==0,g=(u&Qu)===0,c=f?g?Zu(i,!1,!1):To(i):i,l=(u&Ws)===0?a:To(a),p={i:l,v:c,k:s,a:null,e:null,prev:n,next:r};try{return p.e=aa(()=>o(e,c,l,d),Je),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Lo(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var a=ed(s);i.before(s),s=a}}function On(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Cd(e,t,n,r,i,s){let a=Je;Je&&Vi();var o,u,d=null;Je&&gn.nodeType===td&&(d=gn,Vi());var f=Je?gn:e,g;Bs(()=>{const c=t()||null;var l=nd;c!==o&&(g&&(c===null?Ms(g,()=>{g=null,u=null}):c===u?Vs(g):(tc(g),Ro(!1))),c&&c!==u&&(g=aa(()=>{if(d=Je?d:document.createElementNS(l,c),rd(d,d),r){Je&&id(c)&&d.append(document.createComment(""));var p=Je?Jl(d):d.appendChild(Xl());Je&&(p===null?Yr(!1):Xr(p)),r(d,p)}ai.nodes_end=d,f.before(d)})),o=c,o&&(u=o),Ro(!0))},nc),a&&(Yr(!0),Xr(f))}function Sd(e,t,n){rc(()=>{var r=sa(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,s={};Hs(()=>{var a=n();ad(a),i&&Kl(s,a)&&(s=a,r.update(a))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const Id=()=>performance.now(),mn={tick:e=>requestAnimationFrame(e),now:()=>Id(),tasks:new Set};function uc(){const e=mn.now();mn.tasks.forEach(t=>{t.c(e)||(mn.tasks.delete(t),t.f())}),mn.tasks.size!==0&&mn.tick(uc)}function Td(e){let t;return mn.tasks.size===0&&mn.tick(uc),{promise:new Promise(n=>{mn.tasks.add(t={c:e,f:n})}),abort(){mn.tasks.delete(t)}}}function Ti(e,t){ic(()=>{e.dispatchEvent(new CustomEvent(t))})}function Ad(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Po(e){const t={},n=e.split(";");for(const r of n){const[i,s]=r.split(":");if(!i||s===void 0)break;const a=Ad(i.trim());t[a]=s.trim()}return t}const Od=e=>e;function Rd(e,t,n,r){var i=(e&ld)!==0,s="both",a,o=t.inert,u=t.style.overflow,d,f;function g(){var m=ud,v=ai;Ao(null),Oo(null);try{return a??(a=n()(t,(r==null?void 0:r())??{},{direction:s}))}finally{Ao(m),Oo(v)}}var c={is_global:i,in(){t.inert=o,Ti(t,"introstart"),d=as(t,g(),f,1,()=>{Ti(t,"introend"),d==null||d.abort(),d=a=void 0,t.style.overflow=u})},out(m){t.inert=!0,Ti(t,"outrostart"),f=as(t,g(),d,0,()=>{Ti(t,"outroend"),m==null||m()})},stop:()=>{d==null||d.abort(),f==null||f.abort()}},l=ai;if((l.transitions??(l.transitions=[])).push(c),bd){var p=i;if(!p){for(var h=l.parent;h&&(h.f&nc)!==0;)for(;(h=h.parent)&&(h.f&sd)===0;);p=!h||(h.f&od)!==0}p&&rc(()=>{sa(()=>c.in())})}}function as(e,t,n,r,i){var s=r===1;if(cd(t)){var a,o=!1;return ec(()=>{if(!o){var m=t({direction:s?"in":"out"});a=as(e,m,n,r,i)}}),{abort:()=>{o=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(n==null||n.deactivate(),!(t!=null&&t.duration))return i(),{abort:Ne,deactivate:Ne,reset:Ne,t:()=>r};const{delay:u=0,css:d,tick:f,easing:g=Od}=t;var c=[];if(s&&n===void 0&&(f&&f(0,1),d)){var l=Po(d(0,1));c.push(l,l)}var p=()=>1-r,h=e.animate(c,{duration:u,fill:"forwards"});return h.onfinish=()=>{h.cancel();var m=(n==null?void 0:n.t())??1-r;n==null||n.abort();var v=r-m,y=t.duration*Math.abs(v),x=[];if(y>0){var E=!1;if(d)for(var k=Math.ceil(y/16.666666666666668),T=0;T<=k;T+=1){var A=m+v*g(T/k),L=Po(d(A,1-A));x.push(L),E||(E=L.overflow==="hidden")}E&&(e.style.overflow="hidden"),p=()=>{var O=h.currentTime;return m+v*g(O/y)},f&&Td(()=>{if(h.playState!=="running")return!1;var O=p();return f(O,1-O),!0})}h=e.animate(x,{duration:y,fill:"forwards"}),h.onfinish=()=>{p=()=>r,f==null||f(r,1-r),i()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=Ne)},deactivate:()=>{i=Ne},reset:()=>{r===0&&(f==null||f(1,0))},t:()=>p()}}function yn(e,t,n=t){var r=Zl();ac(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=Ia(e)?Ta(s):s,n(s),r&&s!==(s=t())){var a=e.selectionStart,o=e.selectionEnd;e.value=s??"",o!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(o,e.value.length))}}),(Je&&e.defaultValue!==e.value||sa(t)==null&&e.value)&&n(Ia(e)?Ta(e.value):e.value),Hs(()=>{var i=t();Ia(e)&&i===Ta(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function si(e,t,n=t){ac(e,"change",r=>{var i=r?e.defaultChecked:e.checked;n(i)}),(Je&&e.defaultChecked!==e.checked||sa(t)==null)&&n(e.checked),Hs(()=>{var r=t();e.checked=!!r})}function Ia(e){var t=e.type;return t==="number"||t==="range"}function Ta(e){return e===""?null:+e}function Do(e,t){dd(window,["resize"],()=>ic(()=>t(window[e])))}const dc=typeof window<"u",No=e=>dc?localStorage.getItem(e):null,Fo=(e,t)=>{dc&&(t===null?localStorage.removeItem(e):localStorage.setItem(e,t))};var Ln,mi;class _i{constructor(t,n){An(this,Ln);An(this,mi);Et(this,Ln,t),Et(this,mi,n)}get value(){return No(it(this,Ln))}set value(t){var n;this.value!==t&&(Fo(it(this,Ln),t),(n=it(this,mi))==null||n.call(this))}get json(){try{const t=No(it(this,Ln));return t?JSON.parse(t):null}finally{this.value=null}}set json(t){t===null&&Fo(it(this,Ln),null),this.value=JSON.stringify(t)}}Ln=new WeakMap,mi=new WeakMap;const zo=new _i("tool"),fc=new _i("color"),hc=new _i("standard"),vc=new _i("fps"),pc=new _i("preview");let $s=!1,or,lr,Ot,la,Ct;const Xt=(e,t)=>e+t*Ot,gc=e=>[e%Ot,Math.floor(e/Ot)],Bi=(e,t,n,r)=>{$s=!0,or=e,lr=t;const i=mc(r);la=i.length,Ot=n,Ct=i,oi.clear();for(const[s,a]of i.entries())oi.set(a,s*Ot);nr.clear(),zt.clear(),li.clear()},oi=new Map,nr=new Map,zt=new Map,li=new Map,ke={w:{key:"w",label:"後"},a:{key:"a",label:"左"},s:{key:"s",label:"前"},d:{key:"d",label:"右"},q:{key:"q",label:"左後"},e:{key:"e",label:"右後"},z:{key:"z",label:"左前"},c:{key:"c",label:"右前"}},ci=e=>e.map(t=>t.key).join(""),mc=e=>e.split("").map(t=>t in ke?ke[t]:{key:t,label:""}),js={label:"RPGEN",w:16,h:16,frames:2,ways:[ke.w,ke.d,ke.s,ke.a]},bc={label:"RPGツクール2000",w:24,h:32,frames:3,ways:[ke.w,ke.d,ke.s,ke.a]},yc={label:"RPGツクールXP",w:32,h:48,frames:4,ways:[ke.s,ke.a,ke.d,ke.w]},_c={label:"RPGツクールVX",w:32,h:32,frames:3,ways:[ke.s,ke.a,ke.d,ke.w]},wc={label:"RPGツクールMV",w:48,h:48,frames:3,ways:[ke.s,ke.a,ke.d,ke.w]},ca=[js,bc,yc,_c,wc],fn=ca.find(e=>e.label===hc.value)??js,Bn=Object.freeze(Object.defineProperty({__proto__:null,RPGEN:js,RPGMaker2000:bc,RPGMakerMV:wc,RPGMakerVX:_c,RPGMakerXP:yc,canvasByI:zt,dataURLByI:li,defaultStandard:fn,get frames(){return Ot},get height(){return lr},iByWay:oi,init:Bi,layersByI:nr,get ready(){return $s},standards:ca,strToWays:mc,toI:Xt,toXY:gc,way:ke,get ways(){return la},get waysOrder(){return Ct},waysToStr:ci,get width(){return or}},Symbol.toStringTag,{value:"Module"}));var un;function xc(e){return{lang:(e==null?void 0:e.lang)??(un==null?void 0:un.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(un==null?void 0:un.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(un==null?void 0:un.abortPipeEarly)}}var Aa;function Ld(e){return Aa==null?void 0:Aa.get(e)}var Oa;function Pd(e){return Oa==null?void 0:Oa.get(e)}var Ra;function Dd(e,t){var n;return(n=Ra==null?void 0:Ra.get(e))==null?void 0:n.get(t)}function ui(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function wt(e,t,n,r,i){const s=i&&"input"in i?i.input:n.value,a=(i==null?void 0:i.expected)??e.expects??null,o=(i==null?void 0:i.received)??ui(s),u={kind:e.kind,type:e.type,input:s,expected:a,received:o,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},d=e.kind==="schema",f=(i==null?void 0:i.message)??e.message??Dd(e.reference,u.lang)??(d?Pd(u.lang):null)??r.message??Ld(u.lang);f!==void 0&&(u.message=typeof f=="function"?f(u):f),d&&(n.typed=!1),n.issues?n.issues.push(u):n.issues=[u]}function wi(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},xc())}}}function Nd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function kc(e,t){return{kind:"validation",type:"check",reference:kc,async:!1,expects:null,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement(n.value)&&wt(this,"input",n,r),n}}}function Lr(e){return{kind:"validation",type:"integer",reference:Lr,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&wt(this,"integer",t,n),t}}}function Pr(e,t){return{kind:"validation",type:"max_value",reference:Pr,async:!1,expects:`<=${e instanceof Date?e.toJSON():ui(e)}`,requirement:e,message:t,"~run"(n,r){return n.typed&&!(n.value<=this.requirement)&&wt(this,"value",n,r,{received:n.value instanceof Date?n.value.toJSON():ui(n.value)}),n}}}function Dr(e,t){return{kind:"validation",type:"min_value",reference:Dr,async:!1,expects:`>=${e instanceof Date?e.toJSON():ui(e)}`,requirement:e,message:t,"~run"(n,r){return n.typed&&!(n.value>=this.requirement)&&wt(this,"value",n,r,{received:n.value instanceof Date?n.value.toJSON():ui(n.value)}),n}}}function Ec(e,t){return{kind:"validation",type:"regex",reference:Ec,async:!1,expects:`${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement.test(n.value)&&wt(this,"format",n,r),n}}}function Nr(e){return{kind:"transformation",type:"transform",reference:Nr,async:!1,operation:e,"~run"(t){return t.value=this.operation(t.value),t}}}function Cc(){return{kind:"transformation",type:"trim",reference:Cc,async:!1,"~run"(e){return e.value=e.value.trim(),e}}}function Sc(e){return{kind:"validation",type:"url",reference:Sc,async:!1,expects:null,requirement(t){try{return new URL(t),!0}catch{return!1}},message:e,"~run"(t,n){return t.typed&&!this.requirement(t.value)&&wt(this,"URL",t,n),t}}}function Fd(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function zd(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function xn(e){return{kind:"schema",type:"number",reference:xn,expects:"number",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:wt(this,"type",t,n),t}}}function Ic(e,t){return{kind:"schema",type:"strict_object",reference:Ic,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return wi(this)},"~run"(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const a in this.entries){const o=this.entries[a];if(a in i||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){const u=a in i?i[a]:zd(o),d=o["~run"]({value:u},r);if(d.issues){const f={type:"object",origin:"value",input:i,key:a,value:u};for(const g of d.issues)g.path?g.path.unshift(f):g.path=[f],(s=n.issues)==null||s.push(g);if(n.issues||(n.issues=d.issues),r.abortEarly){n.typed=!1;break}}d.typed||(n.typed=!1),n.value[a]=d.value}else if(o.fallback!==void 0)n.value[a]=Fd(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(wt(this,"key",n,r,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]}),r.abortEarly))break}if(!n.issues||!r.abortEarly){for(const a in i)if(!(a in this.entries)){wt(this,"key",n,r,{input:a,expected:"never",path:[{type:"object",origin:"key",input:i,key:a,value:i[a]}]});break}}}else wt(this,"type",n,r);return n}}}function Wn(e){return{kind:"schema",type:"string",reference:Wn,expects:"string",async:!1,message:e,get"~standard"(){return wi(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:wt(this,"type",t,n),t}}}function Bo(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function ua(e,t){return{kind:"schema",type:"union",reference:ua,expects:Nd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return wi(this)},"~run"(n,r){let i,s,a;for(const o of this.options){const u=o["~run"]({value:n.value},r);if(u.typed)if(u.issues)s?s.push(u):s=[u];else{i=u;break}else a?a.push(u):a=[u]}if(i)return i;if(s){if(s.length===1)return s[0];wt(this,"type",n,r,{issues:Bo(s)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];wt(this,"type",n,r,{issues:Bo(a)})}return n}}}function cr(...e){return{...e[0],pipe:e,get"~standard"(){return wi(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function bn(e,t,n){const r=e["~run"]({value:t},xc(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}const Bd=cr(ua([Wn(),xn()]),Nr(e=>Number(e)),xn(),Lr(),Dr(16),Pr(256)),Md=cr(ua([Wn(),xn()]),Nr(e=>Number(e)),xn(),Lr(),Dr(16),Pr(256)),Vd=cr(ua([Wn(),xn()]),Nr(e=>Number(e)),xn(),Lr(),Dr(1),Pr(8)),Ud=cr(Wn(),Cc(),Ec(/^[a-z]+$/),kc(e=>e.length===new Set(e).size)),Tc=cr(Wn(),Nr(e=>Number(e)),xn(),Lr(),Dr(2),Pr(8)),Ac=cr(Wn(),Nr(e=>Number(e)),xn(),Lr(),Dr(0),Pr(1)),qs=cr(Wn(),Sc());var Wd=(e,t,n,r,i,s)=>{const a=(g,c)=>{const l=(c*t+g)*4;return[e[l],e[l+1],e[l+2],e[l+3]]},o=(g,c,l)=>{const p=(c*t+g)*4;[e[p],e[p+1],e[p+2],e[p+3]]=l},u=(g,c)=>g.every((l,p)=>l===c[p]),d=a(r,i);if(u(d,s))return null;const f=[[r,i]];for(;f.length>0;){const g=f.pop();if(!g)break;const[c,l]=g;if(c<0||l<0||c>=t||l>=n)continue;const p=a(c,l);u(p,d)&&(o(c,l,s),f.push([c+1,l],[c-1,l],[c,l+1],[c,l-1]))}return e},bt,$l,Hd=($l=class{constructor(){An(this,bt);Et(this,bt,{value:null,prev:null,next:null})}add(e){const t={value:e,prev:it(this,bt),next:null};it(this,bt).next=t,Et(this,bt,t)}undo(){const{prev:e}=it(this,bt);return e===null||e.value===null?null:(Et(this,bt,e),it(this,bt).value)}redo(){const{next:e}=it(this,bt);return e===null||e.value===null?null:(Et(this,bt,e),it(this,bt).value)}},bt=new WeakMap,$l),wn=null,vn,pn,Jr,ss,gt,Ui=0,at=[],Ir,bi,jl,ur=(jl=class{constructor(e,t){An(this,Ir);An(this,bi);Et(this,Ir,e),Et(this,bi,t??null)}get value(){return it(this,Ir)}set value(e){var t;Et(this,Ir,e),(t=it(this,bi))==null||t.call(this)}},Ir=new WeakMap,bi=new WeakMap,jl),Nn=new ur("#222222"),$d=new ur(2),jd=new ur(16),qd=new ur(32),Gs=new ur(!1,()=>{wn&&(wn.style.transform=`scaleX(${Gs.value?-1:1})`)}),Wi=()=>Jr,Gd=(e=1,t=64,n=pn)=>{Jr=Math.floor(Math.floor(n/t)*e),Oc()},os=0,ls=0,cs=0,us=0,ds=0,fs=0,Zn=null,Oc=()=>{os=0,ls=0,cs=0,us=0,ds=0,fs=0,Zn=null},Er=()=>{const e=[];for(const t of at)t&&e.push(t);return e},Zd=(e,t)=>wn==null?void 0:wn.insertBefore(e,t.nextSibling),Ar=e=>{for(const n of at)n==null||n.canvas.remove();at=e,vs();let t=ss.canvas;for(const n of at)n&&(Zd(n.canvas,t),t=n.canvas)},Zs=new ur(null),Rc=new ur(null),Kd=(e,t=640,n=360)=>{const r=document.createElement("div");e.innerHTML="",e.append(r),wn=r,vn=Math.floor(t),pn=Math.floor(n),r.innerHTML="",r.style.position="relative",r.style.zIndex="0",r.style.display="inline-block",r.style.width=`${t}px`,r.style.height=`${n}px`,Ui=0,ss=new en(""),gt=new en(""),gt.canvas.style.zIndex=String(2**16+3),Zs.value=ss,Rc.value=gt,at=[]},er=e=>{const{clientX:t,clientY:n}=e,r=gt.canvas.getBoundingClientRect();let i=Math.floor(t-r.left);const s=Math.floor(n-r.top);return Gs.value&&(i=vn-i),[i,s,e.buttons]},Xd=e=>{gt.canvas.addEventListener("click",t=>requestAnimationFrame(()=>e(...er(t))),{passive:!0}),gt.canvas.addEventListener("contextmenu",t=>t.preventDefault()),gt.canvas.addEventListener("auxclick",t=>{t.preventDefault(),requestAnimationFrame(()=>e(...er(t)))})},Yd=e=>{gt.canvas.addEventListener("pointerdown",t=>{Oc(),gt.canvas.setPointerCapture(t.pointerId),hs=!0,requestAnimationFrame(()=>e(...er(t)))},{passive:!0}),gt.canvas.addEventListener("pointermove",t=>{if(hs){for(const n of t.getCoalescedEvents())requestAnimationFrame(()=>e(...er(n)));requestAnimationFrame(()=>e(...er(t)))}},{passive:!0}),gt.canvas.addEventListener("touchstart",t=>t.preventDefault()),gt.canvas.addEventListener("touchmove",t=>t.preventDefault())},hs=!1,Jd=e=>{gt.canvas.addEventListener("pointerup",t=>{gt.canvas.releasePointerCapture(t.pointerId),hs=!1,requestAnimationFrame(()=>e(...er(t)))},{passive:!0})},Tr,yi,ql,en=(ql=class{constructor(e="",t=""){qt(this,"canvas");qt(this,"ctx");qt(this,"name");qt(this,"index");qt(this,"history",new Hd);qt(this,"hash",0);An(this,Tr,!0);An(this,yi,100);qt(this,"locked",!1);qt(this,"used",!1);qt(this,"uuid");this.name=e,this.uuid=t||crypto.randomUUID();const n=document.createElement("canvas");wn==null||wn.append(n),n.width=vn,n.height=pn,n.style.position="absolute",n.style.zIndex=String(++Ui),n.style.left="0",n.style.top="0",this.canvas=n;const r=n.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("Failed to get 2D rendering context");this.ctx=r,at.push(this),this.index=at.length-1,this.trace()}get meta(){const{name:e,index:t,hash:n,visible:r,opacity:i,locked:s,used:a,uuid:o}=this;return{name:e,index:t,hash:n,visible:r,opacity:i,locked:s,used:a,uuid:o}}set meta(e){this.name=e.name,this.index=e.index,this.hash=e.hash,this.visible=e.visible,this.opacity=e.opacity,this.locked=e.locked,this.used=e.used,this.uuid=e.uuid}delete(){at[this.index]=null,this.canvas.remove()}get prev(){const e=at.slice(0,this.index).findLast(t=>t);return e||null}get next(){const e=at.slice(this.index+1).find(t=>t);return e||null}swap(e){const t=this.index;if(e===t)return;const n=at[e];n&&([at[t],at[e]]=[at[e],at[t]],[this.index,n.index]=[n.index,this.index],[this.canvas.style.zIndex,n.canvas.style.zIndex]=[n.canvas.style.zIndex,this.canvas.style.zIndex])}get visible(){return it(this,Tr)}set visible(e){Et(this,Tr,e),this.canvas.style.visibility=it(this,Tr)?"visible":"hidden"}get opacity(){return it(this,yi)}set opacity(e){Et(this,yi,e),this.canvas.style.opacity=`${e}%`}get data(){return this.ctx.getImageData(0,0,vn,pn).data}set data(e){const t=new ImageData(e,vn,pn);this.ctx.putImageData(t,0,0)}modified(){const e=Qd(this.data);return this.hash!==e?(this.hash=e,this.used=!0,!0):!1}trace(){this.history.add(this.data)}undo(){if(this.locked)return;const e=this.history.undo();e&&(this.data=e)}redo(){if(this.locked)return;const e=this.history.redo();e&&(this.data=e)}clear(){this.locked||this.ctx.clearRect(0,0,vn,pn)}translateByDot(e,t){if(this.locked)return;const n=Jr;os+=e,ls+=t;const r=Math.round(os/n)*n,i=Math.round(ls/n)*n;(r!==cs||i!==us)&&(Zn||(Zn=this.ctx.getImageData(0,0,vn,pn)),this.clear(),this.ctx.putImageData(Zn,r,i),cs=r,us=i)}translate(e,t){this.locked||(Zn||(Zn=this.ctx.getImageData(0,0,vn,pn)),ds+=e,fs+=t,this.clear(),this.ctx.putImageData(Zn,Math.floor(ds),Math.floor(fs)))}eraseByDot(e,t){if(this.locked)return;const n=Jr,r=Math.floor(e/n)*n,i=Math.floor(t/n)*n;this.ctx.clearRect(r,i,n,n)}drawByDot(e,t){if(this.locked)return;this.ctx.fillStyle=Nn.value;const n=Jr,r=Math.floor(e/n)*n,i=Math.floor(t/n)*n;this.ctx.fillRect(r,i,n,n)}erase(e,t){this.locked||(this.ctx.globalCompositeOperation="destination-out",this.ctx.beginPath(),this.ctx.arc(e,t,qd.value>>1,0,Math.PI*2),this.ctx.fill(),this.ctx.globalCompositeOperation="source-over")}draw(e,t){if(this.locked)return;this.ctx.fillStyle=Nn.value;const n=jd.value,r=n>>1;this.ctx.fillRect(e-r,t-r,n,n)}drawLine(e,t,n,r){this.locked||(this.ctx.strokeStyle=Nn.value,this.ctx.lineWidth=$d.value,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(n,r),this.ctx.stroke())}},Tr=new WeakMap,yi=new WeakMap,ql),Cr=()=>{const e=document.createElement("canvas");e.width=vn,e.height=pn;const t=e.getContext("2d");if(!t)throw new Error("Failed to get 2D rendering context");for(const n of at)!n||!n.visible||(t.globalAlpha=n.opacity/100,t.drawImage(n.canvas,0,0));return e},vs=()=>{Ui=2;const e=Er();for(const[t,n]of e.entries())n.index=t,n.canvas.style.zIndex=String(++Ui);at=e},Qd=e=>{let t=2166136261;for(let n=0;n<e.length;n++)t^=e[n],t=Math.imul(t,16777619);return t>>>0},ef=(e,t,n,r)=>{const i=n-e,s=r-t,a=Math.max(...[i,s].map(Math.abs))||1,o=i/a,u=s/a;return[...new Array(a).keys()].map(d=>[d*o+e,d*u+t].map(Math.round))};const Xn=Cn(fc.value??Nn.value),tr=Cn(0),Mo=bn(Tc,vc.value),Mn=Cn(Mo.success?Mo.output:2),Vo=bn(Ac,pc.value),Hi=Cn(Vo.success?Vo.output:0),rr=Cn(100),Or=Cn(!1),Yt=Cn(!1),_n=Cn("");/**
 * @license @lucide/svelte v0.511.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const tf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var nf=fd("<svg><!><!></svg>");function $e(e,t){be(t,!0);const n=$(t,"color",3,"currentColor"),r=$(t,"size",3,24),i=$(t,"strokeWidth",3,2),s=$(t,"absoluteStrokeWidth",3,!1),a=$(t,"iconNode",19,()=>[]),o=Fe(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var u=nf();Ge(u,g=>({...tf,...o,width:r(),height:r(),stroke:n(),"stroke-width":g,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>s()?Number(i())*24/Number(r()):i()]);var d=j(u);pt(d,17,a,vt,(g,c)=>{var l=ce(()=>hd(w(c),2));let p=()=>w(l)[0],h=()=>w(l)[1];var m=Se(),v=pe(m);Cd(v,p,!0,(y,x)=>{Ge(y,()=>({...h()}))}),ee(g,m)});var f=Z(d);Pe(f,()=>t.children??Ne),H(u),ee(e,u),ye()}function ps(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 5v14"}],["path",{d:"m19 12-7 7-7-7"}]];$e(e,He({name:"arrow-down"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function rf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];$e(e,He({name:"arrow-left"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function af(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];$e(e,He({name:"arrow-right"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function Kn(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m5 12 7-7 7 7"}],["path",{d:"M12 19V5"}]];$e(e,He({name:"arrow-up"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function sf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"11",cy:"13",r:"9"}],["path",{d:"M14.35 4.65 16.3 2.7a2.41 2.41 0 0 1 3.4 0l1.6 1.6a2.4 2.4 0 0 1 0 3.4l-1.95 1.95"}],["path",{d:"m22 2-1.5 1.5"}]];$e(e,He({name:"bomb"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function of(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M20 6 9 17l-5-5"}]];$e(e,He({name:"check"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function Uo(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}],["path",{d:"M22 21H7"}],["path",{d:"m5 11 9 9"}]];$e(e,He({name:"eraser"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function lf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m15 18-.722-3.25"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0"}],["path",{d:"m20 15-1.726-2.05"}],["path",{d:"m4 15 1.726-2.05"}],["path",{d:"m9 18 .722-3.25"}]];$e(e,He({name:"eye-closed"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function gs(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];$e(e,He({name:"eye"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function cf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 17h.01"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3"}]];$e(e,He({name:"file-question"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function uf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m3 7 5 5-5 5V7"}],["path",{d:"m21 7-5 5 5 5V7"}],["path",{d:"M12 20v2"}],["path",{d:"M12 14v2"}],["path",{d:"M12 8v2"}],["path",{d:"M12 2v2"}]];$e(e,He({name:"flip-horizontal-2"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function df(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]];$e(e,He({name:"grid-3x3"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function Wo(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845"}]];$e(e,He({name:"layers-2"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function ff(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}]];$e(e,He({name:"lock-open"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function ms(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}]];$e(e,He({name:"lock"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function hf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]];$e(e,He({name:"moon"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function vf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 2v20"}],["path",{d:"m15 19-3 3-3-3"}],["path",{d:"m19 9 3 3-3 3"}],["path",{d:"M2 12h20"}],["path",{d:"m5 9-3 3 3 3"}],["path",{d:"m9 5 3-3 3 3"}]];$e(e,He({name:"move"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function pf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"}],["path",{d:"m5 2 5 5"}],["path",{d:"M2 13h15"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"}]];$e(e,He({name:"paint-bucket"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function gf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];$e(e,He({name:"pen"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function mf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"m12 9-8.414 8.414A2 2 0 0 0 3 18.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 3.828 21h1.344a2 2 0 0 0 1.414-.586L15 12"}],["path",{d:"m18 9 .4.4a1 1 0 1 1-3 3l-3.8-3.8a1 1 0 1 1 3-3l.4.4 3.4-3.4a1 1 0 1 1 3 3z"}],["path",{d:"m2 22 .414-.414"}]];$e(e,He({name:"pipette"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function bf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];$e(e,He({name:"plus"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function yf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M21 7v6h-6"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"}]];$e(e,He({name:"redo"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function _f(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];$e(e,He({name:"save"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function wf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];$e(e,He({name:"square-pen"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function xf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];$e(e,He({name:"sun"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function di(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];$e(e,He({name:"trash-2"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function kf(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 7v6h6"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"}]];$e(e,He({name:"undo"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}function Fr(e,t){be(t,!0);let n=Fe(t,["$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];$e(e,He({name:"x"},()=>n,{get iconNode(){return r},children:(i,s)=>{var a=Se(),o=pe(a);Pe(o,()=>t.children??Ne),ee(i,a)},$$slots:{default:!0}})),ye()}var Ef=()=>{},Cf=ue('<img alt="frame" class="gimp-checkered-background w-full h-full object-cover bg-surface-500"/>'),Sf=ue('<div tabindex="0" role="button"><div class="absolute top-1 left-1 bg-primary-600/80 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center"> </div> <!></div>'),If=ue('<div class="flex items-center gap-4"><div class="flex gap-4"></div> <div class="w-6 text-sm font-semibold"><!></div></div>'),Tf=ue('<section class="space-y-4 p-4 max-h-[70vh] overflow-y-auto overflow-x-hidden [scrollbar-gutter:stable]"><!></section>');function Af(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(tr,"$activeIndex",n);let s=$(t,"activeLayer",15,void 0),a=0;Me(()=>{t.initTimestamp&&(je(tr,0),a=0)}),Me(()=>{if(!t.initTimestamp)return;nr.set(a,Er());const f=nr.get(i());f?(Ar(f),s(f[f.length-1])):(Ar([]),s(new en("レイヤー #1")))});let o=ge(0);Me(()=>{if(!t.initTimestamp||!t.pointerupTimestamp)return;const f=Cr();zt.set(i(),f);const g=f.toDataURL("image/png");li.set(i(),g),Q(o,performance.now(),!0)});var u=Tf(),d=j(u);zi(d,()=>t.initTimestamp,f=>{var g=Se(),c=pe(g);{var l=p=>{var h=Se(),m=pe(h);pt(m,17,()=>Array(la),vt,(v,y,x)=>{var E=If(),k=j(E);pt(k,21,()=>Array(Ot),vt,(B,F,C)=>{var R=Se(),b=pe(R);zi(b,()=>Xt(C,x),D=>{var V=Sf();V.__keydown=[Ef],V.__click=()=>{const te=Xt(C,x);i()!==te&&(a=i(),je(tr,te))};var U=j(V),X=j(U,!0);H(U);var G=Z(U,2);zi(G,()=>w(o),te=>{var N=Cf();Te(M=>Ve(N,"src",M),[()=>li.get(Xt(C,x))??"https://placehold.co/32x32?text=new"]),ee(te,N)}),H(V),Te((te,N)=>{st(V,1,te),nt(X,N)},[()=>`relative w-16 h-16 rounded-container overflow-hidden cursor-pointer ${i()===Xt(C,x)?"ring-4 ring-primary-500 ring-offset-2":""}`,()=>Xt(C,x)+1]),ee(D,V)}),ee(B,R)}),H(k);var T=Z(k,2),A=j(T);{var L=B=>{Kn(B,{})},O=(B,F)=>{{var C=b=>{rf(b,{})},R=(b,D)=>{{var V=X=>{ps(X,{})},U=(X,G)=>{{var te=M=>{af(M,{})},N=(M,oe)=>{{var ae=_e=>{Kn(_e,{class:"rotate-315"})},q=(_e,xe)=>{{var de=me=>{Kn(me,{class:"rotate-45"})},Ee=(me,fe)=>{{var Oe=_=>{Kn(_,{class:"rotate-225"})},De=(_,K)=>{{var z=S=>{Kn(S,{class:"rotate-135"})},I=S=>{cf(S,{})};Le(_,S=>{Ct[x]===ke.c?S(z):S(I,!1)},K)}};Le(me,_=>{Ct[x]===ke.z?_(Oe):_(De,!1)},fe)}};Le(_e,me=>{Ct[x]===ke.e?me(de):me(Ee,!1)},xe)}};Le(M,_e=>{Ct[x]===ke.q?_e(ae):_e(q,!1)},oe)}};Le(X,M=>{Ct[x]===ke.d?M(te):M(N,!1)},G)}};Le(b,X=>{Ct[x]===ke.s?X(V):X(U,!1)},D)}};Le(B,b=>{Ct[x]===ke.a?b(C):b(R,!1)},F)}};Le(A,B=>{Ct[x]===ke.w?B(L):B(O,!1)})}H(T),H(E),ee(v,E)}),ee(p,h)};Le(c,p=>{$s&&p(l)})}ee(f,g)}),H(u),ee(e,u),ye(),r()}dt(["keydown","click"]);var Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var La,Ho;function Of(){if(Ho)return La;Ho=1;function e(t){var n=t[0],r=t[1]/100,i=t[2]/100,s,a;return i===0?[0,0,0]:(i*=2,r*=i<=1?i:2-i,a=(i+r)/2,s=2*r/(i+r),[n,s*100,a*100])}return La=e,La}var Rf=Of();const Lf=zr(Rf);var Pa,$o;function Pf(){if($o)return Pa;$o=1;function e(t){var n=t[0],r=t[1]/100,i=t[2]/100,s,a;return a=(2-r)*i,s=r*i,s/=a<=1?a:2-a,s=s||0,a/=2,[n,s*100,a*100]}return Pa=e,Pa}var Df=Pf();const Nf=zr(Df);function Ff(e){var t=e[0],n=e[1],r=e[2],i=Math.max(t,n,r),s=Math.min(t,n,r),a=i-s,o=a&&60*(i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4);return[o<0?o+360:o,i&&a*100/i,i*100/255]}function zf(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=r*n,s=i*(1-Math.abs(t%2-1)),a=r-i,o=(s+a)*255+.5|0,u=(i+a)*255+.5|0,d=a*255+.5|0,f=t|0;return f===1?[o,u,d]:f===2?[d,u,o]:f===3?[d,o,u]:f===4?[o,d,u]:f===5?[u,d,o]:[u,o,d]}var Da,jo;function Bf(){if(jo)return Da;jo=1;function e(t,n,r){return Math.min(Math.max(t,n),r)}return Da=e,Da}var Na,qo;function Mf(){if(qo)return Na;qo=1;var e=Bf();function t(r){var i=Math.round(e(r,0,255)),s=i.toString(16);return s.length==1?"0"+s:s}function n(r){var i=r.length===4?t(r[3]*255):"";return"#"+t(r[0])+t(r[1])+t(r[2])+i}return Na=n,Na}var Vf=Mf();const Uf=zr(Vf);var Fa,Go;function Wf(){if(Go)return Fa;Go=1;function e(n){for(var r="#",i=1;i<n.length;i++){var s=n.charAt(i);r+=s+s}return r}function t(n){(n.length===4||n.length===5)&&(n=e(n));var r=[parseInt(n.substring(1,3),16),parseInt(n.substring(3,5),16),parseInt(n.substring(5,7),16)];if(n.length===9){var i=parseFloat((parseInt(n.substring(7,9),16)/255).toFixed(2));r.push(i)}return r}return Fa=t,Fa}var Hf=Wf();const $f=zr(Hf);function Zo(e,t){return e?[za(e[0])?Lc(e[0]):t[0],za(e[1])?$i(e[1]):t[1],za(e[2])?$i(e[2]):t[2]]:t}function Ko(e){return[Lc(e[0]),$i(e[1]),$i(e[2])]}function Lc(e){var t=Math.round(e%360*10)/10;return t<0?t+360:t}function $i(e){return e<0?0:e>100?100:(e*10+.5|0)/10}function za(e){return typeof e=="number"&&isFinite(e)}var Qr=typeof globalThis<"u"?globalThis:self,Ba="PointerEvent"in Qr?function(e,t,n){e.addEventListener("pointerdown",function(r){r.button===0&&t(r)!==!1&&this.setPointerCapture(r.pointerId)}),e.addEventListener("pointermove",function(r){this.hasPointerCapture(r.pointerId)&&n(r)})}:"ontouchend"in Qr?function(e,t,n){var r=!1;e.addEventListener("touchstart",function(i){i.touches.length===1&&t(i.touches[0])!==!1&&(r=!0,i.preventDefault())}),e.addEventListener("touchmove",function(i){r&&i.touches.length===1&&(i.preventDefault(),n(i.touches[0]))})}:function(e,t,n){var r=function(s){n(s)},i=function(){removeEventListener("mouseup",i),removeEventListener("mousemove",r)};e.addEventListener("mousedown",function(s){s.button===0&&t(s)!==!1&&(addEventListener("mousemove",r),addEventListener("mouseup",i))})},qn={hsv:[0,100,100],hsl:[0,100,50],wheelDiameter:200,wheelThickness:20,handleDiameter:16,wheelReflectsSaturation:!0,onChange:function(){}},bs=Qr.DOMMatrix||Qr.WebKitCSSMatrix||Qr.MSCSSMatrix,jf=function(e){for(var t=[e];e=e.parentElement;)t.push(e);for(var n=new bs,r=t.length-1;r>=0;r--){var i=getComputedStyle(t[r]),s=i.transform;if(s&&s!=="none"){var a=i.transformOrigin.split(" ").map(parseFloat);n=n.translate(a[0],a[1]).multiply(new bs(s)).translate(-a[0],-a[1])}}return n.inverse()},Ma=function(e,t){return e===t||e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},qf=function(){function e(t){var n=this;this.options=t,this.wheelDiameter=this.options.wheelDiameter||qn.wheelDiameter,this.wheelThickness=this.options.wheelThickness||qn.wheelThickness,this.handleDiameter=this.options.handleDiameter||qn.handleDiameter,this.onChange=this.options.onChange||qn.onChange,this.wheelReflectsSaturation=this.options.wheelReflectsSaturation!==void 0?this.options.wheelReflectsSaturation:qn.wheelReflectsSaturation,this.rootElement=this.options.appendTo.appendChild($r("div","reinvented-color-wheel")),this.hueWheelElement=this.rootElement.appendChild($r("canvas","reinvented-color-wheel--hue-wheel")),this.hueWheelContext=this.hueWheelElement.getContext("2d"),this.hueHandleElement=this.rootElement.appendChild($r("div","reinvented-color-wheel--hue-handle")),this.svSpaceElement=this.rootElement.appendChild($r("canvas","reinvented-color-wheel--sv-space")),this.svSpaceContext=this.svSpaceElement.getContext("2d"),this.svHandleElement=this.rootElement.appendChild($r("div","reinvented-color-wheel--sv-handle")),this._redrawHueWheel=function(){n._redrawHueWheelRequested=!1;var d=n.wheelDiameter,f=d/2,g=f-n.wheelThickness/2,c=Math.PI/180,l=n.wheelReflectsSaturation?","+n._hsl[1]+"%,"+n._hsl[2]+"%)":",100%,50%)",p=n.hueWheelContext;p.clearRect(0,0,d,d),p.lineWidth=n.wheelThickness;for(var h=0;h<360;h++)p.beginPath(),p.arc(f,f,g,(h-90.7)*c,(h-89.3)*c),p.strokeStyle="hsl("+h+l,p.stroke()},this.hueWheelContext.imageSmoothingEnabled=!1,this.svSpaceContext.imageSmoothingEnabled=!1,this._hsv=Zo(t.hsv?t.hsv:t.hsl?e.hsl2hsv(t.hsl):t.rgb?e.rgb2hsv(t.rgb):t.hex?e.rgb2hsv(e.hex2rgb(t.hex)):void 0,qn.hsv),this._hsl=Ko(e.hsv2hsl(this._hsv)),this._rgb=e.hsv2rgb(this._hsv),this._hex=e.rgb2hex(this._rgb);var r=function(d,f){var g=n._inverseTransform.multiply(new bs("matrix(1,0,0,1,"+d+","+f+")"));return{x:g.e,y:g.f}},i=function(d){n._inverseTransform=jf(d);var f=d.getBoundingClientRect();n._center=r(f.left+f.width/2,f.top+f.height/2)},s=function(d){i(n.hueWheelElement);var f=r(d.clientX,d.clientY),g=f.x-n._center.x,c=f.y-n._center.y,l=n.wheelDiameter/2-n.wheelThickness;if(g*g+c*c<l*l)return!1;a(d)},a=function(d){var f=r(d.clientX,d.clientY),g=f.x-n._center.x,c=f.y-n._center.y,l=Math.atan2(c,g);n.hsv=[l*180/Math.PI+90,n.hsv[1],n.hsv[2]]},o=function(d){var f=r(d.clientX,d.clientY),g=100/n.svSpaceElement.width,c=(f.x-n._center.x)*g+50,l=(n._center.y-f.y)*g+50;n.hsv=[n._hsv[0],c,l]},u=function(d){i(n.svSpaceElement),o(d)};Ba(this.hueWheelElement,s,a),Ba(this.svSpaceElement,u,o),Ba(this.svHandleElement,u,o),this.redraw()}return Object.defineProperty(e.prototype,"hsv",{get:function(){return this._hsv},set:function(t){Ma(this._hsv,t)||this._setHSV(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hsl",{get:function(){return this._hsl},set:function(t){Ma(this._hsl,t)||this._setHSV(e.hsl2hsv(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return this._rgb},set:function(t){Ma(this._rgb,t)||this._setHSV(e.rgb2hsv(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._hex},set:function(t){this._hex!==t&&(this.rgb=e.hex2rgb(t))},enumerable:!1,configurable:!0}),e.prototype.setHSV=function(){this.hsv=arguments},e.prototype.setHSL=function(){this.hsl=arguments},e.prototype.redraw=function(){this.hueWheelElement.width=this.hueWheelElement.height=this.wheelDiameter,this.svSpaceElement.width=this.svSpaceElement.height=(this.wheelDiameter-this.wheelThickness*2)*Math.SQRT1_2;var t=this.hueHandleElement.style,n=this.svHandleElement.style;t.width=t.height=n.width=n.height=this.handleDiameter+"px",t.marginLeft=t.marginTop=n.marginLeft=n.marginTop=-this.handleDiameter/2+"px",this._redrawHueWheel(),this._redrawHueHandle(),this._redrawSvSpace(),this._redrawSvHandle()},e.prototype._setHSV=function(t){var n=this._hsv,r=this._hsv=Zo(t,n),i=n[0]-r[0],s=n[1]-r[1]||n[2]-r[2];i&&(this._hsl=[r[0],this._hsl[1],this._hsl[2]],this._redrawHueHandle(),this._updateSvBackground()),s&&(this._hsl=Ko(e.hsv2hsl(r)),this._redrawSvHandle(),this.wheelReflectsSaturation&&!this._redrawHueWheelRequested&&(requestAnimationFrame(this._redrawHueWheel),this._redrawHueWheelRequested=!0)),(i||s)&&(this._rgb=e.hsv2rgb(r),this._hex=e.rgb2hex(this._rgb),this.onChange(this))},e.prototype._redrawSvSpace=function(){this._updateSvBackground();var t=this.svSpaceElement.width,n=this.svSpaceContext,r=n.createLinearGradient(0,0,t,0),i=n.createLinearGradient(0,0,0,t);r.addColorStop(0,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,1)"),n.fillStyle=r,n.fillRect(0,0,t,t),n.fillStyle=i,n.fillRect(0,0,t,t)},e.prototype._updateSvBackground=function(){this.svSpaceElement.style.backgroundColor="hsl("+this._hsv[0]+",100%,50%)"},e.prototype._redrawHueHandle=function(){var t=this.wheelDiameter/2,n=t-this.wheelThickness/2,r=(this._hsv[0]-90)*Math.PI/180,i=this.hueHandleElement.style;i.left=n*Math.cos(r)+t+"px",i.top=n*Math.sin(r)+t+"px"},e.prototype._redrawSvHandle=function(){var t=this.svSpaceElement.width,n=this.svHandleElement.style,r=(this.wheelDiameter-t)/2,i=this._hsv;n.left=r+t*i[1]/100+"px",n.top=r+t*(1-i[2]/100)+"px"},e.default=e,e.defaultOptions=qn,e.hsv2hsl=Nf,e.hsl2hsv=Lf,e.hsv2rgb=zf,e.rgb2hsv=Ff,e.rgb2hex=Uf,e.hex2rgb=$f,e}();function $r(e,t){var n=document.createElement(e);return n.className=t,n}var Gf=ue("<center></center>");function Zf(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(Xn,"$color",n),s=qf;let a=ge(void 0),o=ge(void 0);const u=i();Me(()=>{Q(o,new s({appendTo:w(a),hex:u,wheelDiameter:200,wheelThickness:20,handleDiameter:16,wheelReflectsSaturation:!1,onChange:f=>{je(Xn,f.hex)}}),!0)}),Me(()=>{w(o)&&(w(o).hex=i())});var d=Gf();kt(d,f=>Q(a,f),()=>w(a)),ee(e,d),ye(),r()}function Pn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Va={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Xo;function Kf(){return Xo||(Xo=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(d,f){if(!i[d]){if(!r[d]){var g=typeof Pn=="function"&&Pn;if(!f&&g)return g(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[d]={exports:{}};r[d][0].call(l.exports,function(p){var h=r[d][1][p];return a(h||p)},l,l.exports,n,r,i,s)}return i[d].exports}for(var o=typeof Pn=="function"&&Pn,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){var s=n("./utils"),a=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var d,f,g,c,l,p,h,m=[],v=0,y=u.length,x=y,E=s.getTypeOf(u)!=="string";v<u.length;)x=y-v,g=E?(d=u[v++],f=v<y?u[v++]:0,v<y?u[v++]:0):(d=u.charCodeAt(v++),f=v<y?u.charCodeAt(v++):0,v<y?u.charCodeAt(v++):0),c=d>>2,l=(3&d)<<4|f>>4,p=1<x?(15&f)<<2|g>>6:64,h=2<x?63&g:64,m.push(o.charAt(c)+o.charAt(l)+o.charAt(p)+o.charAt(h));return m.join("")},i.decode=function(u){var d,f,g,c,l,p,h=0,m=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var y,x=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&x--,u.charAt(u.length-2)===o.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|x):new Array(0|x);h<u.length;)d=o.indexOf(u.charAt(h++))<<2|(c=o.indexOf(u.charAt(h++)))>>4,f=(15&c)<<4|(l=o.indexOf(u.charAt(h++)))>>2,g=(3&l)<<6|(p=o.indexOf(u.charAt(h++))),y[m++]=d,l!==64&&(y[m++]=f),p!==64&&(y[m++]=g);return y}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),a=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function d(f,g,c,l,p){this.compressedSize=f,this.uncompressedSize=g,this.crc32=c,this.compression=l,this.compressedContent=p}d.prototype={getContentWorker:function(){var f=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return f.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,g,c){return f.pipe(new o).pipe(new u("uncompressedSize")).pipe(g.compressWorker(c)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),a=function(){for(var o,u=[],d=0;d<256;d++){o=d;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;u[d]=o}return u}();r.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(d,f,g,c){var l=a,p=c+g;d^=-1;for(var h=c;h<p;h++)d=d>>>8^l[255&(d^f[h])];return-1^d}(0|u,o,o.length,0):function(d,f,g,c){var l=a,p=c+g;d^=-1;for(var h=c;h<p;h++)d=d>>>8^l[255&(d^f.charCodeAt(h))];return-1^d}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),o=n("./utils"),u=n("./stream/GenericWorker"),d=s?"uint8array":"array";function f(g,c){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=c,this.meta={}}i.magic="\b\0",o.inherits(f,u),f.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(d,g.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(c){g.push({data:c,meta:g.meta})}},i.compressWorker=function(g){return new f("Deflate",g)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(l,p){var h,m="";for(h=0;h<p;h++)m+=String.fromCharCode(255&l),l>>>=8;return m}function a(l,p,h,m,v,y){var x,E,k=l.file,T=l.compression,A=y!==d.utf8encode,L=o.transformTo("string",y(k.name)),O=o.transformTo("string",d.utf8encode(k.name)),B=k.comment,F=o.transformTo("string",y(B)),C=o.transformTo("string",d.utf8encode(B)),R=O.length!==k.name.length,b=C.length!==B.length,D="",V="",U="",X=k.dir,G=k.date,te={crc32:0,compressedSize:0,uncompressedSize:0};p&&!h||(te.crc32=l.crc32,te.compressedSize=l.compressedSize,te.uncompressedSize=l.uncompressedSize);var N=0;p&&(N|=8),A||!R&&!b||(N|=2048);var M=0,oe=0;X&&(M|=16),v==="UNIX"?(oe=798,M|=function(q,_e){var xe=q;return q||(xe=_e?16893:33204),(65535&xe)<<16}(k.unixPermissions,X)):(oe=20,M|=function(q){return 63&(q||0)}(k.dosPermissions)),x=G.getUTCHours(),x<<=6,x|=G.getUTCMinutes(),x<<=5,x|=G.getUTCSeconds()/2,E=G.getUTCFullYear()-1980,E<<=4,E|=G.getUTCMonth()+1,E<<=5,E|=G.getUTCDate(),R&&(V=s(1,1)+s(f(L),4)+O,D+="up"+s(V.length,2)+V),b&&(U=s(1,1)+s(f(F),4)+C,D+="uc"+s(U.length,2)+U);var ae="";return ae+=`
\0`,ae+=s(N,2),ae+=T.magic,ae+=s(x,2),ae+=s(E,2),ae+=s(te.crc32,4),ae+=s(te.compressedSize,4),ae+=s(te.uncompressedSize,4),ae+=s(L.length,2),ae+=s(D.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ae+L+D,dirRecord:g.CENTRAL_FILE_HEADER+s(oe,2)+ae+s(F.length,2)+"\0\0\0\0"+s(M,4)+s(m,4)+L+D+F}}var o=n("../utils"),u=n("../stream/GenericWorker"),d=n("../utf8"),f=n("../crc32"),g=n("../signature");function c(l,p,h,m){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=h,this.encodeFileName=m,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,u),c.prototype.push=function(l){var p=l.meta.percent||0,h=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,u.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:h?(p+100*(h-m-1))/h:100}}))},c.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var p=this.streamFiles&&!l.file.dir;if(p){var h=a(l,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(l){this.accumulate=!1;var p=this.streamFiles&&!l.file.dir,h=a(l,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),p)this.push({data:function(m){return g.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var l=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var h=this.bytesWritten-l,m=function(v,y,x,E,k){var T=o.transformTo("string",k(E));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(v,2)+s(v,2)+s(y,4)+s(x,4)+s(T.length,2)+T}(this.dirRecords.length,h,l,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(l){this._sources.push(l);var p=this;return l.on("data",function(h){p.processChunk(h)}),l.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),l.on("error",function(h){p.error(h)}),this},c.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(l){var p=this._sources;if(!u.prototype.error.call(this,l))return!1;for(var h=0;h<p.length;h++)try{p[h].error(l)}catch{}return!0},c.prototype.lock=function(){u.prototype.lock.call(this);for(var l=this._sources,p=0;p<l.length;p++)l[p].lock()},r.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),a=n("./ZipFileWorker");i.generateWorker=function(o,u,d){var f=new a(u.streamFiles,d,u.platform,u.encodeFileName),g=0;try{o.forEach(function(c,l){g++;var p=function(y,x){var E=y||x,k=s[E];if(!k)throw new Error(E+" is not a valid compression method !");return k}(l.options.compression,u.compression),h=l.options.compressionOptions||u.compressionOptions||{},m=l.dir,v=l.date;l._compressWorker(p,h).withStreamInfo("file",{name:c,dir:m,date:v,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(f)}),f.entriesCount=g}catch(c){f.error(c)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),a=n("./external"),o=n("./utf8"),u=n("./zipEntries"),d=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function g(c){return new a.Promise(function(l,p){var h=c.decompressed.getContentWorker().pipe(new d);h.on("error",function(m){p(m)}).on("end",function(){h.streamInfo.crc32!==c.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}r.exports=function(c,l){var p=this;return l=s.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(c)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",c,!0,l.optimizedBinaryString,l.base64).then(function(h){var m=new u(l);return m.load(h),m}).then(function(h){var m=[a.Promise.resolve(h)],v=h.files;if(l.checkCRC32)for(var y=0;y<v.length;y++)m.push(g(v[y]));return a.Promise.all(m)}).then(function(h){for(var m=h.shift(),v=m.files,y=0;y<v.length;y++){var x=v[y],E=x.fileNameStr,k=s.resolve(x.fileNameStr);p.file(k,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:l.createFolders}),x.dir||(p.file(k).unsafeOriginalName=E)}return m.zipComment.length&&(p.comment=m.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),a=n("../stream/GenericWorker");function o(u,d){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(o,a),o.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function a(o,u,d){s.call(this,u),this._helper=o;var f=this;o.on("data",function(g,c){f.push(g)||f._helper.pause(),d&&d(c)}).on("error",function(g){f.emit("error",g)}).on("end",function(){f.push(null)})}n("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(k,T,A){var L,O=o.getTypeOf(T),B=o.extend(A||{},f);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(k=v(k)),B.createFolders&&(L=m(k))&&y.call(this,L,!0);var F=O==="string"&&B.binary===!1&&B.base64===!1;A&&A.binary!==void 0||(B.binary=!F),(T instanceof g&&T.uncompressedSize===0||B.dir||!T||T.length===0)&&(B.base64=!1,B.binary=!0,T="",B.compression="STORE",O="string");var C=null;C=T instanceof g||T instanceof u?T:p.isNode&&p.isStream(T)?new h(k,T):o.prepareContent(k,T,B.binary,B.optimizedBinaryString,B.base64);var R=new c(k,C,B);this.files[k]=R}var a=n("./utf8"),o=n("./utils"),u=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),f=n("./defaults"),g=n("./compressedObject"),c=n("./zipObject"),l=n("./generate"),p=n("./nodejsUtils"),h=n("./nodejs/NodejsStreamInputAdapter"),m=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var T=k.lastIndexOf("/");return 0<T?k.substring(0,T):""},v=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},y=function(k,T){return T=T!==void 0?T:f.createFolders,k=v(k),this.files[k]||s.call(this,k,null,{dir:!0,createFolders:T}),this.files[k]};function x(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var T,A,L;for(T in this.files)L=this.files[T],(A=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&k(A,L)},filter:function(k){var T=[];return this.forEach(function(A,L){k(A,L)&&T.push(L)}),T},file:function(k,T,A){if(arguments.length!==1)return k=this.root+k,s.call(this,k,T,A),this;if(x(k)){var L=k;return this.filter(function(B,F){return!F.dir&&L.test(B)})}var O=this.files[this.root+k];return O&&!O.dir?O:null},folder:function(k){if(!k)return this;if(x(k))return this.filter(function(O,B){return B.dir&&k.test(O)});var T=this.root+k,A=y.call(this,T),L=this.clone();return L.root=A.name,L},remove:function(k){k=this.root+k;var T=this.files[k];if(T||(k.slice(-1)!=="/"&&(k+="/"),T=this.files[k]),T&&!T.dir)delete this.files[k];else for(var A=this.filter(function(O,B){return B.name.slice(0,k.length)===k}),L=0;L<A.length;L++)delete this.files[A[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var T,A={};try{if((A=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");o.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var L=A.comment||this.comment||"";T=l.generateWorker(this,A,L)}catch(O){(T=new u("error")).error(O)}return new d(T,A.type||"string",A.mimeType)},generateAsync:function(k,T){return this.generateInternalStream(k).accumulate(T)},generateNodeStream:function(k,T){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(T)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),d=o.charCodeAt(1),f=o.charCodeAt(2),g=o.charCodeAt(3),c=this.length-4;0<=c;--c)if(this.data[c]===u&&this.data[c+1]===d&&this.data[c+2]===f&&this.data[c+3]===g)return c-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),d=o.charCodeAt(1),f=o.charCodeAt(2),g=o.charCodeAt(3),c=this.readData(4);return u===c[0]&&d===c[1]&&f===c[2]&&g===c[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,d=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=o,d},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function a(o){s.call(this,o)}n("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),a=n("../support"),o=n("./ArrayReader"),u=n("./StringReader"),d=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(g){var c=s.getTypeOf(g);return s.checkSupport(c),c!=="string"||a.uint8array?c==="nodebuffer"?new d(g):a.uint8array?new f(s.transformTo("uint8array",g)):new o(s.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),a=n("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),a=n("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}a.prototype.processChunk.call(this,u)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),a=n("./GenericWorker");function o(u){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=s.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),a=n("./ConvertWorker"),o=n("./GenericWorker"),u=n("../base64"),d=n("../support"),f=n("../external"),g=null;if(d.nodestream)try{g=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function c(p,h){return new f.Promise(function(m,v){var y=[],x=p._internalType,E=p._outputType,k=p._mimeType;p.on("data",function(T,A){y.push(T),h&&h(A)}).on("error",function(T){y=[],v(T)}).on("end",function(){try{var T=function(A,L,O){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",L),O);case"base64":return u.encode(L);default:return s.transformTo(A,L)}}(E,function(A,L){var O,B=0,F=null,C=0;for(O=0;O<L.length;O++)C+=L[O].length;switch(A){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(F=new Uint8Array(C),O=0;O<L.length;O++)F.set(L[O],B),B+=L[O].length;return F;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+A+"'")}}(x,y),k);m(T)}catch(A){v(A)}y=[]}).resume()})}function l(p,h,m){var v=h;switch(h){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=h,this._mimeType=m,s.checkSupport(v),this._worker=p.pipe(new a(v)),p.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}l.prototype={accumulate:function(p){return c(this,p)},on:function(p,h){var m=this;return p==="data"?this._worker.on(p,function(v){h.call(m,v.data,v.meta)}):this._worker.on(p,function(){s.delay(h,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),a=n("./support"),o=n("./nodejsUtils"),u=n("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function c(){u.call(this,"utf-8 encode")}i.utf8encode=function(l){return a.nodebuffer?o.newBufferFrom(l,"utf-8"):function(p){var h,m,v,y,x,E=p.length,k=0;for(y=0;y<E;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<E&&(64512&(v=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),y++),k+=m<128?1:m<2048?2:m<65536?3:4;for(h=a.uint8array?new Uint8Array(k):new Array(k),y=x=0;x<k;y++)(64512&(m=p.charCodeAt(y)))==55296&&y+1<E&&(64512&(v=p.charCodeAt(y+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),y++),m<128?h[x++]=m:(m<2048?h[x++]=192|m>>>6:(m<65536?h[x++]=224|m>>>12:(h[x++]=240|m>>>18,h[x++]=128|m>>>12&63),h[x++]=128|m>>>6&63),h[x++]=128|63&m);return h}(l)},i.utf8decode=function(l){return a.nodebuffer?s.transformTo("nodebuffer",l).toString("utf-8"):function(p){var h,m,v,y,x=p.length,E=new Array(2*x);for(h=m=0;h<x;)if((v=p[h++])<128)E[m++]=v;else if(4<(y=d[v]))E[m++]=65533,h+=y-1;else{for(v&=y===2?31:y===3?15:7;1<y&&h<x;)v=v<<6|63&p[h++],y--;1<y?E[m++]=65533:v<65536?E[m++]=v:(v-=65536,E[m++]=55296|v>>10&1023,E[m++]=56320|1023&v)}return E.length!==m&&(E.subarray?E=E.subarray(0,m):E.length=m),s.applyFromCharCode(E)}(l=s.transformTo(a.uint8array?"uint8array":"array",l))},s.inherits(g,u),g.prototype.processChunk=function(l){var p=s.transformTo(a.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var h=p;(p=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),p.set(h,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var m=function(y,x){var E;for((x=x||y.length)>y.length&&(x=y.length),E=x-1;0<=E&&(192&y[E])==128;)E--;return E<0||E===0?x:E+d[y[E]]>x?E:x}(p),v=p;m!==p.length&&(a.uint8array?(v=p.subarray(0,m),this.leftOver=p.subarray(m,p.length)):(v=p.slice(0,m),this.leftOver=p.slice(m,p.length))),this.push({data:i.utf8decode(v),meta:l.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,s.inherits(c,u),c.prototype.processChunk=function(l){this.push({data:i.utf8encode(l.data),meta:l.meta})},i.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),a=n("./base64"),o=n("./nodejsUtils"),u=n("./external");function d(h){return h}function f(h,m){for(var v=0;v<h.length;++v)m[v]=255&h.charCodeAt(v);return m}n("setimmediate"),i.newBlob=function(h,m){i.checkSupport("blob");try{return new Blob([h],{type:m})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(h),v.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(h,m,v){var y=[],x=0,E=h.length;if(E<=v)return String.fromCharCode.apply(null,h);for(;x<E;)m==="array"||m==="nodebuffer"?y.push(String.fromCharCode.apply(null,h.slice(x,Math.min(x+v,E)))):y.push(String.fromCharCode.apply(null,h.subarray(x,Math.min(x+v,E)))),x+=v;return y.join("")},stringifyByChar:function(h){for(var m="",v=0;v<h.length;v++)m+=String.fromCharCode(h[v]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function c(h){var m=65536,v=i.getTypeOf(h),y=!0;if(v==="uint8array"?y=g.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=g.applyCanBeUsed.nodebuffer),y)for(;1<m;)try{return g.stringifyByChunk(h,v,m)}catch{m=Math.floor(m/2)}return g.stringifyByChar(h)}function l(h,m){for(var v=0;v<h.length;v++)m[v]=h[v];return m}i.applyFromCharCode=c;var p={};p.string={string:d,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return p.string.uint8array(h).buffer},uint8array:function(h){return f(h,new Uint8Array(h.length))},nodebuffer:function(h){return f(h,o.allocBuffer(h.length))}},p.array={string:c,array:d,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(h)}},p.arraybuffer={string:function(h){return c(new Uint8Array(h))},array:function(h){return l(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:d,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return o.newBufferFrom(new Uint8Array(h))}},p.uint8array={string:c,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:d,nodebuffer:function(h){return o.newBufferFrom(h)}},p.nodebuffer={string:c,array:function(h){return l(h,new Array(h.length))},arraybuffer:function(h){return p.nodebuffer.uint8array(h).buffer},uint8array:function(h){return l(h,new Uint8Array(h.length))},nodebuffer:d},i.transformTo=function(h,m){if(m=m||"",!h)return m;i.checkSupport(h);var v=i.getTypeOf(m);return p[v][h](m)},i.resolve=function(h){for(var m=h.split("/"),v=[],y=0;y<m.length;y++){var x=m[y];x==="."||x===""&&y!==0&&y!==m.length-1||(x===".."?v.pop():v.push(x))}return v.join("/")},i.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(h)?"nodebuffer":s.uint8array&&h instanceof Uint8Array?"uint8array":s.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(h){if(!s[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(h){var m,v,y="";for(v=0;v<(h||"").length;v++)y+="\\x"+((m=h.charCodeAt(v))<16?"0":"")+m.toString(16).toUpperCase();return y},i.delay=function(h,m,v){setImmediate(function(){h.apply(v||null,m||[])})},i.inherits=function(h,m){function v(){}v.prototype=m.prototype,h.prototype=new v},i.extend=function(){var h,m,v={};for(h=0;h<arguments.length;h++)for(m in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],m)&&v[m]===void 0&&(v[m]=arguments[h][m]);return v},i.prepareContent=function(h,m,v,y,x){return u.Promise.resolve(m).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,T){var A=new FileReader;A.onload=function(L){k(L.target.result)},A.onerror=function(L){T(L.target.error)},A.readAsArrayBuffer(E)}):E}).then(function(E){var k=i.getTypeOf(E);return k?(k==="arraybuffer"?E=i.transformTo("uint8array",E):k==="string"&&(x?E=a.decode(E):v&&y!==!0&&(E=function(T){return f(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))}(E))),E):u.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./signature"),u=n("./zipEntry"),d=n("./support");function f(g){this.files=[],this.loadOptions=g}f.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var c=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(c)+", expected "+a.pretty(g)+")")}},isSignature:function(g,c){var l=this.reader.index;this.reader.setIndex(g);var p=this.reader.readString(4)===c;return this.reader.setIndex(l),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),c=d.uint8array?"uint8array":"array",l=a.transformTo(c,g);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,c,l,p=this.zip64EndOfCentralSize-44;0<p;)g=this.reader.readInt(2),c=this.reader.readInt(4),l=this.reader.readData(c),this.zip64ExtensibleData[g]={id:g,length:c,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,c;for(g=0;g<this.files.length;g++)c=this.files[g],this.reader.setIndex(c.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),c.readLocalPart(this.reader),c.handleUTF8(),c.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var c=g;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var p=c-l;if(0<p)this.isSignature(c,o.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(g){this.reader=s(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),a=n("./utils"),o=n("./compressedObject"),u=n("./crc32"),d=n("./utf8"),f=n("./compressions"),g=n("./support");function c(l,p){this.options=l,this.loadOptions=p}c.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var p,h;if(l.skip(22),this.fileNameLength=l.readInt(2),h=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(m){for(var v in f)if(Object.prototype.hasOwnProperty.call(f,v)&&f[v].magic===m)return f[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var p=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(p),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var p,h,m,v=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<v;)p=l.readInt(2),h=l.readInt(2),m=l.readData(h),this.extraFields[p]={id:p,length:h,value:m};l.setIndex(v)},handleUTF8:function(){var l=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var h=a.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var v=a.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var p=s(l.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:d.utf8decode(p.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var p=s(l.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:d.utf8decode(p.readData(l.length-5))}return null}},r.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(p,h,m){this.name=p,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=h,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var a=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),u=n("./utf8"),d=n("./compressedObject"),f=n("./stream/GenericWorker");s.prototype={internalStream:function(p){var h=null,m="string";try{if(!p)throw new Error("No output type specified.");var v=(m=p.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),h=this._decompressWorker();var y=!this._dataBinary;y&&!v&&(h=h.pipe(new u.Utf8EncodeWorker)),!y&&v&&(h=h.pipe(new u.Utf8DecodeWorker))}catch(x){(h=new f("error")).error(x)}return new a(h,m,"")},async:function(p,h){return this.internalStream(p).accumulate(h)},nodeStream:function(p,h){return this.internalStream(p||"nodebuffer").toNodejsStream(h)},_compressWorker:function(p,h){if(this._data instanceof d&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(m,p,h)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<g.length;l++)s.prototype[g[l]]=c;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var a,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var d=0,f=new u(p),g=s.document.createTextNode("");f.observe(g,{characterData:!0}),a=function(){g.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var h=s.document.createElement("script");h.onreadystatechange=function(){p(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},s.document.documentElement.appendChild(h)}:function(){setTimeout(p,0)};else{var c=new s.MessageChannel;c.port1.onmessage=p,a=function(){c.port2.postMessage(0)}}var l=[];function p(){var h,m;o=!0;for(var v=l.length;v;){for(m=l,l=[],h=-1;++h<v;)m[h]();v=l.length}o=!1}r.exports=function(h){l.push(h)!==1||o||a()}}).call(this,typeof Ai<"u"?Ai:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function a(){}var o={},u=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function g(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,v!==a&&h(this,v)}function c(v,y,x){this.promise=v,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function l(v,y,x){s(function(){var E;try{E=y(x)}catch(k){return o.reject(v,k)}E===v?o.reject(v,new TypeError("Cannot resolve promise with itself")):o.resolve(v,E)})}function p(v){var y=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof y=="function")return function(){y.apply(v,arguments)}}function h(v,y){var x=!1;function E(A){x||(x=!0,o.reject(v,A))}function k(A){x||(x=!0,o.resolve(v,A))}var T=m(function(){y(k,E)});T.status==="error"&&E(T.value)}function m(v,y){var x={};try{x.value=v(y),x.status="success"}catch(E){x.status="error",x.value=E}return x}(r.exports=g).prototype.finally=function(v){if(typeof v!="function")return this;var y=this.constructor;return this.then(function(x){return y.resolve(v()).then(function(){return x})},function(x){return y.resolve(v()).then(function(){throw x})})},g.prototype.catch=function(v){return this.then(null,v)},g.prototype.then=function(v,y){if(typeof v!="function"&&this.state===d||typeof y!="function"&&this.state===u)return this;var x=new this.constructor(a);return this.state!==f?l(x,this.state===d?v:y,this.outcome):this.queue.push(new c(x,v,y)),x},c.prototype.callFulfilled=function(v){o.resolve(this.promise,v)},c.prototype.otherCallFulfilled=function(v){l(this.promise,this.onFulfilled,v)},c.prototype.callRejected=function(v){o.reject(this.promise,v)},c.prototype.otherCallRejected=function(v){l(this.promise,this.onRejected,v)},o.resolve=function(v,y){var x=m(p,y);if(x.status==="error")return o.reject(v,x.value);var E=x.value;if(E)h(v,E);else{v.state=d,v.outcome=y;for(var k=-1,T=v.queue.length;++k<T;)v.queue[k].callFulfilled(y)}return v},o.reject=function(v,y){v.state=u,v.outcome=y;for(var x=-1,E=v.queue.length;++x<E;)v.queue[x].callRejected(y);return v},g.resolve=function(v){return v instanceof this?v:o.resolve(new this(a),v)},g.reject=function(v){var y=new this(a);return o.reject(y,v)},g.all=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=v.length,E=!1;if(!x)return this.resolve([]);for(var k=new Array(x),T=0,A=-1,L=new this(a);++A<x;)O(v[A],A);return L;function O(B,F){y.resolve(B).then(function(C){k[F]=C,++T!==x||E||(E=!0,o.resolve(L,k))},function(C){E||(E=!0,o.reject(L,C))})}},g.race=function(v){var y=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=v.length,E=!1;if(!x)return this.resolve([]);for(var k=-1,T=new this(a);++k<x;)A=v[k],y.resolve(A).then(function(L){E||(E=!0,o.resolve(T,L))},function(L){E||(E=!0,o.reject(T,L))});var A;return T}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=Object.prototype.toString,g=0,c=-1,l=0,p=8;function h(v){if(!(this instanceof h))return new h(v);this.options=a.assign({level:c,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},v||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(x!==g)throw new Error(u[x]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var E;if(E=typeof y.dictionary=="string"?o.string2buf(y.dictionary):f.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(x=s.deflateSetDictionary(this.strm,E))!==g)throw new Error(u[x]);this._dict_set=!0}}function m(v,y){var x=new h(y);if(x.push(v,!0),x.err)throw x.msg||u[x.err];return x.result}h.prototype.push=function(v,y){var x,E,k=this.strm,T=this.options.chunkSize;if(this.ended)return!1;E=y===~~y?y:y===!0?4:0,typeof v=="string"?k.input=o.string2buf(v):f.call(v)==="[object ArrayBuffer]"?k.input=new Uint8Array(v):k.input=v,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(T),k.next_out=0,k.avail_out=T),(x=s.deflate(k,E))!==1&&x!==g)return this.onEnd(x),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&x!==1);return E===4?(x=s.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===g):E!==2||(this.onEnd(g),!(k.avail_out=0))},h.prototype.onData=function(v){this.chunks.push(v)},h.prototype.onEnd=function(v){v===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=h,i.deflate=m,i.deflateRaw=function(v,y){return(y=y||{}).raw=!0,m(v,y)},i.gzip=function(v,y){return(y=y||{}).gzip=!0,m(v,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),a=n("./utils/common"),o=n("./utils/strings"),u=n("./zlib/constants"),d=n("./zlib/messages"),f=n("./zlib/zstream"),g=n("./zlib/gzheader"),c=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||h&&h.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,m.windowBits);if(v!==u.Z_OK)throw new Error(d[v]);this.header=new g,s.inflateGetHeader(this.strm,this.header)}function p(h,m){var v=new l(m);if(v.push(h,!0),v.err)throw v.msg||d[v.err];return v.result}l.prototype.push=function(h,m){var v,y,x,E,k,T,A=this.strm,L=this.options.chunkSize,O=this.options.dictionary,B=!1;if(this.ended)return!1;y=m===~~m?m:m===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof h=="string"?A.input=o.binstring2buf(h):c.call(h)==="[object ArrayBuffer]"?A.input=new Uint8Array(h):A.input=h,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(L),A.next_out=0,A.avail_out=L),(v=s.inflate(A,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&O&&(T=typeof O=="string"?o.string2buf(O):c.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,v=s.inflateSetDictionary(this.strm,T)),v===u.Z_BUF_ERROR&&B===!0&&(v=u.Z_OK,B=!1),v!==u.Z_STREAM_END&&v!==u.Z_OK)return this.onEnd(v),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&v!==u.Z_STREAM_END&&(A.avail_in!==0||y!==u.Z_FINISH&&y!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=o.utf8border(A.output,A.next_out),E=A.next_out-x,k=o.buf2string(A.output,x),A.next_out=E,A.avail_out=L-E,E&&a.arraySet(A.output,A.output,x,E,0),this.onData(k)):this.onData(a.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(B=!0)}while((0<A.avail_in||A.avail_out===0)&&v!==u.Z_STREAM_END);return v===u.Z_STREAM_END&&(y=u.Z_FINISH),y===u.Z_FINISH?(v=s.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u.Z_OK):y!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(A.avail_out=0))},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},i.Inflate=l,i.inflate=p,i.inflateRaw=function(h,m){return(m=m||{}).raw=!0,p(h,m)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var g in f)f.hasOwnProperty(g)&&(u[g]=f[g])}}return u},i.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var a={arraySet:function(u,d,f,g,c){if(d.subarray&&u.subarray)u.set(d.subarray(f,f+g),c);else for(var l=0;l<g;l++)u[c+l]=d[f+l]},flattenChunks:function(u){var d,f,g,c,l,p;for(d=g=0,f=u.length;d<f;d++)g+=u[d].length;for(p=new Uint8Array(g),d=c=0,f=u.length;d<f;d++)l=u[d],p.set(l,c),c+=l.length;return p}},o={arraySet:function(u,d,f,g,c){for(var l=0;l<g;l++)u[c+l]=d[f+l]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(g,c){if(c<65537&&(g.subarray&&o||!g.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(g,c));for(var l="",p=0;p<c;p++)l+=String.fromCharCode(g[p]);return l}u[254]=u[254]=1,i.string2buf=function(g){var c,l,p,h,m,v=g.length,y=0;for(h=0;h<v;h++)(64512&(l=g.charCodeAt(h)))==55296&&h+1<v&&(64512&(p=g.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(p-56320),h++),y+=l<128?1:l<2048?2:l<65536?3:4;for(c=new s.Buf8(y),h=m=0;m<y;h++)(64512&(l=g.charCodeAt(h)))==55296&&h+1<v&&(64512&(p=g.charCodeAt(h+1)))==56320&&(l=65536+(l-55296<<10)+(p-56320),h++),l<128?c[m++]=l:(l<2048?c[m++]=192|l>>>6:(l<65536?c[m++]=224|l>>>12:(c[m++]=240|l>>>18,c[m++]=128|l>>>12&63),c[m++]=128|l>>>6&63),c[m++]=128|63&l);return c},i.buf2binstring=function(g){return f(g,g.length)},i.binstring2buf=function(g){for(var c=new s.Buf8(g.length),l=0,p=c.length;l<p;l++)c[l]=g.charCodeAt(l);return c},i.buf2string=function(g,c){var l,p,h,m,v=c||g.length,y=new Array(2*v);for(l=p=0;l<v;)if((h=g[l++])<128)y[p++]=h;else if(4<(m=u[h]))y[p++]=65533,l+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&l<v;)h=h<<6|63&g[l++],m--;1<m?y[p++]=65533:h<65536?y[p++]=h:(h-=65536,y[p++]=55296|h>>10&1023,y[p++]=56320|1023&h)}return f(y,p)},i.utf8border=function(g,c){var l;for((c=c||g.length)>g.length&&(c=g.length),l=c-1;0<=l&&(192&g[l])==128;)l--;return l<0||l===0?c:l+u[g[l]]>c?l:c}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,a,o,u){for(var d=65535&s|0,f=s>>>16&65535|0,g=0;o!==0;){for(o-=g=2e3<o?2e3:o;f=f+(d=d+a[u++]|0)|0,--g;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();r.exports=function(a,o,u,d){var f=s,g=d+u;a^=-1;for(var c=d;c<g;c++)a=a>>>8^f[255&(a^o[c])];return-1^a}},{}],46:[function(n,r,i){var s,a=n("../utils/common"),o=n("./trees"),u=n("./adler32"),d=n("./crc32"),f=n("./messages"),g=0,c=4,l=0,p=-2,h=-1,m=4,v=2,y=8,x=9,E=286,k=30,T=19,A=2*E+1,L=15,O=3,B=258,F=B+O+1,C=42,R=113,b=1,D=2,V=3,U=4;function X(_,K){return _.msg=f[K],K}function G(_){return(_<<1)-(4<_?9:0)}function te(_){for(var K=_.length;0<=--K;)_[K]=0}function N(_){var K=_.state,z=K.pending;z>_.avail_out&&(z=_.avail_out),z!==0&&(a.arraySet(_.output,K.pending_buf,K.pending_out,z,_.next_out),_.next_out+=z,K.pending_out+=z,_.total_out+=z,_.avail_out-=z,K.pending-=z,K.pending===0&&(K.pending_out=0))}function M(_,K){o._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,K),_.block_start=_.strstart,N(_.strm)}function oe(_,K){_.pending_buf[_.pending++]=K}function ae(_,K){_.pending_buf[_.pending++]=K>>>8&255,_.pending_buf[_.pending++]=255&K}function q(_,K){var z,I,S=_.max_chain_length,P=_.strstart,Y=_.prev_length,ne=_.nice_match,W=_.strstart>_.w_size-F?_.strstart-(_.w_size-F):0,ie=_.window,le=_.w_mask,se=_.prev,ve=_.strstart+B,Ue=ie[P+Y-1],Ae=ie[P+Y];_.prev_length>=_.good_match&&(S>>=2),ne>_.lookahead&&(ne=_.lookahead);do if(ie[(z=K)+Y]===Ae&&ie[z+Y-1]===Ue&&ie[z]===ie[P]&&ie[++z]===ie[P+1]){P+=2,z++;do;while(ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&ie[++P]===ie[++z]&&P<ve);if(I=B-(ve-P),P=ve-B,Y<I){if(_.match_start=K,ne<=(Y=I))break;Ue=ie[P+Y-1],Ae=ie[P+Y]}}while((K=se[K&le])>W&&--S!=0);return Y<=_.lookahead?Y:_.lookahead}function _e(_){var K,z,I,S,P,Y,ne,W,ie,le,se=_.w_size;do{if(S=_.window_size-_.lookahead-_.strstart,_.strstart>=se+(se-F)){for(a.arraySet(_.window,_.window,se,se,0),_.match_start-=se,_.strstart-=se,_.block_start-=se,K=z=_.hash_size;I=_.head[--K],_.head[K]=se<=I?I-se:0,--z;);for(K=z=se;I=_.prev[--K],_.prev[K]=se<=I?I-se:0,--z;);S+=se}if(_.strm.avail_in===0)break;if(Y=_.strm,ne=_.window,W=_.strstart+_.lookahead,ie=S,le=void 0,le=Y.avail_in,ie<le&&(le=ie),z=le===0?0:(Y.avail_in-=le,a.arraySet(ne,Y.input,Y.next_in,le,W),Y.state.wrap===1?Y.adler=u(Y.adler,ne,le,W):Y.state.wrap===2&&(Y.adler=d(Y.adler,ne,le,W)),Y.next_in+=le,Y.total_in+=le,le),_.lookahead+=z,_.lookahead+_.insert>=O)for(P=_.strstart-_.insert,_.ins_h=_.window[P],_.ins_h=(_.ins_h<<_.hash_shift^_.window[P+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[P+O-1])&_.hash_mask,_.prev[P&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=P,P++,_.insert--,!(_.lookahead+_.insert<O)););}while(_.lookahead<F&&_.strm.avail_in!==0)}function xe(_,K){for(var z,I;;){if(_.lookahead<F){if(_e(_),_.lookahead<F&&K===g)return b;if(_.lookahead===0)break}if(z=0,_.lookahead>=O&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+O-1])&_.hash_mask,z=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),z!==0&&_.strstart-z<=_.w_size-F&&(_.match_length=q(_,z)),_.match_length>=O)if(I=o._tr_tally(_,_.strstart-_.match_start,_.match_length-O),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=O){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+O-1])&_.hash_mask,z=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else I=o._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(I&&(M(_,!1),_.strm.avail_out===0))return b}return _.insert=_.strstart<O-1?_.strstart:O-1,K===c?(M(_,!0),_.strm.avail_out===0?V:U):_.last_lit&&(M(_,!1),_.strm.avail_out===0)?b:D}function de(_,K){for(var z,I,S;;){if(_.lookahead<F){if(_e(_),_.lookahead<F&&K===g)return b;if(_.lookahead===0)break}if(z=0,_.lookahead>=O&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+O-1])&_.hash_mask,z=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=O-1,z!==0&&_.prev_length<_.max_lazy_match&&_.strstart-z<=_.w_size-F&&(_.match_length=q(_,z),_.match_length<=5&&(_.strategy===1||_.match_length===O&&4096<_.strstart-_.match_start)&&(_.match_length=O-1)),_.prev_length>=O&&_.match_length<=_.prev_length){for(S=_.strstart+_.lookahead-O,I=o._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-O),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=S&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+O-1])&_.hash_mask,z=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=O-1,_.strstart++,I&&(M(_,!1),_.strm.avail_out===0))return b}else if(_.match_available){if((I=o._tr_tally(_,0,_.window[_.strstart-1]))&&M(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return b}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(I=o._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<O-1?_.strstart:O-1,K===c?(M(_,!0),_.strm.avail_out===0?V:U):_.last_lit&&(M(_,!1),_.strm.avail_out===0)?b:D}function Ee(_,K,z,I,S){this.good_length=_,this.max_lazy=K,this.nice_length=z,this.max_chain=I,this.func=S}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*T+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(L+1),this.heap=new a.Buf16(2*E+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*E+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(_){var K;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=v,(K=_.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?C:R,_.adler=K.wrap===2?0:1,K.last_flush=g,o._tr_init(K),l):X(_,p)}function Oe(_){var K=fe(_);return K===l&&function(z){z.window_size=2*z.w_size,te(z.head),z.max_lazy_match=s[z.level].max_lazy,z.good_match=s[z.level].good_length,z.nice_match=s[z.level].nice_length,z.max_chain_length=s[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=O-1,z.match_available=0,z.ins_h=0}(_.state),K}function De(_,K,z,I,S,P){if(!_)return p;var Y=1;if(K===h&&(K=6),I<0?(Y=0,I=-I):15<I&&(Y=2,I-=16),S<1||x<S||z!==y||I<8||15<I||K<0||9<K||P<0||m<P)return X(_,p);I===8&&(I=9);var ne=new me;return(_.state=ne).strm=_,ne.wrap=Y,ne.gzhead=null,ne.w_bits=I,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=S+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+O-1)/O),ne.window=new a.Buf8(2*ne.w_size),ne.head=new a.Buf16(ne.hash_size),ne.prev=new a.Buf16(ne.w_size),ne.lit_bufsize=1<<S+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new a.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=K,ne.strategy=P,ne.method=z,Oe(_)}s=[new Ee(0,0,0,0,function(_,K){var z=65535;for(z>_.pending_buf_size-5&&(z=_.pending_buf_size-5);;){if(_.lookahead<=1){if(_e(_),_.lookahead===0&&K===g)return b;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var I=_.block_start+z;if((_.strstart===0||_.strstart>=I)&&(_.lookahead=_.strstart-I,_.strstart=I,M(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-F&&(M(_,!1),_.strm.avail_out===0))return b}return _.insert=0,K===c?(M(_,!0),_.strm.avail_out===0?V:U):(_.strstart>_.block_start&&(M(_,!1),_.strm.avail_out),b)}),new Ee(4,4,8,4,xe),new Ee(4,5,16,8,xe),new Ee(4,6,32,32,xe),new Ee(4,4,16,16,de),new Ee(8,16,32,32,de),new Ee(8,16,128,128,de),new Ee(8,32,128,256,de),new Ee(32,128,258,1024,de),new Ee(32,258,258,4096,de)],i.deflateInit=function(_,K){return De(_,K,y,15,8,0)},i.deflateInit2=De,i.deflateReset=Oe,i.deflateResetKeep=fe,i.deflateSetHeader=function(_,K){return _&&_.state?_.state.wrap!==2?p:(_.state.gzhead=K,l):p},i.deflate=function(_,K){var z,I,S,P;if(!_||!_.state||5<K||K<0)return _?X(_,p):p;if(I=_.state,!_.output||!_.input&&_.avail_in!==0||I.status===666&&K!==c)return X(_,_.avail_out===0?-5:p);if(I.strm=_,z=I.last_flush,I.last_flush=K,I.status===C)if(I.wrap===2)_.adler=0,oe(I,31),oe(I,139),oe(I,8),I.gzhead?(oe(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),oe(I,255&I.gzhead.time),oe(I,I.gzhead.time>>8&255),oe(I,I.gzhead.time>>16&255),oe(I,I.gzhead.time>>24&255),oe(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),oe(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(oe(I,255&I.gzhead.extra.length),oe(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(_.adler=d(_.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(oe(I,0),oe(I,0),oe(I,0),oe(I,0),oe(I,0),oe(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),oe(I,3),I.status=R);else{var Y=y+(I.w_bits-8<<4)<<8;Y|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(Y|=32),Y+=31-Y%31,I.status=R,ae(I,Y),I.strstart!==0&&(ae(I,_.adler>>>16),ae(I,65535&_.adler)),_.adler=1}if(I.status===69)if(I.gzhead.extra){for(S=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),N(_),S=I.pending,I.pending!==I.pending_buf_size));)oe(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){S=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),N(_),S=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,oe(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),P===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){S=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),N(_),S=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,oe(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>S&&(_.adler=d(_.adler,I.pending_buf,I.pending-S,S)),P===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&N(_),I.pending+2<=I.pending_buf_size&&(oe(I,255&_.adler),oe(I,_.adler>>8&255),_.adler=0,I.status=R)):I.status=R),I.pending!==0){if(N(_),_.avail_out===0)return I.last_flush=-1,l}else if(_.avail_in===0&&G(K)<=G(z)&&K!==c)return X(_,-5);if(I.status===666&&_.avail_in!==0)return X(_,-5);if(_.avail_in!==0||I.lookahead!==0||K!==g&&I.status!==666){var ne=I.strategy===2?function(W,ie){for(var le;;){if(W.lookahead===0&&(_e(W),W.lookahead===0)){if(ie===g)return b;break}if(W.match_length=0,le=o._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++,le&&(M(W,!1),W.strm.avail_out===0))return b}return W.insert=0,ie===c?(M(W,!0),W.strm.avail_out===0?V:U):W.last_lit&&(M(W,!1),W.strm.avail_out===0)?b:D}(I,K):I.strategy===3?function(W,ie){for(var le,se,ve,Ue,Ae=W.window;;){if(W.lookahead<=B){if(_e(W),W.lookahead<=B&&ie===g)return b;if(W.lookahead===0)break}if(W.match_length=0,W.lookahead>=O&&0<W.strstart&&(se=Ae[ve=W.strstart-1])===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]){Ue=W.strstart+B;do;while(se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&se===Ae[++ve]&&ve<Ue);W.match_length=B-(Ue-ve),W.match_length>W.lookahead&&(W.match_length=W.lookahead)}if(W.match_length>=O?(le=o._tr_tally(W,1,W.match_length-O),W.lookahead-=W.match_length,W.strstart+=W.match_length,W.match_length=0):(le=o._tr_tally(W,0,W.window[W.strstart]),W.lookahead--,W.strstart++),le&&(M(W,!1),W.strm.avail_out===0))return b}return W.insert=0,ie===c?(M(W,!0),W.strm.avail_out===0?V:U):W.last_lit&&(M(W,!1),W.strm.avail_out===0)?b:D}(I,K):s[I.level].func(I,K);if(ne!==V&&ne!==U||(I.status=666),ne===b||ne===V)return _.avail_out===0&&(I.last_flush=-1),l;if(ne===D&&(K===1?o._tr_align(I):K!==5&&(o._tr_stored_block(I,0,0,!1),K===3&&(te(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),N(_),_.avail_out===0))return I.last_flush=-1,l}return K!==c?l:I.wrap<=0?1:(I.wrap===2?(oe(I,255&_.adler),oe(I,_.adler>>8&255),oe(I,_.adler>>16&255),oe(I,_.adler>>24&255),oe(I,255&_.total_in),oe(I,_.total_in>>8&255),oe(I,_.total_in>>16&255),oe(I,_.total_in>>24&255)):(ae(I,_.adler>>>16),ae(I,65535&_.adler)),N(_),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?l:1)},i.deflateEnd=function(_){var K;return _&&_.state?(K=_.state.status)!==C&&K!==69&&K!==73&&K!==91&&K!==103&&K!==R&&K!==666?X(_,p):(_.state=null,K===R?X(_,-3):l):p},i.deflateSetDictionary=function(_,K){var z,I,S,P,Y,ne,W,ie,le=K.length;if(!_||!_.state||(P=(z=_.state).wrap)===2||P===1&&z.status!==C||z.lookahead)return p;for(P===1&&(_.adler=u(_.adler,K,le,0)),z.wrap=0,le>=z.w_size&&(P===0&&(te(z.head),z.strstart=0,z.block_start=0,z.insert=0),ie=new a.Buf8(z.w_size),a.arraySet(ie,K,le-z.w_size,z.w_size,0),K=ie,le=z.w_size),Y=_.avail_in,ne=_.next_in,W=_.input,_.avail_in=le,_.next_in=0,_.input=K,_e(z);z.lookahead>=O;){for(I=z.strstart,S=z.lookahead-(O-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[I+O-1])&z.hash_mask,z.prev[I&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=I,I++,--S;);z.strstart=I,z.lookahead=O-1,_e(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=O-1,z.match_available=0,_.next_in=ne,_.input=W,_.avail_in=Y,z.wrap=P,l},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,a){var o,u,d,f,g,c,l,p,h,m,v,y,x,E,k,T,A,L,O,B,F,C,R,b,D;o=s.state,u=s.next_in,b=s.input,d=u+(s.avail_in-5),f=s.next_out,D=s.output,g=f-(a-s.avail_out),c=f+(s.avail_out-257),l=o.dmax,p=o.wsize,h=o.whave,m=o.wnext,v=o.window,y=o.hold,x=o.bits,E=o.lencode,k=o.distcode,T=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{x<15&&(y+=b[u++]<<x,x+=8,y+=b[u++]<<x,x+=8),L=E[y&T];t:for(;;){if(y>>>=O=L>>>24,x-=O,(O=L>>>16&255)===0)D[f++]=65535&L;else{if(!(16&O)){if((64&O)==0){L=E[(65535&L)+(y&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}B=65535&L,(O&=15)&&(x<O&&(y+=b[u++]<<x,x+=8),B+=y&(1<<O)-1,y>>>=O,x-=O),x<15&&(y+=b[u++]<<x,x+=8,y+=b[u++]<<x,x+=8),L=k[y&A];n:for(;;){if(y>>>=O=L>>>24,x-=O,!(16&(O=L>>>16&255))){if((64&O)==0){L=k[(65535&L)+(y&(1<<O)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(F=65535&L,x<(O&=15)&&(y+=b[u++]<<x,(x+=8)<O&&(y+=b[u++]<<x,x+=8)),l<(F+=y&(1<<O)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=O,x-=O,(O=f-g)<F){if(h<(O=F-O)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(R=v,(C=0)===m){if(C+=p-O,O<B){for(B-=O;D[f++]=v[C++],--O;);C=f-F,R=D}}else if(m<O){if(C+=p+m-O,(O-=m)<B){for(B-=O;D[f++]=v[C++],--O;);if(C=0,m<B){for(B-=O=m;D[f++]=v[C++],--O;);C=f-F,R=D}}}else if(C+=m-O,O<B){for(B-=O;D[f++]=v[C++],--O;);C=f-F,R=D}for(;2<B;)D[f++]=R[C++],D[f++]=R[C++],D[f++]=R[C++],B-=3;B&&(D[f++]=R[C++],1<B&&(D[f++]=R[C++]))}else{for(C=f-F;D[f++]=D[C++],D[f++]=D[C++],D[f++]=D[C++],2<(B-=3););B&&(D[f++]=D[C++],1<B&&(D[f++]=D[C++]))}break}}break}}while(u<d&&f<c);u-=B=x>>3,y&=(1<<(x-=B<<3))-1,s.next_in=u,s.next_out=f,s.avail_in=u<d?d-u+5:5-(u-d),s.avail_out=f<c?c-f+257:257-(f-c),o.hold=y,o.bits=x}},{}],49:[function(n,r,i){var s=n("../utils/common"),a=n("./adler32"),o=n("./crc32"),u=n("./inffast"),d=n("./inftrees"),f=1,g=2,c=0,l=-2,p=1,h=852,m=592;function v(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(C){var R;return C&&C.state?(R=C.state,C.total_in=C.total_out=R.total=0,C.msg="",R.wrap&&(C.adler=1&R.wrap),R.mode=p,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new s.Buf32(h),R.distcode=R.distdyn=new s.Buf32(m),R.sane=1,R.back=-1,c):l}function E(C){var R;return C&&C.state?((R=C.state).wsize=0,R.whave=0,R.wnext=0,x(C)):l}function k(C,R){var b,D;return C&&C.state?(D=C.state,R<0?(b=0,R=-R):(b=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?l:(D.window!==null&&D.wbits!==R&&(D.window=null),D.wrap=b,D.wbits=R,E(C))):l}function T(C,R){var b,D;return C?(D=new y,(C.state=D).window=null,(b=k(C,R))!==c&&(C.state=null),b):l}var A,L,O=!0;function B(C){if(O){var R;for(A=new s.Buf32(512),L=new s.Buf32(32),R=0;R<144;)C.lens[R++]=8;for(;R<256;)C.lens[R++]=9;for(;R<280;)C.lens[R++]=7;for(;R<288;)C.lens[R++]=8;for(d(f,C.lens,0,288,A,0,C.work,{bits:9}),R=0;R<32;)C.lens[R++]=5;d(g,C.lens,0,32,L,0,C.work,{bits:5}),O=!1}C.lencode=A,C.lenbits=9,C.distcode=L,C.distbits=5}function F(C,R,b,D){var V,U=C.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new s.Buf8(U.wsize)),D>=U.wsize?(s.arraySet(U.window,R,b-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(D<(V=U.wsize-U.wnext)&&(V=D),s.arraySet(U.window,R,b-D,V,U.wnext),(D-=V)?(s.arraySet(U.window,R,b-D,D,0),U.wnext=D,U.whave=U.wsize):(U.wnext+=V,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=V))),0}i.inflateReset=E,i.inflateReset2=k,i.inflateResetKeep=x,i.inflateInit=function(C){return T(C,15)},i.inflateInit2=T,i.inflate=function(C,R){var b,D,V,U,X,G,te,N,M,oe,ae,q,_e,xe,de,Ee,me,fe,Oe,De,_,K,z,I,S=0,P=new s.Buf8(4),Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return l;(b=C.state).mode===12&&(b.mode=13),X=C.next_out,V=C.output,te=C.avail_out,U=C.next_in,D=C.input,G=C.avail_in,N=b.hold,M=b.bits,oe=G,ae=te,K=c;e:for(;;)switch(b.mode){case p:if(b.wrap===0){b.mode=13;break}for(;M<16;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(2&b.wrap&&N===35615){P[b.check=0]=255&N,P[1]=N>>>8&255,b.check=o(b.check,P,2,0),M=N=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&N)<<8)+(N>>8))%31){C.msg="incorrect header check",b.mode=30;break}if((15&N)!=8){C.msg="unknown compression method",b.mode=30;break}if(M-=4,_=8+(15&(N>>>=4)),b.wbits===0)b.wbits=_;else if(_>b.wbits){C.msg="invalid window size",b.mode=30;break}b.dmax=1<<_,C.adler=b.check=1,b.mode=512&N?10:12,M=N=0;break;case 2:for(;M<16;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(b.flags=N,(255&b.flags)!=8){C.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){C.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=N>>8&1),512&b.flags&&(P[0]=255&N,P[1]=N>>>8&255,b.check=o(b.check,P,2,0)),M=N=0,b.mode=3;case 3:for(;M<32;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.head&&(b.head.time=N),512&b.flags&&(P[0]=255&N,P[1]=N>>>8&255,P[2]=N>>>16&255,P[3]=N>>>24&255,b.check=o(b.check,P,4,0)),M=N=0,b.mode=4;case 4:for(;M<16;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.head&&(b.head.xflags=255&N,b.head.os=N>>8),512&b.flags&&(P[0]=255&N,P[1]=N>>>8&255,b.check=o(b.check,P,2,0)),M=N=0,b.mode=5;case 5:if(1024&b.flags){for(;M<16;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.length=N,b.head&&(b.head.extra_len=N),512&b.flags&&(P[0]=255&N,P[1]=N>>>8&255,b.check=o(b.check,P,2,0)),M=N=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(G<(q=b.length)&&(q=G),q&&(b.head&&(_=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),s.arraySet(b.head.extra,D,U,q,_)),512&b.flags&&(b.check=o(b.check,D,q,U)),G-=q,U+=q,b.length-=q),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(G===0)break e;for(q=0;_=D[U+q++],b.head&&_&&b.length<65536&&(b.head.name+=String.fromCharCode(_)),_&&q<G;);if(512&b.flags&&(b.check=o(b.check,D,q,U)),G-=q,U+=q,_)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(G===0)break e;for(q=0;_=D[U+q++],b.head&&_&&b.length<65536&&(b.head.comment+=String.fromCharCode(_)),_&&q<G;);if(512&b.flags&&(b.check=o(b.check,D,q,U)),G-=q,U+=q,_)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;M<16;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(N!==(65535&b.check)){C.msg="header crc mismatch",b.mode=30;break}M=N=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),C.adler=b.check=0,b.mode=12;break;case 10:for(;M<32;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}C.adler=b.check=v(N),M=N=0,b.mode=11;case 11:if(b.havedict===0)return C.next_out=X,C.avail_out=te,C.next_in=U,C.avail_in=G,b.hold=N,b.bits=M,2;C.adler=b.check=1,b.mode=12;case 12:if(R===5||R===6)break e;case 13:if(b.last){N>>>=7&M,M-=7&M,b.mode=27;break}for(;M<3;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}switch(b.last=1&N,M-=1,3&(N>>>=1)){case 0:b.mode=14;break;case 1:if(B(b),b.mode=20,R!==6)break;N>>>=2,M-=2;break e;case 2:b.mode=17;break;case 3:C.msg="invalid block type",b.mode=30}N>>>=2,M-=2;break;case 14:for(N>>>=7&M,M-=7&M;M<32;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if((65535&N)!=(N>>>16^65535)){C.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&N,M=N=0,b.mode=15,R===6)break e;case 15:b.mode=16;case 16:if(q=b.length){if(G<q&&(q=G),te<q&&(q=te),q===0)break e;s.arraySet(V,D,U,q,X),G-=q,U+=q,te-=q,X+=q,b.length-=q;break}b.mode=12;break;case 17:for(;M<14;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(b.nlen=257+(31&N),N>>>=5,M-=5,b.ndist=1+(31&N),N>>>=5,M-=5,b.ncode=4+(15&N),N>>>=4,M-=4,286<b.nlen||30<b.ndist){C.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;M<3;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.lens[Y[b.have++]]=7&N,N>>>=3,M-=3}for(;b.have<19;)b.lens[Y[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,z={bits:b.lenbits},K=d(0,b.lens,0,19,b.lencode,0,b.work,z),b.lenbits=z.bits,K){C.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;Ee=(S=b.lencode[N&(1<<b.lenbits)-1])>>>16&255,me=65535&S,!((de=S>>>24)<=M);){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(me<16)N>>>=de,M-=de,b.lens[b.have++]=me;else{if(me===16){for(I=de+2;M<I;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(N>>>=de,M-=de,b.have===0){C.msg="invalid bit length repeat",b.mode=30;break}_=b.lens[b.have-1],q=3+(3&N),N>>>=2,M-=2}else if(me===17){for(I=de+3;M<I;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}M-=de,_=0,q=3+(7&(N>>>=de)),N>>>=3,M-=3}else{for(I=de+7;M<I;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}M-=de,_=0,q=11+(127&(N>>>=de)),N>>>=7,M-=7}if(b.have+q>b.nlen+b.ndist){C.msg="invalid bit length repeat",b.mode=30;break}for(;q--;)b.lens[b.have++]=_}}if(b.mode===30)break;if(b.lens[256]===0){C.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,z={bits:b.lenbits},K=d(f,b.lens,0,b.nlen,b.lencode,0,b.work,z),b.lenbits=z.bits,K){C.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,z={bits:b.distbits},K=d(g,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,z),b.distbits=z.bits,K){C.msg="invalid distances set",b.mode=30;break}if(b.mode=20,R===6)break e;case 20:b.mode=21;case 21:if(6<=G&&258<=te){C.next_out=X,C.avail_out=te,C.next_in=U,C.avail_in=G,b.hold=N,b.bits=M,u(C,ae),X=C.next_out,V=C.output,te=C.avail_out,U=C.next_in,D=C.input,G=C.avail_in,N=b.hold,M=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;Ee=(S=b.lencode[N&(1<<b.lenbits)-1])>>>16&255,me=65535&S,!((de=S>>>24)<=M);){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(Ee&&(240&Ee)==0){for(fe=de,Oe=Ee,De=me;Ee=(S=b.lencode[De+((N&(1<<fe+Oe)-1)>>fe)])>>>16&255,me=65535&S,!(fe+(de=S>>>24)<=M);){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}N>>>=fe,M-=fe,b.back+=fe}if(N>>>=de,M-=de,b.back+=de,b.length=me,Ee===0){b.mode=26;break}if(32&Ee){b.back=-1,b.mode=12;break}if(64&Ee){C.msg="invalid literal/length code",b.mode=30;break}b.extra=15&Ee,b.mode=22;case 22:if(b.extra){for(I=b.extra;M<I;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.length+=N&(1<<b.extra)-1,N>>>=b.extra,M-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;Ee=(S=b.distcode[N&(1<<b.distbits)-1])>>>16&255,me=65535&S,!((de=S>>>24)<=M);){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if((240&Ee)==0){for(fe=de,Oe=Ee,De=me;Ee=(S=b.distcode[De+((N&(1<<fe+Oe)-1)>>fe)])>>>16&255,me=65535&S,!(fe+(de=S>>>24)<=M);){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}N>>>=fe,M-=fe,b.back+=fe}if(N>>>=de,M-=de,b.back+=de,64&Ee){C.msg="invalid distance code",b.mode=30;break}b.offset=me,b.extra=15&Ee,b.mode=24;case 24:if(b.extra){for(I=b.extra;M<I;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}b.offset+=N&(1<<b.extra)-1,N>>>=b.extra,M-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){C.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(te===0)break e;if(q=ae-te,b.offset>q){if((q=b.offset-q)>b.whave&&b.sane){C.msg="invalid distance too far back",b.mode=30;break}_e=q>b.wnext?(q-=b.wnext,b.wsize-q):b.wnext-q,q>b.length&&(q=b.length),xe=b.window}else xe=V,_e=X-b.offset,q=b.length;for(te<q&&(q=te),te-=q,b.length-=q;V[X++]=xe[_e++],--q;);b.length===0&&(b.mode=21);break;case 26:if(te===0)break e;V[X++]=b.length,te--,b.mode=21;break;case 27:if(b.wrap){for(;M<32;){if(G===0)break e;G--,N|=D[U++]<<M,M+=8}if(ae-=te,C.total_out+=ae,b.total+=ae,ae&&(C.adler=b.check=b.flags?o(b.check,V,ae,X-ae):a(b.check,V,ae,X-ae)),ae=te,(b.flags?N:v(N))!==b.check){C.msg="incorrect data check",b.mode=30;break}M=N=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;M<32;){if(G===0)break e;G--,N+=D[U++]<<M,M+=8}if(N!==(4294967295&b.total)){C.msg="incorrect length check",b.mode=30;break}M=N=0}b.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return l}return C.next_out=X,C.avail_out=te,C.next_in=U,C.avail_in=G,b.hold=N,b.bits=M,(b.wsize||ae!==C.avail_out&&b.mode<30&&(b.mode<27||R!==4))&&F(C,C.output,C.next_out,ae-C.avail_out)?(b.mode=31,-4):(oe-=C.avail_in,ae-=C.avail_out,C.total_in+=oe,C.total_out+=ae,b.total+=ae,b.wrap&&ae&&(C.adler=b.check=b.flags?o(b.check,V,ae,C.next_out-ae):a(b.check,V,ae,C.next_out-ae)),C.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(oe==0&&ae===0||R===4)&&K===c&&(K=-5),K)},i.inflateEnd=function(C){if(!C||!C.state)return l;var R=C.state;return R.window&&(R.window=null),C.state=null,c},i.inflateGetHeader=function(C,R){var b;return C&&C.state?(2&(b=C.state).wrap)==0?l:((b.head=R).done=!1,c):l},i.inflateSetDictionary=function(C,R){var b,D=R.length;return C&&C.state?(b=C.state).wrap!==0&&b.mode!==11?l:b.mode===11&&a(1,R,D,0)!==b.check?-3:F(C,R,D,D)?(b.mode=31,-4):(b.havedict=1,c):l},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,g,c,l,p,h,m,v){var y,x,E,k,T,A,L,O,B,F=v.bits,C=0,R=0,b=0,D=0,V=0,U=0,X=0,G=0,te=0,N=0,M=null,oe=0,ae=new s.Buf16(16),q=new s.Buf16(16),_e=null,xe=0;for(C=0;C<=15;C++)ae[C]=0;for(R=0;R<l;R++)ae[g[c+R]]++;for(V=F,D=15;1<=D&&ae[D]===0;D--);if(D<V&&(V=D),D===0)return p[h++]=20971520,p[h++]=20971520,v.bits=1,0;for(b=1;b<D&&ae[b]===0;b++);for(V<b&&(V=b),C=G=1;C<=15;C++)if(G<<=1,(G-=ae[C])<0)return-1;if(0<G&&(f===0||D!==1))return-1;for(q[1]=0,C=1;C<15;C++)q[C+1]=q[C]+ae[C];for(R=0;R<l;R++)g[c+R]!==0&&(m[q[g[c+R]]++]=R);if(A=f===0?(M=_e=m,19):f===1?(M=a,oe-=257,_e=o,xe-=257,256):(M=u,_e=d,-1),C=b,T=h,X=R=N=0,E=-1,k=(te=1<<(U=V))-1,f===1&&852<te||f===2&&592<te)return 1;for(;;){for(L=C-X,B=m[R]<A?(O=0,m[R]):m[R]>A?(O=_e[xe+m[R]],M[oe+m[R]]):(O=96,0),y=1<<C-X,b=x=1<<U;p[T+(N>>X)+(x-=y)]=L<<24|O<<16|B|0,x!==0;);for(y=1<<C-1;N&y;)y>>=1;if(y!==0?(N&=y-1,N+=y):N=0,R++,--ae[C]==0){if(C===D)break;C=g[c+m[R]]}if(V<C&&(N&k)!==E){for(X===0&&(X=V),T+=b,G=1<<(U=C-X);U+X<D&&!((G-=ae[U+X])<=0);)U++,G<<=1;if(te+=1<<U,f===1&&852<te||f===2&&592<te)return 1;p[E=N&k]=V<<24|U<<16|T-h|0}}return N!==0&&(p[T+N]=C-X<<24|64<<16|0),v.bits=V,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),a=0,o=1;function u(S){for(var P=S.length;0<=--P;)S[P]=0}var d=0,f=29,g=256,c=g+1+f,l=30,p=19,h=2*c+1,m=15,v=16,y=7,x=256,E=16,k=17,T=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(c+2));u(F);var C=new Array(2*l);u(C);var R=new Array(512);u(R);var b=new Array(256);u(b);var D=new Array(f);u(D);var V,U,X,G=new Array(l);function te(S,P,Y,ne,W){this.static_tree=S,this.extra_bits=P,this.extra_base=Y,this.elems=ne,this.max_length=W,this.has_stree=S&&S.length}function N(S,P){this.dyn_tree=S,this.max_code=0,this.stat_desc=P}function M(S){return S<256?R[S]:R[256+(S>>>7)]}function oe(S,P){S.pending_buf[S.pending++]=255&P,S.pending_buf[S.pending++]=P>>>8&255}function ae(S,P,Y){S.bi_valid>v-Y?(S.bi_buf|=P<<S.bi_valid&65535,oe(S,S.bi_buf),S.bi_buf=P>>v-S.bi_valid,S.bi_valid+=Y-v):(S.bi_buf|=P<<S.bi_valid&65535,S.bi_valid+=Y)}function q(S,P,Y){ae(S,Y[2*P],Y[2*P+1])}function _e(S,P){for(var Y=0;Y|=1&S,S>>>=1,Y<<=1,0<--P;);return Y>>>1}function xe(S,P,Y){var ne,W,ie=new Array(m+1),le=0;for(ne=1;ne<=m;ne++)ie[ne]=le=le+Y[ne-1]<<1;for(W=0;W<=P;W++){var se=S[2*W+1];se!==0&&(S[2*W]=_e(ie[se]++,se))}}function de(S){var P;for(P=0;P<c;P++)S.dyn_ltree[2*P]=0;for(P=0;P<l;P++)S.dyn_dtree[2*P]=0;for(P=0;P<p;P++)S.bl_tree[2*P]=0;S.dyn_ltree[2*x]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function Ee(S){8<S.bi_valid?oe(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function me(S,P,Y,ne){var W=2*P,ie=2*Y;return S[W]<S[ie]||S[W]===S[ie]&&ne[P]<=ne[Y]}function fe(S,P,Y){for(var ne=S.heap[Y],W=Y<<1;W<=S.heap_len&&(W<S.heap_len&&me(P,S.heap[W+1],S.heap[W],S.depth)&&W++,!me(P,ne,S.heap[W],S.depth));)S.heap[Y]=S.heap[W],Y=W,W<<=1;S.heap[Y]=ne}function Oe(S,P,Y){var ne,W,ie,le,se=0;if(S.last_lit!==0)for(;ne=S.pending_buf[S.d_buf+2*se]<<8|S.pending_buf[S.d_buf+2*se+1],W=S.pending_buf[S.l_buf+se],se++,ne===0?q(S,W,P):(q(S,(ie=b[W])+g+1,P),(le=A[ie])!==0&&ae(S,W-=D[ie],le),q(S,ie=M(--ne),Y),(le=L[ie])!==0&&ae(S,ne-=G[ie],le)),se<S.last_lit;);q(S,x,P)}function De(S,P){var Y,ne,W,ie=P.dyn_tree,le=P.stat_desc.static_tree,se=P.stat_desc.has_stree,ve=P.stat_desc.elems,Ue=-1;for(S.heap_len=0,S.heap_max=h,Y=0;Y<ve;Y++)ie[2*Y]!==0?(S.heap[++S.heap_len]=Ue=Y,S.depth[Y]=0):ie[2*Y+1]=0;for(;S.heap_len<2;)ie[2*(W=S.heap[++S.heap_len]=Ue<2?++Ue:0)]=1,S.depth[W]=0,S.opt_len--,se&&(S.static_len-=le[2*W+1]);for(P.max_code=Ue,Y=S.heap_len>>1;1<=Y;Y--)fe(S,ie,Y);for(W=ve;Y=S.heap[1],S.heap[1]=S.heap[S.heap_len--],fe(S,ie,1),ne=S.heap[1],S.heap[--S.heap_max]=Y,S.heap[--S.heap_max]=ne,ie[2*W]=ie[2*Y]+ie[2*ne],S.depth[W]=(S.depth[Y]>=S.depth[ne]?S.depth[Y]:S.depth[ne])+1,ie[2*Y+1]=ie[2*ne+1]=W,S.heap[1]=W++,fe(S,ie,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(Ae,Qe){var Lt,ct,Vt,qe,Ut,sn,mt=Qe.dyn_tree,Hn=Qe.max_code,fr=Qe.stat_desc.static_tree,hr=Qe.stat_desc.has_stree,Wr=Qe.stat_desc.extra_bits,ze=Qe.stat_desc.extra_base,Ke=Qe.stat_desc.max_length,rt=0;for(qe=0;qe<=m;qe++)Ae.bl_count[qe]=0;for(mt[2*Ae.heap[Ae.heap_max]+1]=0,Lt=Ae.heap_max+1;Lt<h;Lt++)Ke<(qe=mt[2*mt[2*(ct=Ae.heap[Lt])+1]+1]+1)&&(qe=Ke,rt++),mt[2*ct+1]=qe,Hn<ct||(Ae.bl_count[qe]++,Ut=0,ze<=ct&&(Ut=Wr[ct-ze]),sn=mt[2*ct],Ae.opt_len+=sn*(qe+Ut),hr&&(Ae.static_len+=sn*(fr[2*ct+1]+Ut)));if(rt!==0){do{for(qe=Ke-1;Ae.bl_count[qe]===0;)qe--;Ae.bl_count[qe]--,Ae.bl_count[qe+1]+=2,Ae.bl_count[Ke]--,rt-=2}while(0<rt);for(qe=Ke;qe!==0;qe--)for(ct=Ae.bl_count[qe];ct!==0;)Hn<(Vt=Ae.heap[--Lt])||(mt[2*Vt+1]!==qe&&(Ae.opt_len+=(qe-mt[2*Vt+1])*mt[2*Vt],mt[2*Vt+1]=qe),ct--)}}(S,P),xe(ie,Ue,S.bl_count)}function _(S,P,Y){var ne,W,ie=-1,le=P[1],se=0,ve=7,Ue=4;for(le===0&&(ve=138,Ue=3),P[2*(Y+1)+1]=65535,ne=0;ne<=Y;ne++)W=le,le=P[2*(ne+1)+1],++se<ve&&W===le||(se<Ue?S.bl_tree[2*W]+=se:W!==0?(W!==ie&&S.bl_tree[2*W]++,S.bl_tree[2*E]++):se<=10?S.bl_tree[2*k]++:S.bl_tree[2*T]++,ie=W,Ue=(se=0)===le?(ve=138,3):W===le?(ve=6,3):(ve=7,4))}function K(S,P,Y){var ne,W,ie=-1,le=P[1],se=0,ve=7,Ue=4;for(le===0&&(ve=138,Ue=3),ne=0;ne<=Y;ne++)if(W=le,le=P[2*(ne+1)+1],!(++se<ve&&W===le)){if(se<Ue)for(;q(S,W,S.bl_tree),--se!=0;);else W!==0?(W!==ie&&(q(S,W,S.bl_tree),se--),q(S,E,S.bl_tree),ae(S,se-3,2)):se<=10?(q(S,k,S.bl_tree),ae(S,se-3,3)):(q(S,T,S.bl_tree),ae(S,se-11,7));ie=W,Ue=(se=0)===le?(ve=138,3):W===le?(ve=6,3):(ve=7,4)}}u(G);var z=!1;function I(S,P,Y,ne){ae(S,(d<<1)+(ne?1:0),3),function(W,ie,le,se){Ee(W),oe(W,le),oe(W,~le),s.arraySet(W.pending_buf,W.window,ie,le,W.pending),W.pending+=le}(S,P,Y)}i._tr_init=function(S){z||(function(){var P,Y,ne,W,ie,le=new Array(m+1);for(W=ne=0;W<f-1;W++)for(D[W]=ne,P=0;P<1<<A[W];P++)b[ne++]=W;for(b[ne-1]=W,W=ie=0;W<16;W++)for(G[W]=ie,P=0;P<1<<L[W];P++)R[ie++]=W;for(ie>>=7;W<l;W++)for(G[W]=ie<<7,P=0;P<1<<L[W]-7;P++)R[256+ie++]=W;for(Y=0;Y<=m;Y++)le[Y]=0;for(P=0;P<=143;)F[2*P+1]=8,P++,le[8]++;for(;P<=255;)F[2*P+1]=9,P++,le[9]++;for(;P<=279;)F[2*P+1]=7,P++,le[7]++;for(;P<=287;)F[2*P+1]=8,P++,le[8]++;for(xe(F,c+1,le),P=0;P<l;P++)C[2*P+1]=5,C[2*P]=_e(P,5);V=new te(F,A,g+1,c,m),U=new te(C,L,0,l,m),X=new te(new Array(0),O,0,p,y)}(),z=!0),S.l_desc=new N(S.dyn_ltree,V),S.d_desc=new N(S.dyn_dtree,U),S.bl_desc=new N(S.bl_tree,X),S.bi_buf=0,S.bi_valid=0,de(S)},i._tr_stored_block=I,i._tr_flush_block=function(S,P,Y,ne){var W,ie,le=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(se){var ve,Ue=4093624447;for(ve=0;ve<=31;ve++,Ue>>>=1)if(1&Ue&&se.dyn_ltree[2*ve]!==0)return a;if(se.dyn_ltree[18]!==0||se.dyn_ltree[20]!==0||se.dyn_ltree[26]!==0)return o;for(ve=32;ve<g;ve++)if(se.dyn_ltree[2*ve]!==0)return o;return a}(S)),De(S,S.l_desc),De(S,S.d_desc),le=function(se){var ve;for(_(se,se.dyn_ltree,se.l_desc.max_code),_(se,se.dyn_dtree,se.d_desc.max_code),De(se,se.bl_desc),ve=p-1;3<=ve&&se.bl_tree[2*B[ve]+1]===0;ve--);return se.opt_len+=3*(ve+1)+5+5+4,ve}(S),W=S.opt_len+3+7>>>3,(ie=S.static_len+3+7>>>3)<=W&&(W=ie)):W=ie=Y+5,Y+4<=W&&P!==-1?I(S,P,Y,ne):S.strategy===4||ie===W?(ae(S,2+(ne?1:0),3),Oe(S,F,C)):(ae(S,4+(ne?1:0),3),function(se,ve,Ue,Ae){var Qe;for(ae(se,ve-257,5),ae(se,Ue-1,5),ae(se,Ae-4,4),Qe=0;Qe<Ae;Qe++)ae(se,se.bl_tree[2*B[Qe]+1],3);K(se,se.dyn_ltree,ve-1),K(se,se.dyn_dtree,Ue-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,le+1),Oe(S,S.dyn_ltree,S.dyn_dtree)),de(S),ne&&Ee(S)},i._tr_tally=function(S,P,Y){return S.pending_buf[S.d_buf+2*S.last_lit]=P>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&P,S.pending_buf[S.l_buf+S.last_lit]=255&Y,S.last_lit++,P===0?S.dyn_ltree[2*Y]++:(S.matches++,P--,S.dyn_ltree[2*(b[Y]+g+1)]++,S.dyn_dtree[2*M(P)]++),S.last_lit===S.lit_bufsize-1},i._tr_align=function(S){ae(S,2,3),q(S,x,F),function(P){P.bi_valid===16?(oe(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(a,o){if(!a.setImmediate){var u,d,f,g,c=1,l={},p=!1,h=a.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(a);m=m&&m.setTimeout?m:a,u={}.toString.call(a.process)==="[object process]"?function(E){process.nextTick(function(){y(E)})}:function(){if(a.postMessage&&!a.importScripts){var E=!0,k=a.onmessage;return a.onmessage=function(){E=!1},a.postMessage("","*"),a.onmessage=k,E}}()?(g="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",x,!1):a.attachEvent("onmessage",x),function(E){a.postMessage(g+E,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(E){y(E.data)},function(E){f.port2.postMessage(E)}):h&&"onreadystatechange"in h.createElement("script")?(d=h.documentElement,function(E){var k=h.createElement("script");k.onreadystatechange=function(){y(E),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(E){setTimeout(y,0,E)},m.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var k=new Array(arguments.length-1),T=0;T<k.length;T++)k[T]=arguments[T+1];var A={callback:E,args:k};return l[c]=A,u(c),c++},m.clearImmediate=v}function v(E){delete l[E]}function y(E){if(p)setTimeout(y,0,E);else{var k=l[E];if(k){p=!0;try{(function(T){var A=T.callback,L=T.args;switch(L.length){case 0:A();break;case 1:A(L[0]);break;case 2:A(L[0],L[1]);break;case 3:A(L[0],L[1],L[2]);break;default:A.apply(o,L)}})(k)}finally{v(E),p=!1}}}}function x(E){E.source===a&&typeof E.data=="string"&&E.data.indexOf(g)===0&&y(+E.data.slice(g.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ai<"u"?Ai:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Va)),Va.exports}var Xf=Kf();const Pc=zr(Xf),ei=e=>Uint8Array.from(e,t=>t.charCodeAt(0)),Yf=(e,t,n,r=0,i=0)=>{const a=new ArrayBuffer(22+e.length),o=new DataView(a);let u=0;return o.setUint16(u,0,!0),u+=2,o.setUint16(u,2,!0),u+=2,o.setUint16(u,1,!0),u+=2,o.setUint8(u++,t===256?0:t),o.setUint8(u++,n===256?0:n),o.setUint8(u++,0),o.setUint8(u++,0),o.setUint16(u,r,!0),u+=2,o.setUint16(u,i,!0),u+=2,o.setUint32(u,e.length,!0),u+=4,o.setUint32(u,22,!0),new Uint8Array(a,22).set(e),new Uint8Array(a)},Jf=(e,t)=>{const n=4+t.reduce((s,a)=>s+a.length,0),r=new Uint8Array(8+n);r.set(ei("LIST"),0),new DataView(r.buffer).setUint32(4,n,!0),r.set(ei(e),8);let i=12;for(const s of t)r.set(s,i),i+=s.length;return r},Qf=e=>{const t=e.length,n=Math.max(1,Math.round(60/Dt(Mn))),r=new ArrayBuffer(36),i=new DataView(r);i.setUint32(0,36,!0),i.setUint32(4,t,!0),i.setUint32(8,t,!0),i.setUint32(24,n,!0),i.setUint32(32,1,!0);const s=new Uint32Array(t).fill(n),a=Uint32Array.from({length:t},(p,h)=>h),o=(p,h)=>{const m=h instanceof Uint8Array?h:new Uint8Array(h),v=m.length&1?1:0,y=new Uint8Array(8+m.length+v);return y.set(ei(p),0),new DataView(y.buffer).setUint32(4,m.length,!0),y.set(m,8),y},u=e.map(p=>o("icon",p)),d=Jf("fram",u),f=[o("anih",r),o("rate",s.buffer),o("seq ",a.buffer),d],g=f.reduce((p,h)=>p+h.length,4),c=new Uint8Array(8+g);c.set(ei("RIFF"),0),new DataView(c.buffer).setUint32(4,g,!0),c.set(ei("ACON"),8);let l=12;for(const p of f)c.set(p,l),l+=p.length;return c},eh=async e=>{const{width:t,height:n,frames:r,ways:i}=e,s=new Pc;for(let a=0;a<i;a++){const o=[];for(let d=0;d<r;d++){const f=e.toI(d,a),g=e.canvasByI.get(f);if(!g)continue;const c=document.createElement("canvas");c.width=t,c.height=n;const l=c.getContext("2d",{willReadFrequently:!0});if(!l)continue;l.imageSmoothingEnabled=!1,l.drawImage(g,0,0,g.width,g.height,0,0,t,n);const h=c.toDataURL("image/png").split(",")[1],m=Uint8Array.from(atob(h),v=>v.charCodeAt(0));o.push(Yf(m,t,n))}const u=Qf(o);s.file(`cursor_${a+1}.ani`,u)}return s.generateAsync({type:"blob"})},th=(e,t)=>Math.floor(Math.random()*Math.abs(t-e+1))+e,nh=e=>e[Math.floor(Math.random()*e.length)];var Dn=(e,t=[])=>({parts:(...n)=>{if(rh(t))return Dn(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>Dn(e,[...t,...n]),omit:(...n)=>Dn(e,t.filter(r=>!n.includes(r))),rename:n=>Dn(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${pr(e)}"][data-part="${pr(r)}"]`,`& [data-scope="${pr(e)}"][data-part="${pr(r)}"]`].join(", "),attrs:{"data-scope":pr(e),"data-part":pr(r)}}}),{})}),pr=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),rh=e=>e.length===0,Yo=e=>Math.max(0,Math.min(1,e)),Ua=(...e)=>t=>e.reduce((n,r)=>r(n),t),wr=()=>{},da=e=>typeof e=="object"&&e!==null,Ie=e=>e?"":void 0,ih=e=>e?"true":void 0,ah=1,sh=9,oh=11,lt=e=>da(e)&&e.nodeType===ah&&typeof e.nodeName=="string",Ks=e=>da(e)&&e.nodeType===sh,lh=e=>da(e)&&e===e.window,Dc=e=>lt(e)?e.localName||"":"#document";function ch(e){return["html","body","#document"].includes(Dc(e))}var uh=e=>da(e)&&e.nodeType!==void 0,fi=e=>uh(e)&&e.nodeType===oh&&"host"in e,dh=e=>lt(e)&&e.localName==="input",fh=e=>lt(e)?e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0:!1,hh=/(textarea|select)/;function vh(e){if(e==null||!lt(e))return!1;try{return dh(e)&&e.selectionStart!=null||hh.test(e.localName)||e.isContentEditable||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")===""}catch{return!1}}function hi(e,t){var r;if(!e||!t||!lt(e)||!lt(t))return!1;const n=(r=t.getRootNode)==null?void 0:r.call(t);if(e===t||e.contains(t))return!0;if(n&&fi(n)){let i=t;for(;i;){if(e===i)return!0;i=i.parentNode||i.host}}return!1}function Rt(e){return Ks(e)?e:lh(e)?e.document:(e==null?void 0:e.ownerDocument)??document}function ph(e){return Rt(e).documentElement}function ut(e){var t;return fi(e)?ut(e.host):Ks(e)?e.defaultView??window:lt(e)?((t=e.ownerDocument)==null?void 0:t.defaultView)??window:window}function Nc(e){let t=e.activeElement;for(;t!=null&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function gh(e){if(Dc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fi(e)&&e.host||ph(e);return fi(t)?t.host:t}var Wa=new WeakMap;function mh(e){return Wa.has(e)||Wa.set(e,ut(e).getComputedStyle(e)),Wa.get(e)}var fa=()=>typeof document<"u";function bh(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}function yh(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(({brand:t,version:n})=>`${t}/${n}`).join(" "):navigator.userAgent}var Xs=e=>fa()&&e.test(bh()),_h=e=>fa()&&e.test(yh()),wh=e=>fa()&&e.test(navigator.vendor),Jo=()=>fa()&&!!navigator.maxTouchPoints,xh=()=>Xs(/^iPhone/i),kh=()=>Xs(/^iPad/i)||va()&&navigator.maxTouchPoints>1,ha=()=>xh()||kh(),Eh=()=>va()||ha(),va=()=>Xs(/^Mac/i),Ys=()=>Eh()&&wh(/apple/i),Ch=()=>_h(/Android/i);function Sh(e){var t,n,r;return((t=e.composedPath)==null?void 0:t.call(e))??((r=(n=e.nativeEvent)==null?void 0:n.composedPath)==null?void 0:r.call(n))}function It(e){const t=Sh(e);return(t==null?void 0:t[0])??e.target}function Ih(e){return e.mozInputSource===0&&e.isTrusted?!0:Ch()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}var ji=e=>e.button===0,Th=e=>e.button===2||va()&&e.ctrlKey&&e.button===0,Ah=e=>e.ctrlKey||e.altKey||e.metaKey,Oh=e=>"touches"in e&&e.touches.length>0,Rh={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Qo={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Lh(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let i=e.key;return i=Rh[i]??i,n==="rtl"&&r==="horizontal"&&i in Qo&&(i=Qo[i]),i}var Ph=new Set(["PageUp","PageDown"]),Dh=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function Nh(e){return e.ctrlKey||e.metaKey?.1:Ph.has(e.key)||e.shiftKey&&Dh.has(e.key)?10:1}function Js(e,t="client"){const n=Oh(e)?e.touches[0]||e.changedTouches[0]:e;return{x:n[`${t}X`],y:n[`${t}Y`]}}var Xe=(e,t,n,r)=>{const i=typeof e=="function"?e():e;return i==null||i.addEventListener(t,n,r),()=>{i==null||i.removeEventListener(t,n,r)}};function Fc(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,i=ut(e)[n].prototype;return Object.getOwnPropertyDescriptor(i,r)??{}}function Fh(e){if(e.localName==="input")return"HTMLInputElement";if(e.localName==="textarea")return"HTMLTextAreaElement";if(e.localName==="select")return"HTMLSelectElement"}function zc(e,t,n="value"){var i;if(!e)return;const r=Fh(e);r&&((i=Fc(e,{type:r,property:n}).set)==null||i.call(e,t)),e.setAttribute(n,t)}function Bc(e,t){var r;if(!e)return;(r=Fc(e,{type:"HTMLInputElement",property:"checked"}).set)==null||r.call(e,t),t?e.setAttribute("checked",""):e.removeAttribute("checked")}function zh(e,t){const{value:n,bubbles:r=!0}=t;if(!e)return;const i=ut(e);e instanceof i.HTMLInputElement&&(zc(e,`${n}`),e.dispatchEvent(new i.Event("input",{bubbles:r})))}function Mc(e,t){const{checked:n,bubbles:r=!0}=t;if(!e)return;const i=ut(e);e instanceof i.HTMLInputElement&&(Bc(e,n),e.dispatchEvent(new i.Event("click",{bubbles:r})))}function Bh(e){return Mh(e)?e.form:e.closest("form")}function Mh(e){return e.matches("textarea, input, select, button")}function Vh(e,t){if(!e)return;const n=Bh(e),r=i=>{i.defaultPrevented||t()};return n==null||n.addEventListener("reset",r,{passive:!0}),()=>n==null?void 0:n.removeEventListener("reset",r)}function Uh(e,t){const n=e==null?void 0:e.closest("fieldset");if(!n)return;t(n.disabled);const r=ut(n),i=new r.MutationObserver(()=>t(n.disabled));return i.observe(n,{attributes:!0,attributeFilter:["disabled"]}),()=>i.disconnect()}function Qs(e,t){if(!e)return;const{onFieldsetDisabledChange:n,onFormReset:r}=t,i=[Vh(e,r),Uh(e,n)];return()=>i.forEach(s=>s==null?void 0:s())}var Vc=e=>lt(e)&&e.tagName==="IFRAME",Wh=e=>!Number.isNaN(parseInt(e.getAttribute("tabindex")||"0",10)),Hh=e=>parseInt(e.getAttribute("tabindex")||"0",10)<0,eo="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",Uc=(e,t=!1)=>{if(!e)return[];const n=Array.from(e.querySelectorAll(eo));(t==!0||t=="if-empty"&&n.length===0)&&lt(e)&&Fn(e)&&n.unshift(e);const i=n.filter(Fn);return i.forEach((s,a)=>{if(Vc(s)&&s.contentDocument){const o=s.contentDocument.body;i.splice(a,1,...Uc(o))}}),i};function Fn(e){return!e||e.closest("[inert]")?!1:e.matches(eo)&&fh(e)}function xi(e,t){if(!e)return[];const n=Array.from(e.querySelectorAll(eo)),r=n.filter(Rn);return t&&Rn(e)&&r.unshift(e),r.forEach((i,s)=>{if(Vc(i)&&i.contentDocument){const a=i.contentDocument.body,o=xi(a);r.splice(s,1,...o)}}),!r.length&&t?n:r}function Rn(e){return e!=null&&e.tabIndex>0?!0:Fn(e)&&!Hh(e)}function $h(e,t){const n=xi(e,t),r=n[0]||null,i=n[n.length-1]||null;return[r,i]}function jh(e,t){const n=xi(e),r=(e==null?void 0:e.ownerDocument)||document,i=t??r.activeElement;if(!i)return null;const s=n.indexOf(i);return n[s+1]||null}function jr(e){return e.tabIndex<0&&(/^(audio|video|details)$/.test(e.localName)||vh(e))&&!Wh(e)?0:e.tabIndex}function el(e){const{root:t,getInitialEl:n,filter:r,enabled:i=!0}=e;if(!i)return;let s=null;if(s||(s=typeof n=="function"?n():n),s||(s=t==null?void 0:t.querySelector("[data-autofocus],[autofocus]")),!s){const a=xi(t);s=r?a.filter(r)[0]:a[0]}return s||t||void 0}function qh(e){const t=new Set;function n(r){const i=globalThis.requestAnimationFrame(r);t.add(()=>globalThis.cancelAnimationFrame(i))}return n(()=>n(e)),function(){t.forEach(i=>i())}}function At(e){let t;const n=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(n),t==null||t()}}function ys(e){const t=gh(e);return ch(t)?Rt(t).body:lt(t)&&Zh(t)?t:ys(t)}var Gh=/auto|scroll|overlay|hidden|clip/;function Zh(e){const t=ut(e),{overflow:n,overflowX:r,overflowY:i,display:s}=t.getComputedStyle(e);return Gh.test(n+i+r)&&!["inline","contents"].includes(s)}function Kh(e,t){const{left:n,top:r,width:i,height:s}=t.getBoundingClientRect(),a={x:e.x-n,y:e.y-r},o={x:Yo(a.x/i),y:Yo(a.y/s)};function u(d={}){const{dir:f="ltr",orientation:g="horizontal",inverted:c}=d,l=typeof c=="object"?c.x:c,p=typeof c=="object"?c.y:c;return g==="horizontal"?f==="rtl"||l?1-o.x:o.x:p?1-o.y:o.y}return{offset:a,percent:o,getPercentValue:u}}var xr="default",_s="",Mi=new WeakMap;function Xh(e={}){const{target:t,doc:n}=e,r=n??document,i=r.documentElement;return ha()?(xr==="default"&&(_s=i.style.webkitUserSelect,i.style.webkitUserSelect="none"),xr="disabled"):t&&(Mi.set(t,t.style.userSelect),t.style.userSelect="none"),()=>Yh({target:t,doc:r})}function Yh(e={}){const{target:t,doc:n}=e,i=(n??document).documentElement;if(ha()){if(xr!=="disabled")return;xr="restoring",setTimeout(()=>{qh(()=>{xr==="restoring"&&(i.style.webkitUserSelect==="none"&&(i.style.webkitUserSelect=_s||""),_s="",xr="default")})},300)}else if(t&&Mi.has(t)){const s=Mi.get(t);t.style.userSelect==="none"&&(t.style.userSelect=s??""),t.getAttribute("style")===""&&t.removeAttribute("style"),Mi.delete(t)}}function Jh(e={}){const{defer:t,target:n,...r}=e,i=t?At:a=>a(),s=[];return s.push(i(()=>{const a=typeof n=="function"?n():n;s.push(Xh({...r,target:a}))})),()=>{s.forEach(a=>a==null?void 0:a())}}function Qh(e,t){const{onPointerMove:n,onPointerUp:r}=t,s=[Xe(e,"pointermove",a=>{const o=Js(a),u=Math.sqrt(o.x**2+o.y**2),d=a.pointerType==="touch"?10:5;if(!(u<d)){if(a.pointerType==="mouse"&&a.button===0){r();return}n({point:o,event:a})}},!1),Xe(e,"pointerup",r,!1),Xe(e,"pointercancel",r,!1),Xe(e,"contextmenu",r,!1),Jh({doc:e})];return()=>{s.forEach(a=>a())}}function ev(e){const{pointerNode:t,keyboardNode:n=t,onPress:r,onPressStart:i,onPressEnd:s,isValidKey:a=x=>x.key==="Enter"}=e;if(!t)return wr;const o=ut(t),u=Rt(t);let d=wr,f=wr,g=wr;const c=x=>({point:Js(x),event:x});function l(x){i==null||i(c(x))}function p(x){s==null||s(c(x))}const m=Xe(t,"pointerdown",x=>{f();const k=Xe(o,"pointerup",A=>{const L=It(A);hi(t,L)?r==null||r(c(A)):s==null||s(c(A))},{passive:!r,once:!0}),T=Xe(o,"pointercancel",p,{passive:!s,once:!0});f=Ua(k,T),u.activeElement===n&&x.pointerType==="mouse"&&x.preventDefault(),l(x)},{passive:!i}),v=Xe(n,"focus",y);d=Ua(m,v);function y(){const x=A=>{if(!a(A))return;const L=B=>{if(!a(B))return;const F=new o.PointerEvent("pointerup"),C=c(F);r==null||r(C),s==null||s(C)};f(),f=Xe(n,"keyup",L);const O=new o.PointerEvent("pointerdown");l(O)},E=()=>{const A=new o.PointerEvent("pointercancel");p(A)},k=Xe(n,"keydown",x),T=Xe(n,"blur",E);g=Ua(k,T)}return()=>{d(),f(),g()}}function tv(e,t={}){const{triggerElement:n,onFocus:r,onFocusEnter:i}=t,s=(e==null?void 0:e.ownerDocument)||document,a=s.body;function o(u){if(u.key!=="Tab")return;let d=null;const[f,g]=$h(e,!0),c=jh(a,n),l=!f&&!g;u.shiftKey&&c===s.activeElement?(i==null||i(),d=g):u.shiftKey&&(s.activeElement===f||l)?d=n:!u.shiftKey&&s.activeElement===n?(i==null||i(),d=f):!u.shiftKey&&(s.activeElement===g||l)&&(d=c),d&&(u.preventDefault(),typeof r=="function"?r(d):d.focus())}return Xe(s,"keydown",o,!0)}function nv(e,t){const{defer:n,triggerElement:r,...i}=t,s=n?At:o=>o(),a=[];return a.push(s(()=>{const o=typeof e=="function"?e():e,u=typeof r=="function"?r():r;a.push(tv(o,{triggerElement:u,...i}))})),()=>{a.forEach(o=>o==null?void 0:o())}}function Wc(e,t){return Array.from((e==null?void 0:e.querySelectorAll(t))??[])}function Hc(e,t){const{onEntry:n,measure:r,box:i="border-box"}=t,s=(Array.isArray(e)?e:[e]).filter(lt),a=ut(s[0]),o=d=>{const f=s.map(g=>r(g));n({rects:f,entries:d})};o([]);const u=new a.ResizeObserver(o);return s.forEach(d=>u.observe(d,{box:i})),()=>u.disconnect()}function ws(e,t){if(!e)return wr;const n=Object.keys(t).reduce((r,i)=>(r[i]=e.style.getPropertyValue(i),r),{});return Object.assign(e.style,t),()=>{Object.assign(e.style,n),e.style.length===0&&e.removeAttribute("style")}}function rv(e,t,n){if(!e)return wr;const r=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{e.style.setProperty(t,r),e.style.length===0&&e.removeAttribute("style")}}var $c={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},iv=1e3/60;function av(e,t){const n=e();if(lt(n)&&n.isConnected)return t(n),()=>{};{const r=setInterval(()=>{const i=e();lt(i)&&i.isConnected&&(t(i),clearInterval(r))},iv);return()=>clearInterval(r)}}function sv(e,t){const n=[];return e==null||e.forEach(r=>{const i=av(r,t);n.push(i)}),()=>{n.forEach(r=>r())}}function ov(e){return e==null?[]:Array.isArray(e)?e:[e]}var lv=e=>e[0],cv=e=>e[e.length-1],tl=e=>(e==null?void 0:e.constructor.name)==="Array",uv=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!pa(e[n],t[n]))return!1;return!0},pa=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof(e==null?void 0:e.isEqual)=="function"&&typeof(t==null?void 0:t.isEqual)=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(tl(e)&&tl(t))return uv(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let i=0;i<r;i++)if(!Reflect.has(e,n[i]))return!1;for(let i=0;i<r;i++){const s=n[i];if(!pa(e[s],t[s]))return!1}return!0},ti=e=>typeof e=="string",Yn=e=>typeof e=="function",dv=e=>e==null,fv=Function.prototype.toString;fv.call(Object);var hv=(e,...t)=>(typeof e=="function"?e(...t):e)??void 0,vv=e=>e(),pv=()=>{},xs=(...e)=>(...t)=>{e.forEach(function(n){n==null||n(...t)})},{floor:gv,abs:qi,round:jc,min:mv,max:bv,pow:yv,sign:_v}=Math,ks=e=>Number.isNaN(e),vi=e=>ks(e)?0:e,wv=(e,t,n)=>e===0?n:t[e-1],xv=(e,t,n)=>e===t.length-1?n:t[e+1],kv=(e,t,n)=>vi(e)>=t&&vi(e)<=n,Ev=(e,t,n)=>jc((vi(e)-t)/n)*n+t,ki=(e,t,n)=>mv(bv(vi(e),t),n),to=(e,t,n)=>(vi(e)-t)/(n-t),qc=(e,t,n,r)=>ki(Ev(e*(n-t)+t,t,r),t,n),nl=(e,t)=>{let n=e,r=t.toString(),i=r.indexOf("."),s=i>=0?r.length-i:0;if(s>0){let a=yv(10,s);n=jc(n*a)/a}return n},no=(e,t,n,r)=>{const i=t!=null?Number(t):0,s=Number(n),a=(e-i)%r;let o=qi(a)*2>=r?e+_v(a)*(r-qi(a)):e-a;if(o=nl(o,r),!ks(i)&&o<i)o=i;else if(!ks(s)&&o>s){const u=gv((s-i)/r),d=i+u*r;o=u<=0||d<i?s:d}return nl(o,r)},Kr=(e,t,n)=>e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)];function Gc(e,t){const n=wv(e,t.values,t.min),r=xv(e,t.values,t.max);let i=t.values.slice();return function(a){let o=no(a,n,r,t.step);return i=Kr(i,e,a),i[e]=o,i}}function Cv(e,t){const n=t.values[e]+t.step;return Gc(e,t)(n)}function Sv(e,t){const n=t.values[e]-t.step;return Gc(e,t)(n)}var Iv=(e,t)=>{let n=e.findIndex(s=>t-s<0);if(n===0)return n;if(n===-1)return e.length-1;let r=e[n-1],i=e[n];return qi(r-t)<qi(i-t)?n-1:n},Zc=(e,t,n,r)=>e.map((i,s)=>({min:s===0?t:e[s-1]+r,max:s===e.length-1?n:e[s+1]-r,value:i})),Es=(e,t)=>{const[n,r]=e,[i,s]=t;return a=>n===r||i===s?i:i+(s-i)/(r-n)*(a-n)},rl=e=>e!=null?`${e}px`:void 0;function ro(e){if(!Tv(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const i=e[r];i!==void 0&&(n[r]=ro(i))}return n}var Tv=e=>e&&typeof e=="object"&&e.constructor===Object;function Av(e,t){const n={};for(const r of t){const i=e[r];i!==void 0&&(n[r]=i)}return n}function Cs(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function Ov(e,t){if(e==null)throw new Error(t())}var Rv=(...e)=>e.map(t=>{var n;return(n=t==null?void 0:t.trim)==null?void 0:n.call(t)}).filter(Boolean).join(" "),Lv=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,il=e=>{const t={};let n;for(;n=Lv.exec(e);)t[n[1]]=n[2];return t},Pv=(e,t)=>{if(ti(e)){if(ti(t))return`${e};${t}`;e=il(e)}else ti(t)&&(t=il(t));return Object.assign({},e??{},t??{})};function Dv(...e){let t={};for(let n of e){for(let r in t){if(r.startsWith("on")&&typeof t[r]=="function"&&typeof n[r]=="function"){t[r]=xs(n[r],t[r]);continue}if(r==="className"||r==="class"){t[r]=Rv(t[r],n[r]);continue}if(r==="style"){t[r]=Pv(t[r],n[r]);continue}t[r]=n[r]!==void 0?n[r]:t[r]}for(let r in n)t[r]===void 0&&(t[r]=n[r])}return t}function Kc(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}var _r=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(_r||{}),Ha="__init__";function Nv(e){const t=()=>{var o;return((o=e.getRootNode)==null?void 0:o.call(e))??document},n=()=>Rt(t()),r=()=>n().defaultView??window,i=()=>Nc(t());return{...e,getRootNode:t,getDoc:n,getWin:r,getActiveElement:i,isActiveElement:o=>o===i(),getById:o=>t().getElementById(o)}}function Fv(e){return new Proxy({},{get(t,n){return n==="style"?r=>e({style:r}).style:e}})}var Br=()=>e=>Array.from(new Set(e));const al={className:"class",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",onBlur:"onfocusout",onChange:"oninput",onFocus:"onfocusin",onDoubleClick:"ondblclick"};function Xc(e){let t="";for(let n in e){const r=e[n];r!=null&&(n.startsWith("--")||(n=n.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)),t+=`${n}:${r};`)}return t}const zv="viewBox,className,preserveAspectRatio,fillRule,clipPath,clipRule,strokeWidth,strokeLinecap,strokeLinejoin,strokeDasharray,strokeDashoffset,strokeMiterlimit".split(",");function Bv(e){return e in al?al[e]:zv.includes(e)?e:e.toLowerCase()}function Mv(e,t){return e==="style"&&typeof t=="object"?Xc(t):t}const ga=Fv(e=>{const t={};for(const n in e)t[Bv(n)]=Mv(n,e[n]);return t}),Vv=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Uv=e=>{const t={};let n;for(;n=Vv.exec(e);)t[n[1]]=n[2];return t};function Wv(...e){const t=Dv(...e);return"style"in t&&(typeof t.style=="string"&&(t.style=Uv(t.style)),t.style=Xc(t.style)),t}function $a(e,t={}){function n(r={}){const{container:i,disabled:s,getRootNode:a}=r;if(s)return;const o=(a==null?void 0:a().ownerDocument)??document;(i??o.body).appendChild(e)}return n(t),{destroy:()=>e.remove(),update:n}}function Gi(e){const t=e().defaultValue??e().value,n=e().isEqual??Object.is;let r=ge(tt(t));const i=ce(()=>e().value!==void 0);let s={current:w(r)},a={current:void 0};vd(()=>{const d=w(i)?e().value:w(r);s={current:d},a={current:d}});const o=d=>{var c,l;const f=Yn(d)?d(s.current):d,g=a.current;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:f,prev:g}),w(i)||Q(r,f,!0),n(f,g)||(l=(c=e()).onChange)==null||l.call(c,f,g)};function u(){return w(i)?e().value:w(r)}return{initial:t,ref:s,get:u,set(d){(e().sync?sc:vv)(()=>o(d))},invoke(d,f){var g,c;(c=(g=e()).onChange)==null||c.call(g,d,f)},hash(d){var f,g;return((g=(f=e()).hash)==null?void 0:g.call(f,d))??String(d)}}}Gi.cleanup=e=>{oc(()=>e())};Gi.ref=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}};function Hv(e){const t=tt({current:e});return{get(n){return t.current[n]},set(n,r){t.current[n]=r}}}const ja=e=>typeof e=="function"?e():e,$v=(e,t)=>{let n=[],r=!0;Me(()=>{if(r){n=e.map(s=>ja(s)),r=!1;return}let i=!1;for(let s=0;s<e.length;s++)if(!pa(n[s],ja(e[s]))){i=!0;break}i&&(n=e.map(s=>ja(s)),t())})};function qa(e){return Yn(e)?e():e}function ma(e,t){var L,O,B;const n=ce(()=>{const{id:F,ids:C,getRootNode:R}=qa(t);return Nv({id:F,ids:C,getRootNode:R})}),r=(...F)=>{e.debug&&console.log(...F)},i=ce(()=>{var F;return((F=e.props)==null?void 0:F.call(e,{props:ro(qa(t)),scope:w(n)}))??qa(t)}),s=jv(()=>w(i)),a=(L=e.context)==null?void 0:L.call(e,{prop:s,bindable:Gi,get scope(){return w(n)},flush:sl,getContext(){return o},getComputed(){return E},getRefs(){return p}}),o={get(F){return a==null?void 0:a[F].get()},set(F,C){a==null||a[F].set(C)},initial(F){return a==null?void 0:a[F].initial},hash(F){const C=a==null?void 0:a[F].get();return a==null?void 0:a[F].hash(C)}};let u=new Map,d={current:null},f={current:null},g=tt({current:{type:""}});const c=()=>({...g.current,current(){return g.current},previous(){return f.current}}),l=()=>({...k,hasTag(F){var R,b;const C=k.get();return!!((b=(R=e.states[C])==null?void 0:R.tags)!=null&&b.includes(F))},matches(...F){const C=k.get();return F.includes(C)}}),p=Hv(((O=e.refs)==null?void 0:O.call(e,{prop:s,context:o}))??{}),h=()=>({state:l(),context:o,event:c(),prop:s,send:A,action:m,guard:v,track:$v,refs:p,computed:E,flush:sl,scope:w(n),choose:x}),m=F=>{const C=Yn(F)?F(h()):F;if(!C)return;const R=C.map(b=>{var V,U;const D=(U=(V=e.implementations)==null?void 0:V.actions)==null?void 0:U[b];return D||Cs(`[zag-js] No implementation found for action "${JSON.stringify(b)}"`),D});for(const b of R)b==null||b(h())},v=F=>{var C,R;return Yn(F)?F(h()):(R=(C=e.implementations)==null?void 0:C.guards)==null?void 0:R[F](h())},y=F=>{const C=Yn(F)?F(h()):F;if(!C)return;const R=C.map(D=>{var U,X;const V=(X=(U=e.implementations)==null?void 0:U.effects)==null?void 0:X[D];return V||Cs(`[zag-js] No implementation found for effect "${JSON.stringify(D)}"`),V}),b=[];for(const D of R){const V=D==null?void 0:D(h());V&&b.push(V)}return()=>b.forEach(D=>D==null?void 0:D())},x=F=>ov(F).find(C=>{let R=!C.guard;return ti(C.guard)?R=!!v(C.guard):Yn(C.guard)&&(R=C.guard(h())),R}),E=F=>{Ov(e.computed,()=>"[zag-js] No computed object found on machine");const C=e.computed[F];return C({context:o,event:c(),prop:s,refs:p,scope:w(n),computed:E})},k=Gi(()=>({defaultValue:e.initialState({prop:s}),onChange(F,C){var b,D,V,U;if(C){const X=u.get(C);X==null||X(),u.delete(C)}C&&m((b=e.states[C])==null?void 0:b.exit),m((D=d.current)==null?void 0:D.actions);const R=y((V=e.states[F])==null?void 0:V.effects);if(R&&u.set(F,R),C===Ha){m(e.entry);const X=y(e.effects);X&&u.set(Ha,X)}m((U=e.states[F])==null?void 0:U.entry)}}));let T=_r.NotStarted;yd(()=>{const F=T===_r.Started;T=_r.Started,r(F?"rehydrating...":"initializing..."),k.invoke(k.initial,Ha)}),oc(()=>{r("unmounting..."),T=_r.Stopped,u.forEach(F=>F==null?void 0:F()),u=new Map,d.current=null,m(e.exit)});const A=F=>{var U,X;if(T!==_r.Started)return;f.current=g.current,g.current=F;let C=k.get();const R=((U=e.states[C].on)==null?void 0:U[F.type])??((X=e.on)==null?void 0:X[F.type]),b=x(R);if(!b)return;d.current=b;const D=b.target??C,V=D!==C;V?k.set(D):b.reenter&&!V?k.invoke(C,C):m(b.actions)};return(B=e.watch)==null||B.call(e,h()),{get state(){return l()},send:A,context:o,prop:s,get scope(){return w(n)},refs:p,computed:E,get event(){return c()},getStatus:()=>T}}function jv(e){return function(n){return e()[n]}}function sl(e){sc(()=>{queueMicrotask(()=>e())})}function ba(e){var t=Symbol(),n=function(i){return pd(t,i)},r=function(){var i;return(i=gd(t))!==null&&i!==void 0?i:e};return[n,r,t]}var Zi;Zi=ba(),Zi[0];Zi[1];Zi[2];const qv=e=>e;function Gv(e,{delay:t=0,duration:n=400,easing:r=qv}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}dt(["click"]);var Ki;Ki=ba({parent:"none",value:"",expanded:!1}),Ki[0];Ki[1];Ki[2];function Zv(e){return!(e.metaKey||!va()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}var Kv=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Xv(e,t,n){const r=n?It(n):null,i=ut(r);return e=e||r instanceof i.HTMLInputElement&&!Kv.has(r==null?void 0:r.type)||r instanceof i.HTMLTextAreaElement||r instanceof i.HTMLElement&&r.isContentEditable,!(e&&t==="keyboard"&&n instanceof i.KeyboardEvent&&!Reflect.has(Yv,n.key))}var dr=null,Ss=new Set,ni=new Map,ir=!1,Is=!1,Yv={Tab:!0,Escape:!0};function ya(e,t){for(let n of Ss)n(e,t)}function Xi(e){ir=!0,Zv(e)&&(dr="keyboard",ya("keyboard",e))}function St(e){dr="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(ir=!0,ya("pointer",e))}function Yc(e){Ih(e)&&(ir=!0,dr="virtual")}function Jc(e){const t=It(e);t===ut(t)||t===Rt(t)||(!ir&&!Is&&(dr="virtual",ya("virtual",e)),ir=!1,Is=!1)}function Qc(){ir=!1,Is=!0}function Jv(e){if(typeof window>"u"||ni.get(ut(e)))return;const t=ut(e),n=Rt(e);let r=t.HTMLElement.prototype.focus;function i(){dr="virtual",ya("virtual",null),ir=!0,r.apply(this,arguments)}Object.defineProperty(t.HTMLElement.prototype,"focus",{configurable:!0,value:i}),n.addEventListener("keydown",Xi,!0),n.addEventListener("keyup",Xi,!0),n.addEventListener("click",Yc,!0),t.addEventListener("focus",Jc,!0),t.addEventListener("blur",Qc,!1),typeof t.PointerEvent<"u"?(n.addEventListener("pointerdown",St,!0),n.addEventListener("pointermove",St,!0),n.addEventListener("pointerup",St,!0)):(n.addEventListener("mousedown",St,!0),n.addEventListener("mousemove",St,!0),n.addEventListener("mouseup",St,!0)),t.addEventListener("beforeunload",()=>{Qv(e)},{once:!0}),ni.set(t,{focus:r})}var Qv=(e,t)=>{const n=ut(e),r=Rt(e);ni.has(n)&&(n.HTMLElement.prototype.focus=ni.get(n).focus,r.removeEventListener("keydown",Xi,!0),r.removeEventListener("keyup",Xi,!0),r.removeEventListener("click",Yc,!0),n.removeEventListener("focus",Jc,!0),n.removeEventListener("blur",Qc,!1),typeof n.PointerEvent<"u"?(r.removeEventListener("pointerdown",St,!0),r.removeEventListener("pointermove",St,!0),r.removeEventListener("pointerup",St,!0)):(r.removeEventListener("mousedown",St,!0),r.removeEventListener("mousemove",St,!0),r.removeEventListener("mouseup",St,!0)),ni.delete(n))};function Yi(){return dr==="keyboard"}function eu(e={}){const{isTextInput:t,autoFocus:n,onChange:r,root:i}=e;Jv(i),r==null||r({isFocusVisible:n||Yi(),modality:dr});const s=(a,o)=>{Xv(!!t,a,o)&&(r==null||r({isFocusVisible:Yi(),modality:a}))};return Ss.add(s),()=>{Ss.delete(s)}}var ep=Dn("radio-group").parts("root","label","item","itemText","itemControl","indicator"),gr=ep.build(),Ji=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`radio-group:${e.id}`},ol=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`radio-group:${e.id}:label`},tu=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.item)==null?void 0:r.call(n,t))??`radio-group:${e.id}:radio:${t}`},Ts=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.itemHiddenInput)==null?void 0:r.call(n,t))??`radio-group:${e.id}:radio:input:${t}`},tp=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.itemControl)==null?void 0:r.call(n,t))??`radio-group:${e.id}:radio:control:${t}`},np=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.itemLabel)==null?void 0:r.call(n,t))??`radio-group:${e.id}:radio:label:${t}`},nu=e=>{var t;return((t=e.ids)==null?void 0:t.indicator)??`radio-group:${e.id}:indicator`},_a=e=>e.getById(Ji(e)),rp=(e,t)=>e.getById(Ts(e,t)),ip=e=>e.getById(nu(e)),ap=e=>{var t;return(t=_a(e))==null?void 0:t.querySelector("input:not(:disabled)")},sp=e=>{var t;return(t=_a(e))==null?void 0:t.querySelector("input:not(:disabled):checked")},ll=e=>{const n=`input[type=radio][data-ownedby='${CSS.escape(Ji(e))}']:not([disabled])`;return Wc(_a(e),n)},op=(e,t)=>{if(t)return e.getById(tu(e,t))},lp=e=>({left:(e==null?void 0:e.offsetLeft)??0,top:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0}),cp=e=>({width:`${e.width}px`,height:`${e.height}px`,left:`${e.left}px`,top:`${e.top}px`});function up(e,t){const{context:n,send:r,computed:i,prop:s,scope:a}=e,o=i("isDisabled"),u=s("readOnly");function d(c){const l=n.get("focusedValue")===c.value,p=l&&Yi();return{value:c.value,invalid:!!c.invalid,disabled:!!c.disabled||o,checked:n.get("value")===c.value,focused:l,focusVisible:p,hovered:n.get("hoveredValue")===c.value,active:n.get("activeValue")===c.value}}function f(c){const l=d(c);return{"data-focus":Ie(l.focused),"data-focus-visible":Ie(l.focusVisible),"data-disabled":Ie(l.disabled),"data-readonly":Ie(u),"data-state":l.checked?"checked":"unchecked","data-hover":Ie(l.hovered),"data-invalid":Ie(l.invalid),"data-orientation":s("orientation"),"data-ssr":Ie(n.get("ssr"))}}const g=()=>{const c=sp(a)??ap(a);c==null||c.focus()};return{focus:g,value:n.get("value"),setValue(c){r({type:"SET_VALUE",value:c,isTrusted:!1})},clearValue(){r({type:"SET_VALUE",value:null,isTrusted:!1})},getRootProps(){return t.element({...gr.root.attrs,role:"radiogroup",id:Ji(a),"aria-labelledby":ol(a),"data-orientation":s("orientation"),"data-disabled":Ie(o),"aria-orientation":s("orientation"),dir:s("dir"),style:{position:"relative"}})},getLabelProps(){return t.element({...gr.label.attrs,dir:s("dir"),"data-orientation":s("orientation"),"data-disabled":Ie(o),id:ol(a),onClick:g})},getItemState:d,getItemProps(c){const l=d(c);return t.label({...gr.item.attrs,dir:s("dir"),id:tu(a,c.value),htmlFor:Ts(a,c.value),...f(c),onPointerMove(){l.disabled||l.hovered||r({type:"SET_HOVERED",value:c.value,hovered:!0})},onPointerLeave(){l.disabled||r({type:"SET_HOVERED",value:null})},onPointerDown(p){l.disabled||ji(p)&&(l.focused&&p.pointerType==="mouse"&&p.preventDefault(),r({type:"SET_ACTIVE",value:c.value,active:!0}))},onPointerUp(){l.disabled||r({type:"SET_ACTIVE",value:null})},onClick(){var p;!l.disabled&&Ys()&&((p=rp(a,c.value))==null||p.focus())}})},getItemTextProps(c){return t.element({...gr.itemText.attrs,dir:s("dir"),id:np(a,c.value),...f(c)})},getItemControlProps(c){const l=d(c);return t.element({...gr.itemControl.attrs,dir:s("dir"),id:tp(a,c.value),"data-active":Ie(l.active),"aria-hidden":!0,...f(c)})},getItemHiddenInputProps(c){const l=d(c);return t.input({"data-ownedby":Ji(a),id:Ts(a,c.value),type:"radio",name:s("name")||s("id"),form:s("form"),value:c.value,onClick(p){if(u){p.preventDefault();return}p.currentTarget.checked&&r({type:"SET_VALUE",value:c.value,isTrusted:!0})},onBlur(){r({type:"SET_FOCUSED",value:null,focused:!1})},onFocus(){r({type:"SET_FOCUSED",value:c.value,focused:!0})},onKeyDown(p){p.defaultPrevented||p.key===" "&&r({type:"SET_ACTIVE",value:c.value,active:!0})},onKeyUp(p){p.defaultPrevented||p.key===" "&&r({type:"SET_ACTIVE",value:null})},disabled:l.disabled,defaultChecked:l.checked,style:$c})},getIndicatorProps(){const c=n.get("indicatorRect");return t.element({id:nu(a),...gr.indicator.attrs,dir:s("dir"),hidden:n.get("value")==null,"data-disabled":Ie(o),"data-orientation":s("orientation"),style:{"--transition-property":"left, top, width, height","--left":c==null?void 0:c.left,"--top":c==null?void 0:c.top,"--width":c==null?void 0:c.width,"--height":c==null?void 0:c.height,position:"absolute",willChange:"var(--transition-property)",transitionProperty:"var(--transition-property)",transitionDuration:n.get("canIndicatorTransition")?"var(--transition-duration, 150ms)":"0ms",transitionTimingFunction:"var(--transition-timing-function)",[s("orientation")==="horizontal"?"left":"top"]:s("orientation")==="horizontal"?"var(--left)":"var(--top)"}})}}}var{not:dp}=Kc(),fp={props({props:e}){return{orientation:"vertical",...e}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(n){var r;(r=e("onValueChange"))==null||r({value:n})}})),activeValue:t(()=>({defaultValue:null})),focusedValue:t(()=>({defaultValue:null})),hoveredValue:t(()=>({defaultValue:null})),indicatorRect:t(()=>({defaultValue:{}})),canIndicatorTransition:t(()=>({defaultValue:!1})),fieldsetDisabled:t(()=>({defaultValue:!1})),ssr:t(()=>({defaultValue:!0}))}},refs(){return{indicatorCleanup:null}},computed:{isDisabled:({prop:e,context:t})=>!!e("disabled")||t.get("fieldsetDisabled")},entry:["syncIndicatorRect","syncSsr"],exit:["cleanupObserver"],effects:["trackFormControlState","trackFocusVisible"],watch({track:e,action:t,context:n}){e([()=>n.get("value")],()=>{t(["setIndicatorTransition","syncIndicatorRect","syncInputElements"])})},on:{SET_VALUE:[{guard:dp("isTrusted"),actions:["setValue","dispatchChangeEvent"]},{actions:["setValue"]}],SET_HOVERED:{actions:["setHovered"]},SET_ACTIVE:{actions:["setActive"]},SET_FOCUSED:{actions:["setFocused"]}},states:{idle:{}},implementations:{guards:{isTrusted:({event:e})=>!!e.isTrusted},effects:{trackFormControlState({context:e,scope:t}){return Qs(_a(t),{onFieldsetDisabledChange(n){e.set("fieldsetDisabled",n)},onFormReset(){e.set("value",e.initial("value"))}})},trackFocusVisible({scope:e}){var t;return eu({root:(t=e.getRootNode)==null?void 0:t.call(e)})}},actions:{setValue({context:e,event:t}){e.set("value",t.value)},setHovered({context:e,event:t}){e.set("hoveredValue",t.value)},setActive({context:e,event:t}){e.set("activeValue",t.value)},setFocused({context:e,event:t}){e.set("focusedValue",t.value)},syncInputElements({context:e,scope:t}){ll(t).forEach(r=>{r.checked=r.value===e.get("value")})},setIndicatorTransition({context:e}){e.set("canIndicatorTransition",ti(e.get("value")))},cleanupObserver({refs:e}){var t;(t=e.get("indicatorCleanup"))==null||t()},syncSsr({context:e}){e.set("ssr",!1)},syncIndicatorRect({context:e,scope:t,refs:n}){var a;if((a=n.get("indicatorCleanup"))==null||a(),!ip(t))return;const r=e.get("value"),i=op(t,r);if(r==null||!i){e.set("canIndicatorTransition",!1),e.set("indicatorRect",{});return}const s=Hc([i],{measure(o){return lp(o)},onEntry({rects:o}){e.set("indicatorRect",cp(o[0]))}});n.set("indicatorCleanup",s)},dispatchChangeEvent({context:e,scope:t}){ll(t).forEach(r=>{const i=r.value===e.get("value");i!==r.checked&&Mc(r,{checked:i})})}}}};Br()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value","defaultValue"]);Br()(["value","disabled","invalid"]);var Qi,hp=(Qi=ba({api:{},indicatorText:""}),Qi[0]),vp=Qi[1];Qi[2];var pp=ue("<div><div></div> <!></div>");function gp(e,t){const n=oa();be(t,!0);const r=$(t,"base",3,"inline-flex items-stretch overflow-hidden"),i=$(t,"background",3,"preset-outlined-surface-200-800"),s=$(t,"border",3,""),a=$(t,"gap",3,"gap-2"),o=$(t,"padding",3,"p-2"),u=$(t,"rounded",3,"rounded-container"),d=$(t,"width",3,""),f=$(t,"classes",3,""),g=$(t,"orientVertical",3,"flex-col items-stretch"),c=$(t,"orientHorizontal",3,"flex-row"),l=$(t,"stateDisabled",3,"disabled"),p=$(t,"stateReadOnly",3,"pointer-events-none"),h=$(t,"indicatorBase",3,"top-[var(--top)] left-[var(--left)] w-[var(--width)] h-[var(--height)]"),m=$(t,"indicatorBg",3,"preset-filled"),v=$(t,"indicatorText",3,"text-surface-contrast-950 dark:text-surface-contrast-50"),y=$(t,"indicatorRounded",3,"rounded-base"),x=$(t,"indicatorClasses",3,""),E=$(t,"labelledby",3,""),k=Fe(t,["$$slots","$$events","$$legacy","base","background","border","gap","padding","rounded","width","classes","orientVertical","orientHorizontal","stateDisabled","stateReadOnly","indicatorBase","indicatorBg","indicatorText","indicatorRounded","indicatorClasses","labelledby","children"]),T=ma(fp,()=>({id:n,orientation:t.orientation??"horizontal",...k})),A=ce(()=>up(T,ga));hp({get api(){return w(A)},get indicatorText(){return v()}});const L=ce(()=>T.prop("orientation")==="vertical"?g():c()),O=ce(()=>T.prop("disabled")?l():""),B=ce(()=>T.prop("readOnly")?p():"");var F=pp();Ge(F,b=>({...b,class:`${r()??""} ${w(L)??""} ${i()??""} ${s()??""} ${o()??""} ${a()??""} ${u()??""} ${d()??""} ${w(O)??""} ${w(B)??""} ${f()??""}`,"aria-labelledby":E(),"data-testid":"segment"}),[()=>w(A).getRootProps()]);var C=j(F);Ge(C,b=>({...b,class:`${h()??""} ${m()??""} ${y()??""} ${x()??""}`,"data-testid":"segment-indicator"}),[()=>w(A).getIndicatorProps()]);var R=Z(C,2);Pe(R,()=>t.children??Ne),H(F),ee(e,F),ye()}var mp=ue("<label><span><!></span> <input/></label>");function bp(e,t){be(t,!0);let n=$(t,"base",3,"btn cursor-pointer z-[1]"),r=$(t,"classes",3,""),i=$(t,"stateDisabled",3,"disabled"),s=$(t,"stateFocused",3,"focused"),a=$(t,"labelBase",3,"pointer-events-none transition-colors duration-100"),o=$(t,"labelClasses",3,""),u=Fe(t,["$$slots","$$events","$$legacy","base","classes","stateDisabled","stateFocused","labelBase","labelClasses","children"]);const d=vp(),f=ce(()=>d.api.getItemState(u)),g=ce(()=>w(f).disabled?i():""),c=ce(()=>w(f).checked?d.indicatorText:""),l=ce(()=>w(f).focused?s():"");var p=mp();Ge(p,y=>({...y,class:`${n()??""} ${w(g)??""} ${w(l)??""} ${r()??""}`,"data-testid":"segment-item"}),[()=>d.api.getItemProps(u)]);var h=j(p);Ge(h,y=>({...y,class:`${a()??""} ${w(c)??""} ${o()??""}`,"data-testid":"segment-item-label"}),[()=>d.api.getItemTextProps(u)]);var m=j(h);Pe(m,()=>t.children??Ne),H(h);var v=Z(h,2);We(v),Ge(v,y=>({...y,"data-testid":"segment-item-input"}),[()=>d.api.getItemHiddenInputProps(u)]),H(p),ee(e,p),ye()}const cl=Object.assign(gp,{Item:bp});var yp=Dn("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator"),Zt=yp.build(),ru=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`slider:${e.id}`},iu=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.thumb)==null?void 0:r.call(n,t))??`slider:${e.id}:thumb:${t}`},As=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.hiddenInput)==null?void 0:r.call(n,t))??`slider:${e.id}:input:${t}`},au=e=>{var t;return((t=e.ids)==null?void 0:t.control)??`slider:${e.id}:control`},_p=e=>{var t;return((t=e.ids)==null?void 0:t.track)??`slider:${e.id}:track`},wp=e=>{var t;return((t=e.ids)==null?void 0:t.range)??`slider:${e.id}:range`},ul=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`slider:${e.id}:label`},xp=e=>{var t;return((t=e.ids)==null?void 0:t.valueText)??`slider:${e.id}:value-text`},kp=(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.marker)==null?void 0:r.call(n,t))??`slider:${e.id}:marker:${t}`},Ep=e=>e.getById(ru(e)),Cp=(e,t)=>e.getById(iu(e,t)),su=e=>Wc(lu(e),"[role=slider]"),Sp=e=>su(e)[0],ou=(e,t)=>e.getById(As(e,t)),lu=e=>e.getById(au(e)),dl=(e,t)=>{const{prop:n,scope:r}=e,i=lu(r);if(!i)return;const a=Kh(t,i).getPercentValue({orientation:n("orientation"),dir:n("dir"),inverted:{y:!0}});return qc(a,n("min"),n("max"),n("step"))},Ip=(e,t)=>{t.forEach((n,r)=>{const i=ou(e,r);i&&zh(i,{value:n})})},Tp=e=>({left:(e==null?void 0:e.offsetLeft)??0,top:(e==null?void 0:e.offsetTop)??0,width:(e==null?void 0:e.offsetWidth)??0,height:(e==null?void 0:e.offsetHeight)??0});function Ap(e){const t=e[0],n=e[e.length-1];return[t,n]}function Op(e){const{prop:t,computed:n}=e,r=n("valuePercent"),[i,s]=Ap(r);if(r.length===1){if(t("origin")==="center"){const a=r[0]<50,o=a?`${r[0]}%`:"50%",u=a?"50%":`${100-r[0]}%`;return{start:o,end:u}}return t("origin")==="end"?{start:`${s}%`,end:"0%"}:{start:"0%",end:`${100-s}%`}}return{start:`${i}%`,end:`${100-s}%`}}function Rp(e){const{computed:t}=e,n=t("isVertical"),r=t("isRtl");return n?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[r?"right":"left"]:"var(--slider-range-start)",[r?"left":"right"]:"var(--slider-range-end)"}}function Lp(e,t){const{context:n,prop:r}=e,{height:i=0}=n.get("thumbSize")??{},s=Es([r("min"),r("max")],[-i/2,i/2]);return parseFloat(s(t).toFixed(2))}function Pp(e,t){const{computed:n,context:r,prop:i}=e,{width:s=0}=r.get("thumbSize")??{};if(n("isRtl")){const u=Es([i("max"),i("min")],[-s/2,s/2]);return-1*parseFloat(u(t).toFixed(2))}const o=Es([i("min"),i("max")],[-s/2,s/2]);return parseFloat(o(t).toFixed(2))}function Dp(e,t,n){const{computed:r,prop:i}=e;if(i("thumbAlignment")==="center")return`${t}%`;const s=r("isVertical")?Lp(e,n):Pp(e,n);return`calc(${t}% - ${s}px)`}function cu(e,t){const{prop:n}=e,r=to(t,n("min"),n("max"))*100;return Dp(e,r,t)}function uu(e){const{computed:t,prop:n}=e;let r="visible";return n("thumbAlignment")==="contain"&&!t("hasMeasuredThumbSize")&&(r="hidden"),r}function fl(e,t){const{computed:n}=e,r=n("isVertical")?"bottom":"insetInlineStart";return{visibility:uu(e),position:"absolute",transform:"var(--slider-thumb-transform)",[r]:`var(--slider-thumb-offset-${t})`}}function Np(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}}function Fp(e){const{context:t,computed:n}=e,r=n("isVertical"),i=n("isRtl"),s=Op(e),a=t.get("thumbSize");return{...t.get("value").reduce((u,d,f)=>{const g=cu(e,d);return{...u,[`--slider-thumb-offset-${f}`]:g}},{}),"--slider-thumb-width":rl(a==null?void 0:a.width),"--slider-thumb-height":rl(a==null?void 0:a.height),"--slider-thumb-transform":r?"translateY(50%)":i?"translateX(50%)":"translateX(-50%)","--slider-range-start":s.start,"--slider-range-end":s.end}}function zp(e,t){const{computed:n}=e,r=n("isHorizontal"),i=n("isRtl");return{visibility:uu(e),position:"absolute",pointerEvents:"none",[r?"insetInlineStart":"bottom"]:cu(e,t),translate:"var(--tx) var(--ty)","--tx":r?i?"50%":"-50%":"0%","--ty":r?"0%":"50%"}}function Bp(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}function Mp(e,t){return t.map((n,r)=>Os(e,n,r))}function zn(e,t){const{context:n,prop:r}=e,i=r("step")*r("minStepsBetweenThumbs");return Zc(n.get("value"),r("min"),r("max"),i)[t]}function Os(e,t,n){const{prop:r}=e,i=zn(e,n),s=no(t,r("min"),r("max"),r("step"));return ki(s,i.min,i.max)}function Vp(e,t,n){const{context:r,prop:i}=e,s=t??r.get("focusedIndex"),a=zn(e,s),o=Sv(s,{...a,step:n??i("step"),values:r.get("value")});return o[s]=ki(o[s],a.min,a.max),o}function Up(e,t,n){const{context:r,prop:i}=e,s=t??r.get("focusedIndex"),a=zn(e,s),o=Cv(s,{...a,step:n??i("step"),values:r.get("value")});return o[s]=ki(o[s],a.min,a.max),o}function Wp(e,t){const{context:n}=e;return Iv(n.get("value"),t)}function Hp(e,t){const{state:n,send:r,context:i,prop:s,computed:a,scope:o}=e,u=s("aria-label"),d=s("aria-labelledby"),f=i.get("value"),g=i.get("focusedIndex"),c=n.matches("focus"),l=n.matches("dragging"),p=a("isDisabled"),h=s("invalid"),m=a("isInteractive"),v=s("orientation")==="horizontal",y=s("orientation")==="vertical";function x(k){return to(k,s("min"),s("max"))}function E(k){return qc(k,s("min"),s("max"),s("step"))}return{value:f,dragging:l,focused:c,setValue(k){r({type:"SET_VALUE",value:k})},getThumbValue(k){return f[k]},setThumbValue(k,T){r({type:"SET_VALUE",index:k,value:T})},getValuePercent:x,getPercentValue:E,getThumbPercent(k){return x(f[k])},setThumbPercent(k,T){const A=E(T);r({type:"SET_VALUE",index:k,value:A})},getThumbMin(k){return zn(e,k).min},getThumbMax(k){return zn(e,k).max},increment(k){r({type:"INCREMENT",index:k})},decrement(k){r({type:"DECREMENT",index:k})},focus(){m&&r({type:"FOCUS",index:0})},getLabelProps(){return t.label({...Zt.label.attrs,dir:s("dir"),"data-disabled":Ie(p),"data-orientation":s("orientation"),"data-invalid":Ie(h),"data-dragging":Ie(l),"data-focus":Ie(c),id:ul(o),htmlFor:As(o,0),onClick(k){var T;m&&(k.preventDefault(),(T=Sp(o))==null||T.focus())},style:{userSelect:"none",WebkitUserSelect:"none"}})},getRootProps(){return t.element({...Zt.root.attrs,"data-disabled":Ie(p),"data-orientation":s("orientation"),"data-dragging":Ie(l),"data-invalid":Ie(h),"data-focus":Ie(c),id:ru(o),dir:s("dir"),style:Fp(e)})},getValueTextProps(){return t.element({...Zt.valueText.attrs,dir:s("dir"),"data-disabled":Ie(p),"data-orientation":s("orientation"),"data-invalid":Ie(h),"data-focus":Ie(c),id:xp(o)})},getTrackProps(){return t.element({...Zt.track.attrs,dir:s("dir"),id:_p(o),"data-disabled":Ie(p),"data-invalid":Ie(h),"data-dragging":Ie(l),"data-orientation":s("orientation"),"data-focus":Ie(c),style:{position:"relative"}})},getThumbProps(k){var R;const{index:T=0,name:A}=k,L=f[T],O=zn(e,T),B=(R=s("getAriaValueText"))==null?void 0:R({value:L,index:T}),F=Array.isArray(u)?u[T]:u,C=Array.isArray(d)?d[T]:d;return t.element({...Zt.thumb.attrs,dir:s("dir"),"data-index":T,"data-name":A,id:iu(o,T),"data-disabled":Ie(p),"data-orientation":s("orientation"),"data-focus":Ie(c&&g===T),"data-dragging":Ie(l&&g===T),draggable:!1,"aria-disabled":ih(p),"aria-label":F,"aria-labelledby":C??ul(o),"aria-orientation":s("orientation"),"aria-valuemax":O.max,"aria-valuemin":O.min,"aria-valuenow":f[T],"aria-valuetext":B,role:"slider",tabIndex:p?void 0:0,style:fl(e,T),onPointerDown(b){m&&ji(b)&&(r({type:"THUMB_POINTER_DOWN",index:T}),b.stopPropagation())},onBlur(){m&&r({type:"BLUR"})},onFocus(){m&&r({type:"FOCUS",index:T})},onKeyDown(b){if(b.defaultPrevented||!m)return;const D=Nh(b)*s("step"),V={ArrowUp(){v||r({type:"ARROW_INC",step:D,src:"ArrowUp"})},ArrowDown(){v||r({type:"ARROW_DEC",step:D,src:"ArrowDown"})},ArrowLeft(){y||r({type:"ARROW_DEC",step:D,src:"ArrowLeft"})},ArrowRight(){y||r({type:"ARROW_INC",step:D,src:"ArrowRight"})},PageUp(){r({type:"ARROW_INC",step:D,src:"PageUp"})},PageDown(){r({type:"ARROW_DEC",step:D,src:"PageDown"})},Home(){r({type:"HOME"})},End(){r({type:"END"})}},U=Lh(b,{dir:s("dir"),orientation:s("orientation")}),X=V[U];X&&(X(b),b.preventDefault(),b.stopPropagation())}})},getHiddenInputProps(k){const{index:T=0,name:A}=k;return t.input({name:A??(s("name")?s("name")+(f.length>1?"[]":""):void 0),form:s("form"),type:"text",hidden:!0,defaultValue:f[T],id:As(o,T)})},getRangeProps(){return t.element({id:wp(o),...Zt.range.attrs,dir:s("dir"),"data-dragging":Ie(l),"data-focus":Ie(c),"data-invalid":Ie(h),"data-disabled":Ie(p),"data-orientation":s("orientation"),style:Rp(e)})},getControlProps(){return t.element({...Zt.control.attrs,dir:s("dir"),id:au(o),"data-dragging":Ie(l),"data-disabled":Ie(p),"data-orientation":s("orientation"),"data-invalid":Ie(h),"data-focus":Ie(c),style:Np(),onPointerDown(k){if(!m||!ji(k)||Ah(k))return;const T=Js(k);r({type:"POINTER_DOWN",point:T}),k.preventDefault(),k.stopPropagation()}})},getMarkerGroupProps(){return t.element({...Zt.markerGroup.attrs,role:"presentation",dir:s("dir"),"aria-hidden":!0,"data-orientation":s("orientation"),style:Bp()})},getMarkerProps(k){const T=zp(e,k.value);let A;return k.value<lv(f)?A="under-value":k.value>cv(f)?A="over-value":A="at-value",t.element({...Zt.marker.attrs,id:kp(o,k.value),role:"presentation",dir:s("dir"),"data-orientation":s("orientation"),"data-value":k.value,"data-disabled":Ie(p),"data-state":A,style:T})},getDraggingIndicatorProps(k){const{index:T=0}=k,A=T===g&&l;return t.element({...Zt.draggingIndicator.attrs,role:"presentation",dir:s("dir"),hidden:!A,"data-orientation":s("orientation"),"data-state":A?"open":"closed",style:fl(e,T)})}}}var $p=(e,t)=>(e==null?void 0:e.width)===(t==null?void 0:t.width)&&(e==null?void 0:e.height)===(t==null?void 0:t.height),hl=(e,t,n,r,i)=>Zc(e,t,n,i*r).map(a=>{const o=no(a.value,a.min,a.max,r),u=ki(o,a.min,a.max);if(!kv(u,t,n))throw new Error("[zag-js/slider] The configured `min`, `max`, `step` or `minStepsBetweenThumbs` values are invalid");return u}),jp={props({props:e}){const t=e.min??0,n=e.max??100,r=e.step??1,i=e.defaultValue??[t],s=e.minStepsBetweenThumbs??0;return{dir:"ltr",thumbAlignment:"contain",origin:"start",orientation:"horizontal",minStepsBetweenThumbs:s,...e,defaultValue:hl(i,t,n,r,s),value:e.value?hl(e.value,t,n,r,s):void 0,max:n,step:r,min:t}},initialState(){return"idle"},context({prop:e,bindable:t,getContext:n}){return{thumbSize:t(()=>({defaultValue:e("thumbSize")||null})),value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),isEqual:pa,hash(r){return r.join(",")},onChange(r){var i;(i=e("onValueChange"))==null||i({value:r})}})),focusedIndex:t(()=>({defaultValue:-1,onChange(r){var s;const i=n();(s=e("onFocusChange"))==null||s({focusedIndex:r,value:i.get("value")})}})),fieldsetDisabled:t(()=>({defaultValue:!1}))}},computed:{isHorizontal:({prop:e})=>e("orientation")==="horizontal",isVertical:({prop:e})=>e("orientation")==="vertical",isRtl:({prop:e})=>e("orientation")==="horizontal"&&e("dir")==="rtl",isDisabled:({context:e,prop:t})=>!!t("disabled")||e.get("fieldsetDisabled"),isInteractive:({prop:e,computed:t})=>!(e("readOnly")||t("isDisabled")),hasMeasuredThumbSize:({context:e})=>e.get("thumbSize")!=null,valuePercent({context:e,prop:t}){return e.get("value").map(n=>100*to(n,t("min"),t("max")))}},watch({track:e,action:t,context:n}){e([()=>n.hash("value")],()=>{t(["syncInputElements","dispatchChangeEvent"])})},effects:["trackFormControlState","trackThumbSize"],on:{SET_VALUE:[{guard:"hasIndex",actions:["setValueAtIndex"]},{actions:["setValue"]}],INCREMENT:{actions:["incrementThumbAtIndex"]},DECREMENT:{actions:["decrementThumbAtIndex"]}},states:{idle:{on:{POINTER_DOWN:{target:"dragging",actions:["setClosestThumbIndex","setPointerValue","focusActiveThumb"]},FOCUS:{target:"focus",actions:["setFocusedIndex"]},THUMB_POINTER_DOWN:{target:"dragging",actions:["setFocusedIndex","focusActiveThumb"]}}},focus:{entry:["focusActiveThumb"],on:{POINTER_DOWN:{target:"dragging",actions:["setClosestThumbIndex","setPointerValue","focusActiveThumb"]},THUMB_POINTER_DOWN:{target:"dragging",actions:["setFocusedIndex","focusActiveThumb"]},ARROW_DEC:{actions:["decrementThumbAtIndex","invokeOnChangeEnd"]},ARROW_INC:{actions:["incrementThumbAtIndex","invokeOnChangeEnd"]},HOME:{actions:["setFocusedThumbToMin","invokeOnChangeEnd"]},END:{actions:["setFocusedThumbToMax","invokeOnChangeEnd"]},BLUR:{target:"idle",actions:["clearFocusedIndex"]}}},dragging:{entry:["focusActiveThumb"],effects:["trackPointerMove"],on:{POINTER_UP:{target:"focus",actions:["invokeOnChangeEnd"]},POINTER_MOVE:{actions:["setPointerValue"]}}}},implementations:{guards:{hasIndex:({event:e})=>e.index!=null},effects:{trackFormControlState({context:e,scope:t}){return Qs(Ep(t),{onFieldsetDisabledChange(n){e.set("fieldsetDisabled",n)},onFormReset(){e.set("value",e.initial("value"))}})},trackPointerMove({scope:e,send:t}){return Qh(e.getDoc(),{onPointerMove(n){t({type:"POINTER_MOVE",point:n.point})},onPointerUp(){t({type:"POINTER_UP"})}})},trackThumbSize({context:e,scope:t,prop:n}){if(!(n("thumbAlignment")!=="contain"||n("thumbSize")))return Hc(su(t),{box:"border-box",measure(r){return Tp(r)},onEntry({rects:r}){if(r.length===0)return;const i=Av(r[0],["width","height"]);$p(e.get("thumbSize"),i)||e.set("thumbSize",i)}})}},actions:{dispatchChangeEvent({context:e,scope:t}){Ip(t,e.get("value"))},syncInputElements({context:e,scope:t}){e.get("value").forEach((n,r)=>{const i=ou(t,r);zc(i,n.toString())})},invokeOnChangeEnd({prop:e,context:t}){queueMicrotask(()=>{var n;(n=e("onValueChangeEnd"))==null||n({value:t.get("value")})})},setClosestThumbIndex(e){const{context:t,event:n}=e,r=dl(e,n.point);if(r==null)return;const i=Wp(e,r);t.set("focusedIndex",i)},setFocusedIndex({context:e,event:t}){e.set("focusedIndex",t.index)},clearFocusedIndex({context:e}){e.set("focusedIndex",-1)},setPointerValue(e){queueMicrotask(()=>{const{context:t,event:n}=e,r=dl(e,n.point);if(r==null)return;const i=t.get("focusedIndex"),s=Os(e,r,i);t.set("value",a=>Kr(a,i,s))})},focusActiveThumb({scope:e,context:t}){At(()=>{const n=Cp(e,t.get("focusedIndex"));n==null||n.focus({preventScroll:!0})})},decrementThumbAtIndex(e){const{context:t,event:n}=e,r=Vp(e,n.index,n.step);t.set("value",r)},incrementThumbAtIndex(e){const{context:t,event:n}=e,r=Up(e,n.index,n.step);t.set("value",r)},setFocusedThumbToMin(e){const{context:t}=e,n=t.get("focusedIndex"),{min:r}=zn(e,n);t.set("value",i=>Kr(i,n,r))},setFocusedThumbToMax(e){const{context:t}=e,n=t.get("focusedIndex"),{max:r}=zn(e,n);t.set("value",i=>Kr(i,n,r))},setValueAtIndex(e){const{context:t,event:n}=e,r=Os(e,n.value,n.index);t.set("value",i=>Kr(i,n.index,r))},setValue(e){const{context:t,event:n}=e,r=Mp(e,n.value);t.set("value",r)}}}};Br()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value","defaultValue"]);Br()(["index","name"]);var qp=ue('<div><div data-testid="slider-thumb"></div> <input/></div>'),Gp=ue("<span><!></span>"),Zp=ue("<div></div>"),Kp=ue('<div><div><div><div></div></div> <div style="display: flex; align-items: center; transform: translateY(-100%);" data-testid="slider-thumb-wrapper"></div></div> <!></div>');function io(e,t){const n=oa();be(t,!0);const r=$(t,"markers",19,()=>[]),i=$(t,"height",3,"h-1.5"),s=$(t,"base",3,"w-full bg-green"),a=$(t,"spaceY",3,""),o=$(t,"classes",3,""),u=$(t,"controlBase",3,""),d=$(t,"controlClasses",3,""),f=$(t,"trackBase",3,"overflow-hidden"),g=$(t,"trackBg",3,"bg-surface-200-800"),c=$(t,"trackRounded",3,"rounded-full"),l=$(t,"trackClasses",3,""),p=$(t,"meterBase",3,""),h=$(t,"meterBg",3,"bg-surface-950-50"),m=$(t,"meterRounded",3,"rounded-container"),v=$(t,"meterClasses",3,""),y=$(t,"thumbBase",3,"ring-inset transition-scale duration-100 ease-in-out"),x=$(t,"thumbSize",3,"size-8 md:size-5"),E=$(t,"thumbBg",3,"bg-surface-50-950"),k=$(t,"thumbRingSize",3,"ring-2"),T=$(t,"thumbRingColor",3,"ring-surface-950-50"),A=$(t,"thumbRounded",3,"rounded-full"),L=$(t,"thumbCursor",3,"hover:cursor-pointer"),O=$(t,"thumbClasses",3,""),B=$(t,"markersBase",3,""),F=$(t,"markersClasses",3,""),C=$(t,"markBase",3,""),R=$(t,"markText",3,"text-[10px]"),b=$(t,"markOpacity",3,"opacity-50"),D=$(t,"markClasses",3,""),V=$(t,"stateDisabled",3,"disabled"),U=$(t,"stateReadOnly",3,"cursor-not-allowed"),X=Fe(t,["$$slots","$$events","$$legacy","markers","height","base","spaceY","classes","controlBase","controlClasses","trackBase","trackBg","trackRounded","trackClasses","meterBase","meterBg","meterRounded","meterClasses","thumbBase","thumbSize","thumbBg","thumbRingSize","thumbRingColor","thumbRounded","thumbCursor","thumbClasses","markersBase","markersClasses","markBase","markText","markOpacity","markClasses","stateDisabled","stateReadOnly","mark"]),G=ma(jp,()=>({id:n,...X})),te=ce(()=>Hp(G,ga)),N=ce(()=>G.prop("disabled")?V():""),M=ce(()=>G.prop("readOnly")?U():L());var oe=Kp();Ge(oe,me=>({...me,class:`${s()??""} ${i()??""} ${a()??""} ${w(N)??""} ${o()??""}`,"data-testid":"slider"}),[()=>w(te).getRootProps()]);var ae=j(oe);Ge(ae,me=>({...me,class:`${u()??""} ${d()??""}`,"data-testid":"slider-control"}),[()=>w(te).getControlProps()]);var q=j(ae);Ge(q,me=>({...me,class:`${f()??""} ${g()??""} ${i()??""} ${c()??""} ${l()??""}`,"data-testid":"slider-track"}),[()=>w(te).getTrackProps()]);var _e=j(q);Ge(_e,me=>({...me,class:`${p()??""} ${i()??""} ${h()??""} ${m()??""} ${v()??""}`,"data-testid":"slider-meter"}),[()=>w(te).getRangeProps()]),H(q);var xe=Z(q,2);pt(xe,21,()=>w(te).value,vt,(me,fe,Oe)=>{var De=qp();Ge(De,z=>({...z}),[()=>w(te).getThumbProps({index:Oe})]);var _=j(De),K=Z(_,2);We(K),Ge(K,z=>({...z,"data-testid":"slider-input"}),[()=>w(te).getHiddenInputProps({index:Oe})]),H(De),Te(()=>st(_,1,`${y()??""} ${x()??""} ${E()??""} ${k()??""} ${T()??""} ${A()??""} ${w(M)??""} ${O()??""}`)),ee(me,De)}),H(xe),H(ae);var de=Z(ae,2);{var Ee=me=>{var fe=Zp();Ge(fe,Oe=>({...Oe,class:`${B()??""} ${F()??""}`,"data-testid":"slider-markers"}),[()=>w(te).getMarkerGroupProps()]),pt(fe,21,r,vt,(Oe,De)=>{var _=Gp();Ge(_,S=>({...S,class:`${C()??""} ${R()??""} ${b()??""} ${D()??""}`,"data-testid":"slider-mark"}),[()=>w(te).getMarkerProps({value:w(De)})]);var K=j(_);{var z=S=>{var P=Se(),Y=pe(P);Pe(Y,()=>t.mark,()=>w(De)),ee(S,P)},I=S=>{var P=sr();Te(()=>nt(P,w(De))),ee(S,P)};Le(K,S=>{t.mark?S(z):S(I,!1)})}H(_),ee(Oe,_)}),H(fe),ee(me,fe)};Le(de,me=>{r().length>0&&me(Ee)})}H(oe),Te(()=>st(xe,1,ns(i()))),ee(e,oe),ye()}var Xp=Dn("switch").parts("root","label","control","thumb"),Oi=Xp.build(),du=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`switch:${e.id}`},vl=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`switch:${e.id}:label`},Yp=e=>{var t;return((t=e.ids)==null?void 0:t.thumb)??`switch:${e.id}:thumb`},Jp=e=>{var t;return((t=e.ids)==null?void 0:t.control)??`switch:${e.id}:control`},Rs=e=>{var t;return((t=e.ids)==null?void 0:t.hiddenInput)??`switch:${e.id}:input`},Qp=e=>e.getById(du(e)),kr=e=>e.getById(Rs(e));function eg(e,t){const{context:n,send:r,prop:i,scope:s}=e,a=i("disabled"),o=i("readOnly"),u=!!n.get("checked"),d=!a&&n.get("focused"),f=!a&&n.get("focusVisible"),g={"data-active":Ie(n.get("active")),"data-focus":Ie(d),"data-focus-visible":Ie(f),"data-readonly":Ie(o),"data-hover":Ie(n.get("hovered")),"data-disabled":Ie(a),"data-state":u?"checked":"unchecked","data-invalid":Ie(i("invalid"))};return{checked:u,disabled:a,focused:d,setChecked(c){r({type:"CHECKED.SET",checked:c,isTrusted:!1})},toggleChecked(){r({type:"CHECKED.TOGGLE",checked:u,isTrusted:!1})},getRootProps(){return t.label({...Oi.root.attrs,...g,dir:i("dir"),id:du(s),htmlFor:Rs(s),onPointerMove(){a||r({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){a||r({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(c){var p;if(a)return;It(c)===kr(s)&&c.stopPropagation(),Ys()&&((p=kr(s))==null||p.focus())}})},getLabelProps(){return t.element({...Oi.label.attrs,...g,dir:i("dir"),id:vl(s)})},getThumbProps(){return t.element({...Oi.thumb.attrs,...g,dir:i("dir"),id:Yp(s),"aria-hidden":!0})},getControlProps(){return t.element({...Oi.control.attrs,...g,dir:i("dir"),id:Jp(s),"aria-hidden":!0})},getHiddenInputProps(){return t.input({id:Rs(s),type:"checkbox",required:i("required"),defaultChecked:u,disabled:a,"aria-labelledby":vl(s),"aria-invalid":i("invalid"),name:i("name"),form:i("form"),value:i("value"),style:$c,onFocus(){const c=Yi();r({type:"CONTEXT.SET",context:{focused:!0,focusVisible:c}})},onBlur(){r({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(c){if(o){c.preventDefault();return}const l=c.currentTarget.checked;r({type:"CHECKED.SET",checked:l,isTrusted:!0})}})}}}var{not:pl}=Kc(),tg={props({props:e}){return{defaultChecked:!1,label:"switch",value:"on",...e}},initialState(){return"ready"},context({prop:e,bindable:t}){return{checked:t(()=>({defaultValue:e("defaultChecked"),value:e("checked"),onChange(n){var r;(r=e("onCheckedChange"))==null||r({checked:n})}})),fieldsetDisabled:t(()=>({defaultValue:!1})),focusVisible:t(()=>({defaultValue:!1})),active:t(()=>({defaultValue:!1})),focused:t(()=>({defaultValue:!1})),hovered:t(()=>({defaultValue:!1}))}},computed:{isDisabled:({context:e,prop:t})=>t("disabled")||e.get("fieldsetDisabled")},watch({track:e,prop:t,context:n,action:r}){e([()=>t("disabled")],()=>{r(["removeFocusIfNeeded"])}),e([()=>n.get("checked")],()=>{r(["syncInputElement"])})},effects:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:pl("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:pl("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}},implementations:{guards:{isTrusted:({event:e})=>!!e.isTrusted},effects:{trackPressEvent({computed:e,scope:t,context:n}){if(!e("isDisabled"))return ev({pointerNode:Qp(t),keyboardNode:kr(t),isValidKey:r=>r.key===" ",onPress:()=>n.set("active",!1),onPressStart:()=>n.set("active",!0),onPressEnd:()=>n.set("active",!1)})},trackFocusVisible({computed:e,scope:t}){if(!e("isDisabled"))return eu({root:t.getRootNode()})},trackFormControlState({context:e,send:t,scope:n}){return Qs(kr(n),{onFieldsetDisabledChange(r){e.set("fieldsetDisabled",r)},onFormReset(){const r=e.initial("checked");t({type:"CHECKED.SET",checked:!!r,src:"form-reset"})}})}},actions:{setContext({context:e,event:t}){for(const n in t.context)e.set(n,t.context[n])},syncInputElement({context:e,scope:t}){const n=kr(t);n&&Bc(n,!!e.get("checked"))},removeFocusIfNeeded({context:e,prop:t}){t("disabled")&&e.set("focused",!1)},setChecked({context:e,event:t}){e.set("checked",t.checked)},toggleChecked({context:e}){e.set("checked",!e.get("checked"))},dispatchChangeEvent({context:e,scope:t}){const n=kr(t);Mc(n,{checked:e.get("checked")})}}}};Br()(["checked","defaultChecked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);var ng=ue('<span data-testid="switch-icon-inactive"><!></span>'),rg=ue('<span data-testid="switch-icon-active"><!></span>'),ig=ue("<span><!></span>"),ag=ue("<label><input/> <span><span><!> <!></span></span> <!></label>");function Gn(e,t){const n=oa();be(t,!0);const r=$(t,"compact",3,!1),i=$(t,"base",3,"inline-flex items-center gap-4"),s=$(t,"classes",3,""),a=$(t,"stateFocused",3,"data-[focus-visible]:focused"),o=$(t,"controlBase",3,"cursor-pointer transition duration-200"),u=$(t,"controlInactive",3,"preset-filled-surface-200-800"),d=$(t,"controlActive",3,"preset-filled-primary-500"),f=$(t,"controlDisabled",3,"opacity-50 cursor-not-allowed"),g=$(t,"controlWidth",3,"w-10"),c=$(t,"controlHeight",3,"h-6"),l=$(t,"controlPadding",3,"p-0.5"),p=$(t,"controlRounded",3,"rounded-full"),h=$(t,"controlHover",3,"hover:brightness-90 dark:hover:brightness-110"),m=$(t,"controlClasses",3,""),v=$(t,"thumbBase",3,"right-0 aspect-square h-full flex justify-center items-center text-right cursor-pointer"),y=$(t,"thumbInactive",3,"preset-filled-surface-50-950"),x=$(t,"thumbActive",3,"bg-surface-50 text-surface-contrast-50"),E=$(t,"thumbRounded",3,"rounded-full"),k=$(t,"thumbTranslateX",3,"translate-x-4 rtl:-translate-x-4"),T=$(t,"thumbTransition",3,"transition"),A=$(t,"thumbEase",3,"ease-in-out"),L=$(t,"thumbDuration",3,"duration-200"),O=$(t,"thumbClasses",3,""),B=$(t,"labelBase",3,""),F=$(t,"labelClasses",3,""),C=$(t,"iconInactiveBase",3,"pointer-events-none"),R=$(t,"iconActiveBase",3,"pointer-events-none"),b=Fe(t,["$$slots","$$events","$$legacy","compact","base","classes","stateFocused","controlBase","controlInactive","controlActive","controlDisabled","controlWidth","controlHeight","controlPadding","controlRounded","controlHover","controlClasses","thumbBase","thumbInactive","thumbActive","thumbRounded","thumbTranslateX","thumbTransition","thumbEase","thumbDuration","thumbClasses","labelBase","labelClasses","iconInactiveBase","iconActiveBase","children","inactiveChild","activeChild"]),D=ma(tg,()=>({id:n,...b})),V=ce(()=>eg(D,ga)),U=ce(()=>r()?v():o()),X=ce(()=>r()?"":c()),G=ce(()=>r()?"":l()),te=ce(()=>r()?u():y()),N=ce(()=>r()?d():x()),M=ce(()=>r()?"":k()),oe=ce(()=>w(V).checked?d():u()),ae=ce(()=>w(V).checked?`${w(N)} ${w(M)}`:w(te)),q=ce(()=>w(V).disabled?f():""),_e=ce(()=>w(V).focused?a():"");var xe=ag();Ge(xe,I=>({...I,class:`${i()??""} ${s()??""}`,"data-testid":"switch"}),[()=>w(V).getRootProps()]);var de=j(xe);We(de),Ge(de,I=>({...I,"data-testid":"switch-input"}),[()=>w(V).getHiddenInputProps()]);var Ee=Z(de,2);Ge(Ee,I=>({...I,class:`${w(U)??""} ${w(oe)??""} ${w(_e)??""} ${g()??""} ${w(X)??""} ${w(G)??""} ${p()??""} ${h()??""} ${w(q)??""} ${m()??""}`,"data-testid":"switch-control"}),[()=>w(V).getControlProps()]);var me=j(Ee);Ge(me,I=>({...I,class:`${v()??""} ${w(ae)??""} ${E()??""} ${T()??""} ${A()??""} ${L()??""} ${O()??""}`,"data-testid":"switch-thumb"}),[()=>w(V).getThumbProps()]);var fe=j(me);{var Oe=I=>{var S=ng(),P=j(S);Pe(P,()=>t.inactiveChild),H(S),Te(()=>st(S,1,ns(C()))),ee(I,S)};Le(fe,I=>{!w(V).checked&&t.inactiveChild&&I(Oe)})}var De=Z(fe,2);{var _=I=>{var S=rg(),P=j(S);Pe(P,()=>t.activeChild),H(S),Te(()=>st(S,1,ns(R()))),ee(I,S)};Le(De,I=>{w(V).checked&&t.activeChild&&I(_)})}H(me),H(Ee);var K=Z(Ee,2);{var z=I=>{var S=ig();Ge(S,Y=>({...Y,class:`${B()??""} ${F()??""}`,"data-testid":"switch-label"}),[()=>w(V).getLabelProps()]);var P=j(S);Pe(P,()=>t.children),H(S),ee(I,S)};Le(K,I=>{t.children&&I(z)})}H(xe),ee(e,xe),ye()}var ea;ea=ba({fluid:!1,api:{}}),ea[0];ea[1];ea[2];function sg(e){const t={each(n){var r;for(let i=0;i<((r=e.frames)==null?void 0:r.length);i+=1){const s=e.frames[i];s&&n(s)}},addEventListener(n,r,i){return t.each(s=>{try{s.document.addEventListener(n,r,i)}catch{}}),()=>{try{t.removeEventListener(n,r,i)}catch{}}},removeEventListener(n,r,i){t.each(s=>{try{s.document.removeEventListener(n,r,i)}catch{}})}};return t}function og(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,r,i)=>{try{t==null||t.addEventListener(n,r,i)}catch{}return()=>{try{t==null||t.removeEventListener(n,r,i)}catch{}}},removeEventListener:(n,r,i)=>{try{t==null||t.removeEventListener(n,r,i)}catch{}}}}var gl="pointerdown.outside",ml="focus.outside";function lg(e){for(const t of e)if(lt(t)&&Fn(t))return!0;return!1}var fu=e=>"clientY"in e;function cg(e,t){if(!fu(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function ug(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function bl(e,t){if(!t||!fu(e))return!1;const n=t.scrollHeight>t.clientHeight,r=n&&e.clientX>t.offsetLeft+t.clientWidth,i=t.scrollWidth>t.clientWidth,s=i&&e.clientY>t.offsetTop+t.clientHeight,a={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(n?16:0),height:t.clientHeight+(i?16:0)},o={x:e.clientX,y:e.clientY};return ug(a,o)?r||s:!1}function dg(e,t){const{exclude:n,onFocusOutside:r,onPointerDownOutside:i,onInteractOutside:s,defer:a}=t;if(!e)return;const o=Rt(e),u=ut(e),d=sg(u),f=og(u);function g(y,x){if(!lt(x)||!x.isConnected||hi(e,x)||cg(e,y))return!1;const E=o.querySelector(`[aria-controls="${e.id}"]`);if(E){const T=ys(E);if(bl(y,T))return!1}const k=ys(e);return bl(y,k)?!1:!(n!=null&&n(x))}const c=new Set,l=fi(e==null?void 0:e.getRootNode());function p(y){function x(E){var L;const k=a&&!Jo()?At:O=>O(),T=E??y,A=((L=T==null?void 0:T.composedPath)==null?void 0:L.call(T))??[T==null?void 0:T.target];k(()=>{const O=l?A[0]:It(y);if(!(!e||!g(y,O))){if(i||s){const B=xs(i,s);e.addEventListener(gl,B,{once:!0})}yl(e,gl,{bubbles:!1,cancelable:!0,detail:{originalEvent:T,contextmenu:Th(T),focusable:lg(A),target:O}})}})}y.pointerType==="touch"?(c.forEach(E=>E()),c.add(Xe(o,"click",x,{once:!0})),c.add(f.addEventListener("click",x,{once:!0})),c.add(d.addEventListener("click",x,{once:!0}))):x()}const h=new Set,m=setTimeout(()=>{h.add(Xe(o,"pointerdown",p,!0)),h.add(f.addEventListener("pointerdown",p,!0)),h.add(d.addEventListener("pointerdown",p,!0))},0);function v(y){(a?At:E=>E())(()=>{const E=It(y);if(!(!e||!g(y,E))){if(r||s){const k=xs(r,s);e.addEventListener(ml,k,{once:!0})}yl(e,ml,{bubbles:!1,cancelable:!0,detail:{originalEvent:y,contextmenu:!1,focusable:Fn(E),target:E}})}})}return Jo()||(h.add(Xe(o,"focusin",v,!0)),h.add(f.addEventListener("focusin",v,!0)),h.add(d.addEventListener("focusin",v,!0))),()=>{clearTimeout(m),c.forEach(y=>y()),h.forEach(y=>y())}}function fg(e,t){const{defer:n}=t,r=n?At:s=>s(),i=[];return i.push(r(()=>{const s=typeof e=="function"?e():e;i.push(dg(s,t))})),()=>{i.forEach(s=>s==null?void 0:s())}}function yl(e,t,n){const r=e.ownerDocument.defaultView||window,i=new r.CustomEvent(t,n);return e.dispatchEvent(i)}function hg(e,t){const n=r=>{r.key==="Escape"&&(r.isComposing||t==null||t(r))};return Xe(Rt(e),"keydown",n,{capture:!0})}var Ft={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var r;const t=this.indexOf(e),n=this.topMostPointerBlockingLayer()?this.indexOf((r=this.topMostPointerBlockingLayer())==null?void 0:r.node):-1;return t<n},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(n=>hi(n.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>hi(t,e))},add(e){const t=this.layers.push(e);e.node.style.setProperty("--layer-index",`${t}`)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(r=>r.dismiss()),this.layers.splice(t,1),e.style.removeProperty("--layer-index"))},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e){var t;(t=this.layers[this.indexOf(e)])==null||t.dismiss()},clear(){this.remove(this.layers[0].node)}},_l;function wl(){Ft.layers.forEach(({node:e})=>{e.style.pointerEvents=Ft.isBelowPointerBlockingLayer(e)?"none":"auto"})}function vg(e){e.style.pointerEvents=""}function pg(e,t){const n=Rt(e),r=[];if(Ft.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(_l=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),t){const i=sv(t,s=>{r.push(ws(s,{pointerEvents:"auto"}))});r.push(i)}return()=>{Ft.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=_l,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),r.forEach(i=>i()))}}function gg(e,t){const{warnOnMissingNode:n=!0}=t;if(n&&!e){Cs("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:r,pointerBlocking:i,exclude:s,debug:a}=t,o={dismiss:r,node:e,pointerBlocking:i};Ft.add(o),wl();function u(l){var h,m;const p=It(l.detail.originalEvent);Ft.isBelowPointerBlockingLayer(e)||Ft.isInBranch(p)||((h=t.onPointerDownOutside)==null||h.call(t,l),(m=t.onInteractOutside)==null||m.call(t,l),!l.defaultPrevented&&(a&&console.log("onPointerDownOutside:",l.detail.originalEvent),r==null||r()))}function d(l){var h,m;const p=It(l.detail.originalEvent);Ft.isInBranch(p)||((h=t.onFocusOutside)==null||h.call(t,l),(m=t.onInteractOutside)==null||m.call(t,l),!l.defaultPrevented&&(a&&console.log("onFocusOutside:",l.detail.originalEvent),r==null||r()))}function f(l){var p;Ft.isTopMost(e)&&((p=t.onEscapeKeyDown)==null||p.call(t,l),!l.defaultPrevented&&r&&(l.preventDefault(),r()))}function g(l){var v;if(!e)return!1;const p=typeof s=="function"?s():s,h=Array.isArray(p)?p:[p],m=(v=t.persistentElements)==null?void 0:v.map(y=>y()).filter(lt);return m&&h.push(...m),h.some(y=>hi(y,l))||Ft.isInNestedLayer(e,l)}const c=[i?pg(e,t.persistentElements):void 0,hg(e,f),fg(e,{exclude:g,onFocusOutside:d,onPointerDownOutside:u,defer:t.defer})];return()=>{Ft.remove(e),wl(),vg(e),c.forEach(l=>l==null?void 0:l())}}function mg(e,t){const{defer:n}=t,r=n?At:s=>s(),i=[];return i.push(r(()=>{const s=Yn(e)?e():e;i.push(gg(s,t))})),()=>{i.forEach(s=>s==null?void 0:s())}}const bg=["top","right","bottom","left"],Vn=Math.min,_t=Math.max,ta=Math.round,Ri=Math.floor,tn=e=>({x:e,y:e}),yg={left:"right",right:"left",bottom:"top",top:"bottom"},_g={start:"end",end:"start"};function Ls(e,t,n){return _t(e,Vn(t,n))}function kn(e,t){return typeof e=="function"?e(t):e}function En(e){return e.split("-")[0]}function Mr(e){return e.split("-")[1]}function ao(e){return e==="x"?"y":"x"}function so(e){return e==="y"?"height":"width"}function Jt(e){return["top","bottom"].includes(En(e))?"y":"x"}function oo(e){return ao(Jt(e))}function wg(e,t,n){n===void 0&&(n=!1);const r=Mr(e),i=oo(e),s=so(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=na(a)),[a,na(a)]}function xg(e){const t=na(e);return[Ps(e),t,Ps(t)]}function Ps(e){return e.replace(/start|end/g,t=>_g[t])}function kg(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:a;default:return[]}}function Eg(e,t,n,r){const i=Mr(e);let s=kg(En(e),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),t&&(s=s.concat(s.map(Ps)))),s}function na(e){return e.replace(/left|right|bottom|top/g,t=>yg[t])}function Cg(e){return{top:0,right:0,bottom:0,left:0,...e}}function hu(e){return typeof e!="number"?Cg(e):{top:e,right:e,bottom:e,left:e}}function ra(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function xl(e,t,n){let{reference:r,floating:i}=e;const s=Jt(t),a=oo(t),o=so(a),u=En(t),d=s==="y",f=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,c=r[o]/2-i[o]/2;let l;switch(u){case"top":l={x:f,y:r.y-i.height};break;case"bottom":l={x:f,y:r.y+r.height};break;case"right":l={x:r.x+r.width,y:g};break;case"left":l={x:r.x-i.width,y:g};break;default:l={x:r.x,y:r.y}}switch(Mr(t)){case"start":l[a]-=c*(n&&d?-1:1);break;case"end":l[a]+=c*(n&&d?-1:1);break}return l}const Sg=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:g}=xl(d,r,u),c=r,l={},p=0;for(let h=0;h<o.length;h++){const{name:m,fn:v}=o[h],{x:y,y:x,data:E,reset:k}=await v({x:f,y:g,initialPlacement:r,placement:c,strategy:i,middlewareData:l,rects:d,platform:a,elements:{reference:e,floating:t}});f=y??f,g=x??g,l={...l,[m]:{...l[m],...E}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(c=k.placement),k.rects&&(d=k.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:f,y:g}=xl(d,c,u)),h=-1)}return{x:f,y:g,placement:c,strategy:i,middlewareData:l}};async function pi(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:g="floating",altBoundary:c=!1,padding:l=0}=kn(t,e),p=hu(l),m=o[c?g==="floating"?"reference":"floating":g],v=ra(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:d,rootBoundary:f,strategy:u})),y=g==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),E=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},k=ra(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:y,offsetParent:x,strategy:u}):y);return{top:(v.top-k.top+p.top)/E.y,bottom:(k.bottom-v.bottom+p.bottom)/E.y,left:(v.left-k.left+p.left)/E.x,right:(k.right-v.right+p.right)/E.x}}const Ig=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:u}=t,{element:d,padding:f=0}=kn(e,t)||{};if(d==null)return{};const g=hu(f),c={x:n,y:r},l=oo(i),p=so(l),h=await a.getDimensions(d),m=l==="y",v=m?"top":"left",y=m?"bottom":"right",x=m?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[l]-c[l]-s.floating[p],k=c[l]-s.reference[l],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let A=T?T[x]:0;(!A||!await(a.isElement==null?void 0:a.isElement(T)))&&(A=o.floating[x]||s.floating[p]);const L=E/2-k/2,O=A/2-h[p]/2-1,B=Vn(g[v],O),F=Vn(g[y],O),C=B,R=A-h[p]-F,b=A/2-h[p]/2+L,D=Ls(C,b,R),V=!u.arrow&&Mr(i)!=null&&b!==D&&s.reference[p]/2-(b<C?B:F)-h[p]/2<0,U=V?b<C?b-C:b-R:0;return{[l]:c[l]+U,data:{[l]:D,centerOffset:b-D-U,...V&&{alignmentOffset:U}},reset:V}}}),Tg=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:u,elements:d}=t,{mainAxis:f=!0,crossAxis:g=!0,fallbackPlacements:c,fallbackStrategy:l="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...m}=kn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=En(i),y=Jt(o),x=En(o)===o,E=await(u.isRTL==null?void 0:u.isRTL(d.floating)),k=c||(x||!h?[na(o)]:xg(o)),T=p!=="none";!c&&T&&k.push(...Eg(o,h,p,E));const A=[o,...k],L=await pi(t,m),O=[];let B=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&O.push(L[v]),g){const b=wg(i,a,E);O.push(L[b[0]],L[b[1]])}if(B=[...B,{placement:i,overflows:O}],!O.every(b=>b<=0)){var F,C;const b=(((F=s.flip)==null?void 0:F.index)||0)+1,D=A[b];if(D&&(!(g==="alignment"?y!==Jt(D):!1)||B.every(X=>X.overflows[0]>0&&Jt(X.placement)===y)))return{data:{index:b,overflows:B},reset:{placement:D}};let V=(C=B.filter(U=>U.overflows[0]<=0).sort((U,X)=>U.overflows[1]-X.overflows[1])[0])==null?void 0:C.placement;if(!V)switch(l){case"bestFit":{var R;const U=(R=B.filter(X=>{if(T){const G=Jt(X.placement);return G===y||G==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(G=>G>0).reduce((G,te)=>G+te,0)]).sort((X,G)=>X[1]-G[1])[0])==null?void 0:R[0];U&&(V=U);break}case"initialPlacement":V=o;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function kl(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function El(e){return bg.some(t=>e[t]>=0)}const Ag=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=kn(e,t);switch(r){case"referenceHidden":{const s=await pi(t,{...i,elementContext:"reference"}),a=kl(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:El(a)}}}case"escaped":{const s=await pi(t,{...i,altBoundary:!0}),a=kl(s,n.floating);return{data:{escapedOffsets:a,escaped:El(a)}}}default:return{}}}}};async function Og(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=En(n),o=Mr(n),u=Jt(n)==="y",d=["left","top"].includes(a)?-1:1,f=s&&u?-1:1,g=kn(t,e);let{mainAxis:c,crossAxis:l,alignmentAxis:p}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return o&&typeof p=="number"&&(l=o==="end"?p*-1:p),u?{x:l*f,y:c*d}:{x:c*d,y:l*f}}const Rg=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=t,u=await Og(t,e);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:a}}}}},Lg=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:m=>{let{x:v,y}=m;return{x:v,y}}},...u}=kn(e,t),d={x:n,y:r},f=await pi(t,u),g=Jt(En(i)),c=ao(g);let l=d[c],p=d[g];if(s){const m=c==="y"?"top":"left",v=c==="y"?"bottom":"right",y=l+f[m],x=l-f[v];l=Ls(y,l,x)}if(a){const m=g==="y"?"top":"left",v=g==="y"?"bottom":"right",y=p+f[m],x=p-f[v];p=Ls(y,p,x)}const h=o.fn({...t,[c]:l,[g]:p});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[c]:s,[g]:a}}}}}},Pg=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=t,{offset:o=0,mainAxis:u=!0,crossAxis:d=!0}=kn(e,t),f={x:n,y:r},g=Jt(i),c=ao(g);let l=f[c],p=f[g];const h=kn(o,t),m=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(u){const x=c==="y"?"height":"width",E=s.reference[c]-s.floating[x]+m.mainAxis,k=s.reference[c]+s.reference[x]-m.mainAxis;l<E?l=E:l>k&&(l=k)}if(d){var v,y;const x=c==="y"?"width":"height",E=["top","left"].includes(En(i)),k=s.reference[g]-s.floating[x]+(E&&((v=a.offset)==null?void 0:v[g])||0)+(E?0:m.crossAxis),T=s.reference[g]+s.reference[x]+(E?0:((y=a.offset)==null?void 0:y[g])||0)-(E?m.crossAxis:0);p<k?p=k:p>T&&(p=T)}return{[c]:l,[g]:p}}}},Dg=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:a,elements:o}=t,{apply:u=()=>{},...d}=kn(e,t),f=await pi(t,d),g=En(i),c=Mr(i),l=Jt(i)==="y",{width:p,height:h}=s.floating;let m,v;g==="top"||g==="bottom"?(m=g,v=c===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=g,m=c==="end"?"top":"bottom");const y=h-f.top-f.bottom,x=p-f.left-f.right,E=Vn(h-f[m],y),k=Vn(p-f[v],x),T=!t.middlewareData.shift;let A=E,L=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(L=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=y),T&&!c){const B=_t(f.left,0),F=_t(f.right,0),C=_t(f.top,0),R=_t(f.bottom,0);l?L=p-2*(B!==0||F!==0?B+F:_t(f.left,f.right)):A=h-2*(C!==0||R!==0?C+R:_t(f.top,f.bottom))}await u({...t,availableWidth:L,availableHeight:A});const O=await a.getDimensions(o.floating);return p!==O.width||h!==O.height?{reset:{rects:!0}}:{}}}};function wa(){return typeof window<"u"}function Vr(e){return vu(e)?(e.nodeName||"").toLowerCase():"#document"}function xt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function an(e){var t;return(t=(vu(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function vu(e){return wa()?e instanceof Node||e instanceof xt(e).Node:!1}function Bt(e){return wa()?e instanceof Element||e instanceof xt(e).Element:!1}function nn(e){return wa()?e instanceof HTMLElement||e instanceof xt(e).HTMLElement:!1}function Cl(e){return!wa()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xt(e).ShadowRoot}function Ei(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Ng(e){return["table","td","th"].includes(Vr(e))}function xa(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function lo(e){const t=co(),n=Bt(e)?Mt(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Fg(e){let t=Un(e);for(;nn(t)&&!Rr(t);){if(lo(t))return t;if(xa(t))return null;t=Un(t)}return null}function co(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rr(e){return["html","body","#document"].includes(Vr(e))}function Mt(e){return xt(e).getComputedStyle(e)}function ka(e){return Bt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Un(e){if(Vr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Cl(e)&&e.host||an(e);return Cl(t)?t.host:t}function pu(e){const t=Un(e);return Rr(t)?e.ownerDocument?e.ownerDocument.body:e.body:nn(t)&&Ei(t)?t:pu(t)}function gi(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=pu(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),a=xt(i);if(s){const o=Ds(a);return t.concat(a,a.visualViewport||[],Ei(i)?i:[],o&&n?gi(o):[])}return t.concat(i,gi(i,[],n))}function Ds(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function gu(e){const t=Mt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=nn(e),s=i?e.offsetWidth:n,a=i?e.offsetHeight:r,o=ta(n)!==s||ta(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function uo(e){return Bt(e)?e:e.contextElement}function Sr(e){const t=uo(e);if(!nn(t))return tn(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=gu(t);let a=(s?ta(n.width):n.width)/r,o=(s?ta(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const zg=tn(0);function mu(e){const t=xt(e);return!co()||!t.visualViewport?zg:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Bg(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==xt(e)?!1:t}function ar(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=uo(e);let a=tn(1);t&&(r?Bt(r)&&(a=Sr(r)):a=Sr(e));const o=Bg(s,n,r)?mu(s):tn(0);let u=(i.left+o.x)/a.x,d=(i.top+o.y)/a.y,f=i.width/a.x,g=i.height/a.y;if(s){const c=xt(s),l=r&&Bt(r)?xt(r):r;let p=c,h=Ds(p);for(;h&&r&&l!==p;){const m=Sr(h),v=h.getBoundingClientRect(),y=Mt(h),x=v.left+(h.clientLeft+parseFloat(y.paddingLeft))*m.x,E=v.top+(h.clientTop+parseFloat(y.paddingTop))*m.y;u*=m.x,d*=m.y,f*=m.x,g*=m.y,u+=x,d+=E,p=xt(h),h=Ds(p)}}return ra({width:f,height:g,x:u,y:d})}function fo(e,t){const n=ka(e).scrollLeft;return t?t.left+n:ar(an(e)).left+n}function bu(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:fo(e,r)),s=r.top+t.scrollTop;return{x:i,y:s}}function Mg(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",a=an(r),o=t?xa(t.floating):!1;if(r===a||o&&s)return n;let u={scrollLeft:0,scrollTop:0},d=tn(1);const f=tn(0),g=nn(r);if((g||!g&&!s)&&((Vr(r)!=="body"||Ei(a))&&(u=ka(r)),nn(r))){const l=ar(r);d=Sr(r),f.x=l.x+r.clientLeft,f.y=l.y+r.clientTop}const c=a&&!g&&!s?bu(a,u,!0):tn(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+f.x+c.x,y:n.y*d.y-u.scrollTop*d.y+f.y+c.y}}function Vg(e){return Array.from(e.getClientRects())}function Ug(e){const t=an(e),n=ka(e),r=e.ownerDocument.body,i=_t(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=_t(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+fo(e);const o=-n.scrollTop;return Mt(r).direction==="rtl"&&(a+=_t(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function Wg(e,t){const n=xt(e),r=an(e),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,u=0;if(i){s=i.width,a=i.height;const d=co();(!d||d&&t==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:s,height:a,x:o,y:u}}function Hg(e,t){const n=ar(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=nn(e)?Sr(e):tn(1),a=e.clientWidth*s.x,o=e.clientHeight*s.y,u=i*s.x,d=r*s.y;return{width:a,height:o,x:u,y:d}}function Sl(e,t,n){let r;if(t==="viewport")r=Wg(e,n);else if(t==="document")r=Ug(an(e));else if(Bt(t))r=Hg(t,n);else{const i=mu(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return ra(r)}function yu(e,t){const n=Un(e);return n===t||!Bt(n)||Rr(n)?!1:Mt(n).position==="fixed"||yu(n,t)}function $g(e,t){const n=t.get(e);if(n)return n;let r=gi(e,[],!1).filter(o=>Bt(o)&&Vr(o)!=="body"),i=null;const s=Mt(e).position==="fixed";let a=s?Un(e):e;for(;Bt(a)&&!Rr(a);){const o=Mt(a),u=lo(a);!u&&o.position==="fixed"&&(i=null),(s?!u&&!i:!u&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ei(a)&&!u&&yu(e,a))?r=r.filter(f=>f!==a):i=o,a=Un(a)}return t.set(e,r),r}function jg(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?xa(t)?[]:$g(t,this._c):[].concat(n),r],o=a[0],u=a.reduce((d,f)=>{const g=Sl(t,f,i);return d.top=_t(g.top,d.top),d.right=Vn(g.right,d.right),d.bottom=Vn(g.bottom,d.bottom),d.left=_t(g.left,d.left),d},Sl(t,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function qg(e){const{width:t,height:n}=gu(e);return{width:t,height:n}}function Gg(e,t,n){const r=nn(t),i=an(t),s=n==="fixed",a=ar(e,!0,s,t);let o={scrollLeft:0,scrollTop:0};const u=tn(0);function d(){u.x=fo(i)}if(r||!r&&!s)if((Vr(t)!=="body"||Ei(i))&&(o=ka(t)),r){const l=ar(t,!0,s,t);u.x=l.x+t.clientLeft,u.y=l.y+t.clientTop}else i&&d();s&&!r&&i&&d();const f=i&&!r&&!s?bu(i,o):tn(0),g=a.left+o.scrollLeft-u.x-f.x,c=a.top+o.scrollTop-u.y-f.y;return{x:g,y:c,width:a.width,height:a.height}}function Ga(e){return Mt(e).position==="static"}function Il(e,t){if(!nn(e)||Mt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return an(e)===n&&(n=n.ownerDocument.body),n}function _u(e,t){const n=xt(e);if(xa(e))return n;if(!nn(e)){let i=Un(e);for(;i&&!Rr(i);){if(Bt(i)&&!Ga(i))return i;i=Un(i)}return n}let r=Il(e,t);for(;r&&Ng(r)&&Ga(r);)r=Il(r,t);return r&&Rr(r)&&Ga(r)&&!lo(r)?n:r||Fg(e)||n}const Zg=async function(e){const t=this.getOffsetParent||_u,n=this.getDimensions,r=await n(e.floating);return{reference:Gg(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Kg(e){return Mt(e).direction==="rtl"}const Xg={convertOffsetParentRelativeRectToViewportRelativeRect:Mg,getDocumentElement:an,getClippingRect:jg,getOffsetParent:_u,getElementRects:Zg,getClientRects:Vg,getDimensions:qg,getScale:Sr,isElement:Bt,isRTL:Kg};function wu(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Yg(e,t){let n=null,r;const i=an(e);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,u){o===void 0&&(o=!1),u===void 0&&(u=1),s();const d=e.getBoundingClientRect(),{left:f,top:g,width:c,height:l}=d;if(o||t(),!c||!l)return;const p=Ri(g),h=Ri(i.clientWidth-(f+c)),m=Ri(i.clientHeight-(g+l)),v=Ri(f),x={rootMargin:-p+"px "+-h+"px "+-m+"px "+-v+"px",threshold:_t(0,Vn(1,u))||1};let E=!0;function k(T){const A=T[0].intersectionRatio;if(A!==u){if(!E)return a();A?a(!1,A):r=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!wu(d,e.getBoundingClientRect())&&a(),E=!1}try{n=new IntersectionObserver(k,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,x)}n.observe(e)}return a(!0),s}function Jg(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=uo(e),f=i||s?[...d?gi(d):[],...gi(t)]:[];f.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const g=d&&o?Yg(d,n):null;let c=-1,l=null;a&&(l=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&l&&(l.unobserve(t),cancelAnimationFrame(c),c=requestAnimationFrame(()=>{var x;(x=l)==null||x.observe(t)})),n()}),d&&!u&&l.observe(d),l.observe(t));let p,h=u?ar(e):null;u&&m();function m(){const v=ar(e);h&&!wu(h,v)&&n(),h=v,p=requestAnimationFrame(m)}return n(),()=>{var v;f.forEach(y=>{i&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),g==null||g(),(v=l)==null||v.disconnect(),l=null,u&&cancelAnimationFrame(p)}}const Qg=Rg,em=Lg,tm=Tg,nm=Dg,rm=Ag,im=Ig,am=Pg,sm=(e,t,n)=>{const r=new Map,i={platform:Xg,...n},s={...i.platform,_c:r};return Sg(e,t,{...i,platform:s})};function Tl(e=0,t=0,n=0,r=0){if(typeof DOMRect=="function")return new DOMRect(e,t,n,r);const i={x:e,y:t,width:n,height:r,top:t,right:e+n,bottom:t+r,left:e};return{...i,toJSON:()=>i}}function om(e){if(!e)return Tl();const{x:t,y:n,width:r,height:i}=e;return Tl(t,n,r,i)}function lm(e,t){return{contextElement:lt(e)?e:void 0,getBoundingClientRect:()=>{const n=e,r=t==null?void 0:t(n);return r||!n?om(r):n.getBoundingClientRect()}}}var qr=e=>({variable:e,reference:`var(${e})`}),hn={arrowSize:qr("--arrow-size"),arrowSizeHalf:qr("--arrow-size-half"),arrowBg:qr("--arrow-background"),transformOrigin:qr("--transform-origin"),arrowOffset:qr("--arrow-offset")},cm=e=>({top:"bottom center","top-start":e?`${e.x}px bottom`:"left bottom","top-end":e?`${e.x}px bottom`:"right bottom",bottom:"top center","bottom-start":e?`${e.x}px top`:"top left","bottom-end":e?`${e.x}px top`:"top right",left:"right center","left-start":e?`right ${e.y}px`:"right top","left-end":e?`right ${e.y}px`:"right bottom",right:"left center","right-start":e?`left ${e.y}px`:"left top","right-end":e?`left ${e.y}px`:"left bottom"}),um={name:"transformOrigin",fn({placement:e,elements:t,middlewareData:n}){const{arrow:r}=n,i=cm(r)[e],{floating:s}=t;return s.style.setProperty(hn.transformOrigin.variable,i),{data:{transformOrigin:i}}}},dm={name:"rects",fn({rects:e}){return{data:e}}},fm=e=>{if(e)return{name:"shiftArrow",fn({placement:t,middlewareData:n}){if(!n.arrow)return{};const{x:r,y:i}=n.arrow,s=t.split("-")[0];return Object.assign(e.style,{left:r!=null?`${r}px`:"",top:i!=null?`${i}px`:"",[s]:`calc(100% + ${hn.arrowOffset.reference})`}),{}}}};function hm(e){const[t,n]=e.split("-");return{side:t,align:n,hasAlign:n!=null}}var vm={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function Al(e,t){const n=e.devicePixelRatio||1;return Math.round(t*n)/n}function xu(e){return hv(e.boundary)}function pm(e,t){if(e)return im({element:e,padding:t.arrowPadding})}function gm(e,t){if(!dv(t.offset??t.gutter))return Qg(({placement:n})=>{var d,f;const r=((e==null?void 0:e.clientHeight)||0)/2,i=((d=t.offset)==null?void 0:d.mainAxis)??t.gutter,s=typeof i=="number"?i+r:i??r,{hasAlign:a}=hm(n),o=a?void 0:t.shift,u=((f=t.offset)==null?void 0:f.crossAxis)??o;return ro({crossAxis:u,mainAxis:s,alignmentAxis:t.shift})})}function mm(e){if(e.flip)return tm({boundary:xu(e),padding:e.overflowPadding,fallbackPlacements:e.flip===!0?void 0:e.flip})}function bm(e){if(!(!e.slide&&!e.overlap))return em({boundary:xu(e),mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding,limiter:am()})}function ym(e){return nm({padding:e.overflowPadding,apply({elements:t,rects:n,availableHeight:r,availableWidth:i}){const s=t.floating,a=Math.round(n.reference.width);i=Math.floor(i),r=Math.floor(r),s.style.setProperty("--reference-width",`${a}px`),s.style.setProperty("--available-width",`${i}px`),s.style.setProperty("--available-height",`${r}px`)}})}function _m(e){var t;if(e.hideWhenDetached)return rm({strategy:"referenceHidden",boundary:((t=e.boundary)==null?void 0:t.call(e))??"clippingAncestors"})}function wm(e){return e?e===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:e:{}}function xm(e,t,n={}){const r=lm(e,n.getAnchorRect);if(!t||!r)return;const i=Object.assign({},vm,n),s=t.querySelector("[data-part=arrow]"),a=[gm(s,i),mm(i),bm(i),pm(s,i),fm(s),um,ym(i),_m(i),dm],{placement:o,strategy:u,onComplete:d,onPositioned:f}=i,g=async()=>{var E;if(!r||!t)return;const h=await sm(r,t,{placement:o,middleware:a,strategy:u});d==null||d(h),f==null||f({placed:!0});const m=ut(t),v=Al(m,h.x),y=Al(m,h.y);t.style.setProperty("--x",`${v}px`),t.style.setProperty("--y",`${y}px`),i.hideWhenDetached&&(((E=h.middlewareData.hide)==null?void 0:E.referenceHidden)?(t.style.setProperty("visibility","hidden"),t.style.setProperty("pointer-events","none")):(t.style.removeProperty("visibility"),t.style.removeProperty("pointer-events")));const x=t.firstElementChild;if(x){const k=mh(x);t.style.setProperty("--z-index",k.zIndex)}},c=async()=>{n.updatePosition?(await n.updatePosition({updatePosition:g}),f==null||f({placed:!0})):await g()},l=wm(i.listeners),p=i.listeners?Jg(r,t,c,l):pv;return c(),()=>{p==null||p(),f==null||f({placed:!1})}}function Ol(e,t,n={}){const{defer:r,...i}=n,s=r?At:o=>o(),a=[];return a.push(s(()=>{const o=typeof e=="function"?e():e,u=typeof t=="function"?t():t;a.push(xm(o,u,i))})),()=>{a.forEach(o=>o==null?void 0:o())}}var km={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Em(e={}){const{placement:t,sameWidth:n,fitViewport:r,strategy:i="absolute"}=e;return{arrow:{position:"absolute",width:hn.arrowSize.reference,height:hn.arrowSize.reference,[hn.arrowSizeHalf.variable]:`calc(${hn.arrowSize.reference} / 2)`,[hn.arrowOffset.variable]:`calc(${hn.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:t?km[t.split("-")[0]]:void 0,background:hn.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:i,isolation:"isolate",minWidth:n?void 0:"max-content",width:n?"var(--reference-width)":void 0,maxWidth:r?"var(--available-width)":void 0,maxHeight:r?"var(--available-height)":void 0,pointerEvents:t?void 0:"none",top:"0px",left:"0px",transform:t?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}var mr=new WeakMap,Li=new WeakMap,Pi={},Za=0,ku=e=>e&&(e.host||ku(e.parentNode)),Cm=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=ku(n);return r&&e.contains(r)?r:(console.error("[zag-js > ariaHidden] target",n,"in not contained inside",e,". Doing nothing"),null)}).filter(n=>!!n),Sm=e=>e.localName==="next-route-announcer"||e.localName==="script"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),Im=(e,t)=>{const{parentNode:n,markerName:r,controlAttribute:i}=t,s=Cm(n,Array.isArray(e)?e:[e]);Pi[r]||(Pi[r]=new WeakMap);const a=Pi[r],o=[],u=new Set,d=new Set(s),f=c=>{!c||u.has(c)||(u.add(c),f(c.parentNode))};s.forEach(f);const g=c=>{!c||d.has(c)||Array.prototype.forEach.call(c.children,l=>{if(u.has(l))g(l);else try{if(Sm(l))return;const h=l.getAttribute(i)==="true",m=(mr.get(l)||0)+1,v=(a.get(l)||0)+1;mr.set(l,m),a.set(l,v),o.push(l),m===1&&h&&Li.set(l,!0),v===1&&l.setAttribute(r,""),h||l.setAttribute(i,"true")}catch(p){console.error("[zag-js > ariaHidden] cannot operate on ",l,p)}})};return g(n),u.clear(),Za++,()=>{o.forEach(c=>{const l=mr.get(c)-1,p=a.get(c)-1;mr.set(c,l),a.set(c,p),l||(Li.has(c)||c.removeAttribute(i),Li.delete(c)),p||c.removeAttribute(r)}),Za--,Za||(mr=new WeakMap,mr=new WeakMap,Li=new WeakMap,Pi={})}},Tm=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Am=(e,t=Tm(e),n="data-aria-hidden")=>{if(t)return Im(e,{parentNode:t,markerName:n,controlAttribute:"aria-hidden"})},Om=e=>{const t=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(t)};function Rm(e,t={}){const{defer:n=!0}=t,r=n?Om:s=>s(),i=[];return i.push(r(()=>{const a=(typeof e=="function"?e():e).filter(Boolean);a.length!==0&&i.push(Am(a))})),()=>{i.forEach(s=>s==null?void 0:s())}}var Lm=Object.defineProperty,Pm=(e,t,n)=>t in e?Lm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ze=(e,t,n)=>Pm(e,typeof t!="symbol"?t+"":t,n),Rl={activateTrap(e,t){if(e.length>0){const r=e[e.length-1];r!==t&&r.pause()}const n=e.indexOf(t);n===-1||e.splice(n,1),e.push(t)},deactivateTrap(e,t){const n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},Dm=[],Nm=class{constructor(e,t){Ze(this,"trapStack"),Ze(this,"config"),Ze(this,"doc"),Ze(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),Ze(this,"listenerCleanups",[]),Ze(this,"handleFocus",r=>{const i=It(r),s=this.findContainerIndex(i,r)>=0;if(s||Ks(i))s&&(this.state.mostRecentlyFocusedNode=i);else{r.stopImmediatePropagation();let a,o=!0;if(this.state.mostRecentlyFocusedNode)if(jr(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:d}=this.state.containerGroups[u];if(d.length>0){const f=d.findIndex(g=>g===this.state.mostRecentlyFocusedNode);f>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?f+1<d.length&&(a=d[f+1],o=!1):f-1>=0&&(a=d[f-1],o=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(d=>jr(d)>0))||(o=!1);else o=!1;o&&(a=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),a?this.tryFocus(a):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),Ze(this,"handlePointerDown",r=>{const i=It(r);if(!(this.findContainerIndex(i,r)>=0)){if(Zr(this.config.clickOutsideDeactivates,r)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}Zr(this.config.allowOutsideClick,r)||r.preventDefault()}}),Ze(this,"handleClick",r=>{const i=It(r);this.findContainerIndex(i,r)>=0||Zr(this.config.clickOutsideDeactivates,r)||Zr(this.config.allowOutsideClick,r)||(r.preventDefault(),r.stopImmediatePropagation())}),Ze(this,"handleTabKey",r=>{if(this.config.isKeyForward(r)||this.config.isKeyBackward(r)){this.state.recentNavEvent=r;const i=this.config.isKeyBackward(r),s=this.findNextNavNode({event:r,isBackward:i});if(!s)return;Gr(r)&&r.preventDefault(),this.tryFocus(s)}}),Ze(this,"handleEscapeKey",r=>{Fm(r)&&Zr(this.config.escapeDeactivates,r)!==!1&&(r.preventDefault(),this.deactivate())}),Ze(this,"_mutationObserver"),Ze(this,"setupMutationObserver",()=>{const r=this.doc.defaultView||window;this._mutationObserver=new r.MutationObserver(i=>{i.some(a=>Array.from(a.removedNodes).some(u=>u===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),Ze(this,"updateObservedNodes",()=>{var r;(r=this._mutationObserver)==null||r.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(i=>{var s;(s=this._mutationObserver)==null||s.observe(i,{subtree:!0,childList:!0})})}),Ze(this,"getInitialFocusNode",()=>{let r=this.getNodeForOption("initialFocus",{hasFallback:!0});if(r===!1)return!1;if(r===void 0||r&&!Fn(r))if(this.findContainerIndex(this.doc.activeElement)>=0)r=this.doc.activeElement;else{const i=this.state.tabbableGroups[0];r=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else r===null&&(r=this.getNodeForOption("fallbackFocus"));if(!r)throw new Error("Your focus-trap needs to have at least one focusable element");return r.isConnected||(r=this.getNodeForOption("fallbackFocus")),r}),Ze(this,"tryFocus",r=>{if(r!==!1&&r!==Nc(this.doc)){if(!r||!r.focus){this.tryFocus(this.getInitialFocusNode());return}r.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=r,zm(r)&&r.select()}}),Ze(this,"deactivate",r=>{if(!this.state.active)return this;const i={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...r};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),Rl.deactivateTrap(this.trapStack,this);const s=this.getOption(i,"onDeactivate"),a=this.getOption(i,"onPostDeactivate"),o=this.getOption(i,"checkCanReturnFocus"),u=this.getOption(i,"returnFocus","returnFocusOnDeactivate");s==null||s();const d=()=>{Ll(()=>{if(u){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(f)}a==null||a()})};if(u&&o){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return o(f).then(d,d),this}return d(),this}),Ze(this,"pause",r=>{if(this.state.paused||!this.state.active)return this;const i=this.getOption(r,"onPause"),s=this.getOption(r,"onPostPause");return this.state.paused=!0,i==null||i(),this.removeListeners(),this.updateObservedNodes(),s==null||s(),this}),Ze(this,"unpause",r=>{if(!this.state.paused||!this.state.active)return this;const i=this.getOption(r,"onUnpause"),s=this.getOption(r,"onPostUnpause");return this.state.paused=!1,i==null||i(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),s==null||s(),this}),Ze(this,"updateContainerElements",r=>(this.state.containers=Array.isArray(r)?r.filter(Boolean):[r].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),Ze(this,"getReturnFocusNode",r=>{const i=this.getNodeForOption("setReturnFocus",{params:[r]});return i||(i===!1?!1:r)}),Ze(this,"getOption",(r,i,s)=>r&&r[i]!==void 0?r[i]:this.config[s||i]),Ze(this,"getNodeForOption",(r,{hasFallback:i=!1,params:s=[]}={})=>{let a=this.config[r];if(typeof a=="function"&&(a=a(...s)),a===!0&&(a=void 0),!a){if(a===void 0||a===!1)return a;throw new Error(`\`${r}\` was specified but was not a node, or did not return a node`)}let o=a;if(typeof a=="string"){try{o=this.doc.querySelector(a)}catch(u){throw new Error(`\`${r}\` appears to be an invalid selector; error="${u.message}"`)}if(!o&&!i)throw new Error(`\`${r}\` as selector refers to no known node`)}return o}),Ze(this,"findNextNavNode",r=>{const{event:i,isBackward:s=!1}=r,a=r.target||It(i);this.updateTabbableNodes();let o=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(a,i),d=u>=0?this.state.containerGroups[u]:void 0;if(u<0)s?o=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:o=this.state.tabbableGroups[0].firstTabbableNode;else if(s){let f=this.state.tabbableGroups.findIndex(({firstTabbableNode:g})=>a===g);if(f<0&&((d==null?void 0:d.container)===a||Fn(a)&&!Rn(a)&&!(d!=null&&d.nextTabbableNode(a,!1)))&&(f=u),f>=0){const g=f===0?this.state.tabbableGroups.length-1:f-1,c=this.state.tabbableGroups[g];o=jr(a)>=0?c.lastTabbableNode:c.lastDomTabbableNode}else Gr(i)||(o=d==null?void 0:d.nextTabbableNode(a,!1))}else{let f=this.state.tabbableGroups.findIndex(({lastTabbableNode:g})=>a===g);if(f<0&&((d==null?void 0:d.container)===a||Fn(a)&&!Rn(a)&&!(d!=null&&d.nextTabbableNode(a)))&&(f=u),f>=0){const g=f===this.state.tabbableGroups.length-1?0:f+1,c=this.state.tabbableGroups[g];o=jr(a)>=0?c.firstTabbableNode:c.firstDomTabbableNode}else Gr(i)||(o=d==null?void 0:d.nextTabbableNode(a))}}else o=this.getNodeForOption("fallbackFocus");return o}),this.trapStack=t.trapStack||Dm;const n={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(r){return Gr(r)&&!r.shiftKey},isKeyBackward(r){return Gr(r)&&r.shiftKey},...t};this.doc=n.document||Rt(Array.isArray(e)?e[0]:e),this.config=n,this.updateContainerElements(e),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,t){const n=typeof(t==null?void 0:t.composedPath)=="function"?t.composedPath():void 0;return this.state.containerGroups.findIndex(({container:r,tabbableNodes:i})=>r.contains(e)||(n==null?void 0:n.includes(r))||i.find(s=>s===e))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const t=xi(e),n=Uc(e),r=t.length>0?t[0]:void 0,i=t.length>0?t[t.length-1]:void 0,s=n.find(d=>Rn(d)),a=n.slice().reverse().find(d=>Rn(d)),o=!!t.find(d=>jr(d)>0);function u(d,f=!0){const g=t.indexOf(d);return g<0?f?n.slice(n.indexOf(d)+1).find(c=>Rn(c)):n.slice(0,n.indexOf(d)).reverse().find(c=>Rn(c)):t[g+(f?1:-1)]}return{container:e,tabbableNodes:t,focusableNodes:n,posTabIndexesFound:o,firstTabbableNode:r,lastTabbableNode:i,firstDomTabbableNode:s,lastDomTabbableNode:a,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return Rl.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?Ll(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(Xe(this.doc,"focusin",this.handleFocus,!0),Xe(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),Xe(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),Xe(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),Xe(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),Xe(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const t=this.getOption(e,"onActivate"),n=this.getOption(e,"onPostActivate"),r=this.getOption(e,"checkCanFocusTrap");r||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,t==null||t();const i=()=>{r&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),n==null||n()};return r?(r(this.state.containers.concat()).then(i,i),this):(i(),this)}},Gr=e=>e.key==="Tab",Zr=(e,...t)=>typeof e=="function"?e(...t):e,Fm=e=>!e.isComposing&&e.key==="Escape",Ll=e=>setTimeout(e,0),zm=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function Bm(e,t={}){let n;const r=At(()=>{const i=typeof e=="function"?e():e;if(i){n=new Nm(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:i,...t,document:Rt(i)});try{n.activate()}catch{}}});return function(){n==null||n.deactivate(),r()}}var Ka="data-scroll-lock";function Mm(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function Vm(e){const t=e??document,n=t.defaultView??window,{documentElement:r,body:i}=t;if(i.hasAttribute(Ka))return;const a=n.innerWidth-r.clientWidth;i.setAttribute(Ka,"");const o=()=>rv(r,"--scrollbar-width",`${a}px`),u=Mm(r),d=()=>ws(i,{overflow:"hidden",[u]:`${a}px`}),f=()=>{const{scrollX:c,scrollY:l,visualViewport:p}=n,h=(p==null?void 0:p.offsetLeft)??0,m=(p==null?void 0:p.offsetTop)??0,v=ws(i,{position:"fixed",overflow:"hidden",top:`${-(l-Math.floor(m))}px`,left:`${-(c-Math.floor(h))}px`,right:"0",[u]:`${a}px`});return()=>{v==null||v(),n.scrollTo({left:c,top:l,behavior:"instant"})}},g=[o(),ha()?f():d()];return()=>{g.forEach(c=>c==null?void 0:c()),i.removeAttribute(Ka)}}var Um=Dn("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger"),Kt=Um.build(),Eu=e=>{var t;return((t=e.ids)==null?void 0:t.anchor)??`popover:${e.id}:anchor`},Cu=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`popover:${e.id}:trigger`},Ns=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`popover:${e.id}:content`},Su=e=>{var t;return((t=e.ids)==null?void 0:t.positioner)??`popover:${e.id}:popper`},Wm=e=>{var t;return((t=e.ids)==null?void 0:t.arrow)??`popover:${e.id}:arrow`},Fs=e=>{var t;return((t=e.ids)==null?void 0:t.title)??`popover:${e.id}:title`},zs=e=>{var t;return((t=e.ids)==null?void 0:t.description)??`popover:${e.id}:desc`},Hm=e=>{var t;return((t=e.ids)==null?void 0:t.closeTrigger)??`popover:${e.id}:close`},Pl=e=>e.getById(Eu(e)),br=e=>e.getById(Cu(e)),yr=e=>e.getById(Ns(e)),Dl=e=>e.getById(Su(e)),$m=e=>e.getById(Fs(e)),jm=e=>e.getById(zs(e));function qm(e,t){const{state:n,context:r,send:i,computed:s,prop:a,scope:o}=e,u=n.matches("open"),d=r.get("currentPlacement"),f=s("currentPortalled"),g=r.get("renderedElements"),c=Em({...a("positioning"),placement:d});return{portalled:f,open:u,setOpen(l){n.matches("open")!==l&&i({type:l?"OPEN":"CLOSE"})},reposition(l={}){i({type:"POSITIONING.SET",options:l})},getArrowProps(){return t.element({id:Wm(o),...Kt.arrow.attrs,dir:a("dir"),style:c.arrow})},getArrowTipProps(){return t.element({...Kt.arrowTip.attrs,dir:a("dir"),style:c.arrowTip})},getAnchorProps(){return t.element({...Kt.anchor.attrs,dir:a("dir"),id:Eu(o)})},getTriggerProps(){return t.button({...Kt.trigger.attrs,dir:a("dir"),type:"button","data-placement":d,id:Cu(o),"aria-haspopup":"dialog","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":Ns(o),onPointerDown(l){ji(l)&&Ys()&&l.currentTarget.focus()},onClick(l){l.defaultPrevented||i({type:"TOGGLE"})},onBlur(l){i({type:"TRIGGER_BLUR",target:l.relatedTarget})}})},getIndicatorProps(){return t.element({...Kt.indicator.attrs,dir:a("dir"),"data-state":u?"open":"closed"})},getPositionerProps(){return t.element({id:Su(o),...Kt.positioner.attrs,dir:a("dir"),style:c.floating})},getContentProps(){return t.element({...Kt.content.attrs,dir:a("dir"),id:Ns(o),tabIndex:-1,role:"dialog",hidden:!u,"data-state":u?"open":"closed","data-expanded":Ie(u),"aria-labelledby":g.title?Fs(o):void 0,"aria-describedby":g.description?zs(o):void 0,"data-placement":d})},getTitleProps(){return t.element({...Kt.title.attrs,id:Fs(o),dir:a("dir")})},getDescriptionProps(){return t.element({...Kt.description.attrs,id:zs(o),dir:a("dir")})},getCloseTriggerProps(){return t.button({...Kt.closeTrigger.attrs,dir:a("dir"),id:Hm(o),type:"button","aria-label":"close",onClick(l){l.defaultPrevented||(l.stopPropagation(),i({type:"CLOSE"}))}})}}}var Gm={props({props:e}){return{closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,...e,positioning:{placement:"bottom",...e.positioning}}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{currentPlacement:e(()=>({defaultValue:void 0})),renderedElements:e(()=>({defaultValue:{title:!0,description:!0}}))}},computed:{currentPortalled:({prop:e})=>!!e("modal")||!!e("portalled")},watch({track:e,prop:t,action:n}){e([()=>t("open")],()=>{n(["toggleVisibility"])})},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{effects:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackPositioning({context:e,prop:t,scope:n}){e.set("currentPlacement",t("positioning").placement);const r=Pl(n)??br(n);return Ol(r,()=>Dl(n),{...t("positioning"),defer:!0,onComplete(s){e.set("currentPlacement",s.placement)}})},trackDismissableElement({send:e,prop:t,scope:n}){const r=()=>yr(n);let i=!0;return mg(r,{pointerBlocking:t("modal"),exclude:br(n),defer:!0,onEscapeKeyDown(s){var a;(a=t("onEscapeKeyDown"))==null||a(s),!t("closeOnEscape")&&s.preventDefault()},onInteractOutside(s){var a;(a=t("onInteractOutside"))==null||a(s),!s.defaultPrevented&&(i=!(s.detail.focusable||s.detail.contextmenu),t("closeOnInteractOutside")||s.preventDefault())},onPointerDownOutside:t("onPointerDownOutside"),onFocusOutside:t("onFocusOutside"),persistentElements:t("persistentElements"),onDismiss(){e({type:"CLOSE",src:"interact-outside",restoreFocus:i})}})},proxyTabFocus({prop:e,scope:t}){return e("modal")||!e("portalled")?void 0:nv(()=>yr(t),{triggerElement:br(t),defer:!0,onFocus(r){r.focus({preventScroll:!0})}})},hideContentBelow({prop:e,scope:t}){return e("modal")?Rm(()=>[yr(t),br(t)],{defer:!0}):void 0},preventScroll({prop:e,scope:t}){if(e("modal"))return Vm(t.getDoc())},trapFocus({prop:e,scope:t}){return e("modal")?Bm(()=>yr(t),{initialFocus:()=>el({root:yr(t),getInitialEl:e("initialFocusEl"),enabled:e("autoFocus")})}):void 0}},actions:{reposition({event:e,prop:t,scope:n,context:r}){const i=Pl(n)??br(n);Ol(i,()=>Dl(n),{...t("positioning"),...e.options,defer:!0,listeners:!1,onComplete(a){r.set("currentPlacement",a.placement)}})},checkRenderedElements({context:e,scope:t}){At(()=>{Object.assign(e.get("renderedElements"),{title:!!$m(t),description:!!jm(t)})})},setInitialFocus({prop:e,scope:t}){e("modal")||At(()=>{const n=el({root:yr(t),getInitialEl:e("initialFocusEl"),enabled:e("autoFocus")});n==null||n.focus({preventScroll:!0})})},setFinalFocus({event:e,scope:t}){var r;const n=e.restoreFocus??((r=e.previousEvent)==null?void 0:r.restoreFocus);n!=null&&!n||At(()=>{const i=br(t);i==null||i.focus({preventScroll:!0})})},invokeOnOpen({prop:e,flush:t}){t(()=>{var n;(n=e("onOpenChange"))==null||n({open:!0})})},invokeOnClose({prop:e,flush:t}){t(()=>{var n;(n=e("onOpenChange"))==null||n({open:!1})})},toggleVisibility({event:e,send:t,prop:n}){t({type:n("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:e})}}}};Br()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","defaultOpen","open","persistentElements","portalled","positioning"]);var Zm=ue("<button><!></button>"),Km=ue("<div><div></div></div>"),Xm=ue("<div><!> <div><!></div></div>"),Ym=ue('<span data-testid="popover"><!> <div><!></div></span>');function Ur(e,t){const n=oa();be(t,!0);const r=$(t,"arrow",3,!1),i=$(t,"zIndex",3,"auto"),s=$(t,"base",3,""),a=$(t,"classes",3,""),o=$(t,"triggerBase",3,""),u=$(t,"triggerBackground",3,""),d=$(t,"triggerClasses",3,""),f=$(t,"triggerAriaLabel",3,""),g=$(t,"positionerBase",3,""),c=$(t,"positionerClasses",3,""),l=$(t,"contentBase",3,""),p=$(t,"contentBackground",3,""),h=$(t,"contentClasses",3,""),m=$(t,"arrowBase",3,""),v=$(t,"arrowBackground",3,"!bg-surface-200 dark:!bg-surface-800"),y=$(t,"arrowClasses",3,""),x=Fe(t,["$$slots","$$events","$$legacy","arrow","zIndex","base","classes","triggerBase","triggerBackground","triggerClasses","triggerAriaLabel","positionerBase","positionerClasses","contentBase","contentBackground","contentClasses","arrowBase","arrowBackground","arrowClasses","trigger","content","onclick"]),E=ma(Gm,()=>({id:n,...x})),k=ce(()=>qm(E,ga)),T=ce(()=>Wv(w(k).getTriggerProps(),{onclick:t.onclick}));var A=Ym(),L=j(A);{var O=R=>{var b=Zm();Ge(b,()=>({...w(T),class:`${o()??""} ${u()??""} ${d()??""}`,type:"button","aria-label":f()}));var D=j(b);Pe(D,()=>t.trigger),H(b),ee(R,b)};Le(L,R=>{t.trigger&&R(O)})}var B=Z(L,2);Ge(B,R=>({...R,class:`${g()??""} ${c()??""}`}),[()=>w(k).getPositionerProps()]);var F=j(B);{var C=R=>{var b=Xm();Ge(b,G=>({...G,style:`z-index: ${i()??""};`}),[()=>w(k).getContentProps()]);var D=j(b);{var V=G=>{var te=Km();Ge(te,M=>({...M}),[()=>w(k).getArrowProps()]);var N=j(te);Ge(N,M=>({...M,class:`${m()??""} ${v()??""} ${y()??""}`}),[()=>w(k).getArrowTipProps()]),H(te),ee(G,te)};Le(D,G=>{r()&&G(V)})}var U=Z(D,2),X=j(U);Pe(X,()=>t.content??Ne),H(U),H(b),Te(()=>st(U,1,`${l()??""} ${p()??""} ${h()??""}`)),Rd(3,b,()=>Gv,()=>({duration:100})),ee(R,b)};Le(F,R=>{w(k).open&&R(C)})}H(B),Sd(B,(R,b)=>$a==null?void 0:$a(R,b),()=>({disabled:!w(k).portalled})),H(A),Te(()=>st(A,1,`${s()??""} ${a()??""}`)),ee(e,A),ye()}var Xa={exports:{}},Nl;function Jm(){return Nl||(Nl=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function a(d,f){if(!i[d]){if(!r[d]){var g=typeof Pn=="function"&&Pn;if(!f&&g)return g(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[d]={exports:{}};r[d][0].call(l.exports,function(p){var h=r[d][1][p];return a(h||p)},l,l.exports,n,r,i,s)}return i[d].exports}for(var o=typeof Pn=="function"&&Pn,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(n,r,i){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}r.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(f){if(!o(f)||f<0||isNaN(f))throw TypeError("n must be a positive number");return this._maxListeners=f,this},s.prototype.emit=function(f){var g,c,l,p,h,m;if(this._events||(this._events={}),f==="error"&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if(g=arguments[1],g instanceof Error)throw g;var v=new Error('Uncaught, unspecified "error" event. ('+g+")");throw v.context=g,v}if(c=this._events[f],d(c))return!1;if(a(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:p=Array.prototype.slice.call(arguments,1),c.apply(this,p)}else if(u(c))for(p=Array.prototype.slice.call(arguments,1),m=c.slice(),l=m.length,h=0;h<l;h++)m[h].apply(this,p);return!0},s.prototype.addListener=function(f,g){var c;if(!a(g))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",f,a(g.listener)?g.listener:g),this._events[f]?u(this._events[f])?this._events[f].push(g):this._events[f]=[this._events[f],g]:this._events[f]=g,u(this._events[f])&&!this._events[f].warned&&(d(this._maxListeners)?c=s.defaultMaxListeners:c=this._maxListeners,c&&c>0&&this._events[f].length>c&&(this._events[f].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[f].length),typeof console.trace=="function"&&console.trace())),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(f,g){if(!a(g))throw TypeError("listener must be a function");var c=!1;function l(){this.removeListener(f,l),c||(c=!0,g.apply(this,arguments))}return l.listener=g,this.on(f,l),this},s.prototype.removeListener=function(f,g){var c,l,p,h;if(!a(g))throw TypeError("listener must be a function");if(!this._events||!this._events[f])return this;if(c=this._events[f],p=c.length,l=-1,c===g||a(c.listener)&&c.listener===g)delete this._events[f],this._events.removeListener&&this.emit("removeListener",f,g);else if(u(c)){for(h=p;h-- >0;)if(c[h]===g||c[h].listener&&c[h].listener===g){l=h;break}if(l<0)return this;c.length===1?(c.length=0,delete this._events[f]):c.splice(l,1),this._events.removeListener&&this.emit("removeListener",f,g)}return this},s.prototype.removeAllListeners=function(f){var g,c;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[f]&&delete this._events[f],this;if(arguments.length===0){for(g in this._events)g!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[f],a(c))this.removeListener(f,c);else if(c)for(;c.length;)this.removeListener(f,c[c.length-1]);return delete this._events[f],this},s.prototype.listeners=function(f){var g;return!this._events||!this._events[f]?g=[]:a(this._events[f])?g=[this._events[f]]:g=this._events[f].slice(),g},s.prototype.listenerCount=function(f){if(this._events){var g=this._events[f];if(a(g))return 1;if(g)return g.length}return 0},s.listenerCount=function(f,g){return f.listenerCount(g)};function a(f){return typeof f=="function"}function o(f){return typeof f=="number"}function u(f){return typeof f=="object"&&f!==null}function d(f){return f===void 0}},{}],2:[function(n,r,i){var s,a,o,u,d;d=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),s=d.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],o=s[1]==="ie"&&document.documentMode,a={name:s[1]==="version"?s[3]:s[1],version:o||parseFloat(s[1]==="opera"&&s[4]?s[4]:s[2]),platform:{name:d.match(/ip(?:ad|od|hone)/)?"ios":(d.match(/(?:webos|android)/)||u.match(/mac|win|linux/)||["other"])[0]}},a[a.name]=!0,a[a.name+parseInt(a.version,10)]=!0,a.platform[a.platform.name]=!0,r.exports=a},{}],3:[function(n,r,i){var s,a,o,u=function(c,l){for(var p in l)d.call(l,p)&&(c[p]=l[p]);function h(){this.constructor=c}return h.prototype=l.prototype,c.prototype=new h,c.__super__=l.prototype,c},d={}.hasOwnProperty,f=[].indexOf||function(c){for(var l=0,p=this.length;l<p;l++)if(l in this&&this[l]===c)return l;return-1},g=[].slice;s=n("events").EventEmitter,o=n("./browser.coffee"),a=function(c){var l,p;u(h,c),l={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},p={delay:500,copy:!1};function h(m){var v,y,x;this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(m);for(y in l)x=l[y],(v=this.options)[y]==null&&(v[y]=x)}return h.prototype.setOption=function(m,v){if(this.options[m]=v,this._canvas!=null&&(m==="width"||m==="height"))return this._canvas[m]=v},h.prototype.setOptions=function(m){var v,y,x;y=[];for(v in m)d.call(m,v)&&(x=m[v],y.push(this.setOption(v,x)));return y},h.prototype.addFrame=function(m,v){var y,x;v==null&&(v={}),y={},y.transparent=this.options.transparent;for(x in p)y[x]=v[x]||p[x];if(this.options.width==null&&this.setOption("width",m.width),this.options.height==null&&this.setOption("height",m.height),typeof ImageData<"u"&&ImageData!==null&&m instanceof ImageData)y.data=m.data;else if(typeof CanvasRenderingContext2D<"u"&&CanvasRenderingContext2D!==null&&m instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext<"u"&&WebGLRenderingContext!==null&&m instanceof WebGLRenderingContext)v.copy?y.data=this.getContextData(m):y.context=m;else if(m.childNodes!=null)v.copy?y.data=this.getImageData(m):y.image=m;else throw new Error("Invalid image");return this.frames.push(y)},h.prototype.render=function(){var m,v,y;if(this.running)throw new Error("Already running");if(this.options.width==null||this.options.height==null)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=(function(){var x,E,k;for(k=[],x=0,E=this.frames.length;0<=E?x<E:x>E;0<=E?++x:--x)k.push(null);return k}).call(this),v=this.spawnWorkers(),this.options.globalPalette===!0)this.renderNextFrame();else for(m=0,y=v;0<=y?m<y:m>y;0<=y?++m:--m)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},h.prototype.abort=function(){for(var m;m=this.activeWorkers.shift(),m!=null;)this.log("killing active worker"),m.terminate();return this.running=!1,this.emit("abort")},h.prototype.spawnWorkers=function(){var m,v,y;return m=Math.min(this.options.workers,this.frames.length),(function(){y=[];for(var x=v=this.freeWorkers.length;v<=m?x<m:x>m;v<=m?x++:x--)y.push(x);return y}).apply(this).forEach(function(x){return function(E){var k;return x.log("spawning worker "+E),k=new Worker(x.options.workerScript),k.onmessage=function(T){return x.activeWorkers.splice(x.activeWorkers.indexOf(k),1),x.freeWorkers.push(k),x.frameFinished(T.data)},x.freeWorkers.push(k)}}(this)),m},h.prototype.frameFinished=function(m){var v,y;if(this.log("frame "+m.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[m.index]=m,this.options.globalPalette===!0&&(this.options.globalPalette=m.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(v=1,y=this.freeWorkers.length;1<=y?v<y:v>y;1<=y?++v:--v)this.renderNextFrame();return f.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},h.prototype.finishRendering=function(){var m,v,y,x,E,k,T,A,L,O,B,F,C,R,b,D;for(A=0,R=this.imageParts,E=0,L=R.length;E<L;E++)v=R[E],A+=(v.data.length-1)*v.pageSize+v.cursor;for(A+=v.pageSize-v.cursor,this.log("rendering finished - filesize "+Math.round(A/1e3)+"kb"),m=new Uint8Array(A),F=0,b=this.imageParts,k=0,O=b.length;k<O;k++)for(v=b[k],D=v.data,y=T=0,B=D.length;T<B;y=++T)C=D[y],m.set(C,F),y===v.data.length-1?F+=v.cursor:F+=v.pageSize;return x=new Blob([m],{type:"image/gif"}),this.emit("finished",x,m)},h.prototype.renderNextFrame=function(){var m,v,y;if(this.freeWorkers.length===0)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return m=this.frames[this.nextFrame++],y=this.freeWorkers.shift(),v=this.getTask(m),this.log("starting frame "+(v.index+1)+" of "+this.frames.length),this.activeWorkers.push(y),y.postMessage(v)},h.prototype.getContextData=function(m){return m.getImageData(0,0,this.options.width,this.options.height).data},h.prototype.getImageData=function(m){var v;return this._canvas==null&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),v=this._canvas.getContext("2d"),v.setFill=this.options.background,v.fillRect(0,0,this.options.width,this.options.height),v.drawImage(m,0,0),this.getContextData(v)},h.prototype.getTask=function(m){var v,y;if(v=this.frames.indexOf(m),y={index:v,last:v===this.frames.length-1,delay:m.delay,transparent:m.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:o.name==="chrome"},m.data!=null)y.data=m.data;else if(m.context!=null)y.data=this.getContextData(m.context);else if(m.image!=null)y.data=this.getImageData(m.image);else throw new Error("Invalid frame");return y},h.prototype.log=function(){var m;if(m=1<=arguments.length?g.call(arguments,0):[],!!this.options.debug)return console.log.apply(console,m)},h}(s),r.exports=a},{"./browser.coffee":2,events:1}]},{},[3])(3)})}(Xa)),Xa.exports}var Qm=Jm();const eb=zr(Qm),tb=(e,t,n,r,i)=>{const{frames:s}=Bn,a=Math.floor(t()/s)*s,o=`${[...Array(3)].map(()=>th(0,4).toString(16).padStart(2,"0")).join("")}`,u=new eb({workers:2,quality:10,width:n.width,height:n.height,workerScript:"gif.worker.js",transparent:`0x${o}`}),d=1e3/r()|0;for(let f=0;f<s;f++){const g=document.createElement("canvas");g.width=n.width,g.height=n.height;const c=g.getContext("2d",{willReadFrequently:!0});if(!c)return;c.fillStyle=`#${o}`,c.fillRect(0,0,n.width,n.height);const l=zt.get(a+f);l&&c.drawImage(l,0,0),u.addFrame(g,{delay:d})}u.on("finished",f=>{const g=URL.createObjectURL(f);i(g,`frames_${a+1}.gif`)}),u.render()},nb=async(e,t)=>{const n=await eh(Bn),r=URL.createObjectURL(n);t(r,"cursors.zip")};var rb=(e,t)=>{Q(t,!1)},ib=ue('<header class="flex justify-between"><p class="font-bold text-xl">歩行グラの出力</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="space-y-4"><p class="opacity-60">ダウンロードします</p> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition" aria-label="submit">ANI出力</button></div> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition" aria-label="submit">GIF出力</button></div> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition" aria-label="submit">ZIP出力</button></div> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition" aria-label="submit">PNG出力</button></div></article>',1);function ab(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(tr,"$activeIndex",n),s=()=>Ye(Mn,"$fps",n);let a=ge(!1);const o=(f,g)=>{const c=document.createElement("a");c.href=f,c.download=g,c.click()},u=()=>{const{width:f,height:g,frames:c,ways:l}=Bn,p=document.createElement("canvas");p.width=f*c,p.height=g*l;const h=p.getContext("2d",{willReadFrequently:!0});if(!h)return;h.imageSmoothingEnabled=!1;for(let v=0;v<l;v++)for(let y=0;y<c;y++){const x=Xt(y,v),E=zt.get(x);E&&h.drawImage(E,0,0,E.width,E.height,y*f,v*g,f,g)}const m=p.toDataURL("image/png");o(m,"sprite_sheet.png")},d=()=>{const{width:f,height:g,frames:c,ways:l}=Bn,p=new Pc;for(let h=0;h<l;h++)for(let m=0;m<c;m++){const v=Xt(m,h),y=zt.get(v);if(!y)continue;const x=document.createElement("canvas");x.width=f,x.height=g;const E=x.getContext("2d",{willReadFrequently:!0});if(!E)continue;E.imageSmoothingEnabled=!1,E.drawImage(y,0,0,y.width,y.height,0,0,f,g);const T=x.toDataURL("image/png").split(",")[1];p.file(`frame_${h+1}_${m+1}.png`,T,{base64:!0})}p.generateAsync({type:"blob"}).then(h=>{const m=URL.createObjectURL(h);o(m,"frames.zip")})};Ur(e,{get open(){return w(a)},onOpenChange:c=>Q(a,c.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:c=>{ot();var l=sr("出力");ee(c,l)},content:c=>{var l=ib(),p=pe(l),h=Z(j(p),2);h.__click=[rb,a];var m=j(h);Fr(m,{}),H(h),H(p);var v=Z(p,2),y=Z(j(v),2),x=j(y);x.__click=[nb,o],H(y);var E=Z(y,2),k=j(E);k.__click=[tb,i,t,s,o],H(E);var T=Z(E,2),A=j(T);A.__click=d,H(T);var L=Z(T,2),O=j(L);O.__click=u,H(L),H(v),ee(c,l)},$$slots:{trigger:!0,content:!0}}),ye(),r()}dt(["click"]);const Iu=e=>{const t=Wi(),{width:n,height:r,frames:i,ways:s}=Bn,a=document.createElement("canvas");a.width=Dt(Yt)?n:n*i,a.height=Dt(Yt)?r:r*s;const o=a.getContext("2d",{willReadFrequently:!0});if(!o)return;if(o.imageSmoothingEnabled=!1,Dt(Yt)){const g=e.naturalWidth,c=e.naturalHeight,l=Math.min(n/g,r/c),p=g*l,h=c*l,m=(n-p)/2,v=(r-h)/2;o.drawImage(e,m,v,p,h)}else o.drawImage(e,0,0);const{data:u}=o.getImageData(0,0,a.width,a.height),d=Dt(Yt)?1:s,f=Dt(Yt)?1:i;for(let g=0;g<d;g++)for(let c=0;c<f;c++){const l=new en("半透明"),p=new en("不透明");let h=0,m=0;const v=n*f;for(let T=0;T<r;T++)for(let A=0;A<n;A++){const L=c*n+A,B=((g*r+T)*v+L)*4,[F,C,R,b]=u.subarray(B,B+4);b&&(b===255?(Nn.value=`rgb(${F}, ${C}, ${R})`,p.drawByDot(A*t,T*t),p.used=!0):(Nn.value=`rgb(${F}, ${C}, ${R})`,l.drawByDot(A*t,T*t),l.used=!0,h+=b,m++))}p.trace(),l.trace(),p.opacity=Dt(rr),m&&(l.opacity=Dt(rr)*h/m/255|0);const y=Xt(c,g),x=[l.used?l:[],p,Dt(Or)?new en("トレース台"):[]].flat();nr.set(y,x);const E=Cr();zt.set(y,E);const k=E.toDataURL("image/png");li.set(y,k),Ar([])}},sb=[e=>e==="i.imgur.com",e=>e.endsWith("github.io"),e=>e.endsWith("raw.githubusercontent.com"),e=>e==="cdn.jsdelivr.net",e=>e==="upload.wikimedia.org",e=>e==="images.unsplash.com",e=>e.endsWith("googleusercontent.com"),e=>e.endsWith("picsum.photos"),e=>e==="placehold.co",e=>e==="dummyimage.com"],ho=e=>{const t=bn(qs,e);if(!t.success)return"";const{output:n}=t;try{const r=new URL(n);if(r.protocol==="data:"||sb.some(i=>i(r.hostname)))return n}catch{return""}return nh([`https://api.allorigins.win/raw?url=${n}`,`https://corsproxy.io/?${n}`,`https://api.codetabs.com/v1/proxy?quest=${n}`])};function ob(e,t){var r,i;const n=(i=(r=e.target)==null?void 0:r.files)==null?void 0:i[0];if(n){const s=new FileReader;s.onload=()=>{const a=bn(qs,s.result);a.success&&je(_n,a.output)},s.readAsDataURL(n)}}const lb=async(e,t,n,r,i,s)=>{if(!t()||!w(n)||w(n).naturalWidth===0||!confirm("歩行グラを読み込みますか？（※全てのデータは失われます）"))return;r.init(),Iu(w(n));const a=nr.get(0);a&&(Ar(a),i(a[a.length-1]),s(performance.now()))};var cb=(e,t)=>{Q(t,!1)},ub=ue("<option> </option>"),db=ue('<div class="mt-4 max-h-32 overflow-auto border rounded p-2"><img alt="インポート画像" class="max-w-96 object-contain rounded border" crossorigin="anonymous"/></div>'),fb=ue('<header class="flex justify-between"><p class="font-bold text-xl">歩行グラの読み込み</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="space-y-4"><p class="opacity-60">先にリサイズしてください</p> <a href="https://github.com/rpgja/rpgen-walk/tree/main?tab=readme-ov-file#%E5%90%8C%E6%A2%B1%E7%B4%A0%E6%9D%90%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6--about-included-assets" target="_blank" rel="noopener noreferrer" class="text-blue-800 hover:underline">同梱素材の利用規約はこちら</a> <label class="flex flex-col"><span class="label-text font-medium">テンプレ</span> <select class="select select-bordered w-full bg-white"><option>自動入力</option><!></select></label> <div class="relative flex-1"><input name="url" type="url" placeholder="画像のURLを入力" class="input input-bordered w-full pr-8 bg-white"/> <!></div> <div><label class="label"><span class="label-text">ローカル保存ファイルから読み込む</span> <input class="input" type="file" accept="image/*"/></label></div> <!> <div class="space-y-0"><div class="flex items-center gap-4 max-w-[360px]"><div class="w-[20ch] flex justify-between font-mono text-sm tabular-nums"><span class="text-left">不透明度</span> <span class="text-right"> </span></div> <!></div> <label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> <p>トレース台を追加する</p></label> <label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> <p>1枚絵として読み込む</p></label></div> <div class="pt-2"><button type="button" class="btn btn-primary w-full bg-blue-500 text-white rounded hover:bg-blue-600" aria-label="submit">読み込む</button></div></article>',1);function hb(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(_n,"$imageUrl",n),s=()=>Ye(rr,"$opacity",n),a=()=>Ye(Or,"$isAddEmptyLayer",n),o=()=>Ye(Yt,"$isSimpleImport",n);let u=$(t,"activeLayer",15),d=$(t,"initTimestamp",15),f=ge(!1),g=ge(void 0),c;const l=[{label:"鍵山雛",url:"https://rpgen.cc/dq/sAnims/res/1920.png"},{label:"ドレミー",url:"https://rpgen.cc/dq/sAnims/res/1919.png"},{label:"八雲紫",url:"https://rpgen.cc/dq/sAnims/res/1282.png"},{label:"天子",url:"https://rpgen.cc/dq/sAnims/res/1891.png"},{label:"純狐",url:"https://rpgen.cc/dq/sAnims/res/1894.png"},{label:"ヘカーティア",url:"https://rpgen.cc/dq/sAnims/res/1884.png"},{label:"妹紅",url:"https://rpgen.cc/dq/sAnims/res/1874.png"},{label:"小鈴",url:"https://rpgen.cc/dq/sAnims/res/1526.png"},{label:"阿求",url:"https://rpgen.cc/dq/sAnims/res/1527.png"},{label:"マミゾウ",url:"https://rpgen.cc/dq/sAnims/res/1882.png"},{label:"袿姫",url:"https://rpgen.cc/dq/sAnims/res/2116.png"},{label:"残無",url:"https://rpgen.cc/dq/sAnims/res/2115.png"}];Ur(e,{get open(){return w(f)},onOpenChange:m=>Q(f,m.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px] w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:m=>{ot();var v=sr("読み込み");ee(m,v)},content:m=>{var v=fb(),y=pe(v),x=Z(j(y),2);x.__click=[cb,f];var E=j(x);Fr(E,{}),H(x),H(y);var k=Z(y,2),T=Z(j(k),4),A=Z(j(T),2);A.__change=fe=>{const Oe=l.find(De=>De.label===fe.currentTarget.value);Oe&&je(_n,Oe.url)};var L=j(A);L.value=L.__value="";var O=Z(L);pt(O,17,()=>l,vt,(fe,Oe,De,_)=>{var K=ub(),z={},I=j(K,!0);H(K),Te(()=>{z!==(z=w(Oe).label)&&(K.value=(K.__value=w(Oe).label)??""),nt(I,w(Oe).label)}),ee(fe,K)}),H(A),H(T);var B=Z(T,2),F=j(B);We(F);var C=Z(F,2);di(C,{class:"absolute right-2 top-2.5 text-gray-400",size:16,onclick:()=>{je(_n,"")}}),H(B);var R=Z(B,2),b=j(R),D=Z(j(b),2);D.__change=[ob,i],kt(D,fe=>c=fe,()=>c),H(b),H(R);var V=Z(R,2);{var U=fe=>{var Oe=db(),De=j(Oe);kt(De,_=>Q(g,_),()=>w(g)),H(Oe),Te(_=>Ve(De,"src",_),[()=>ho(i())]),ee(fe,Oe)};Le(V,fe=>{i()&&fe(U)})}var X=Z(V,2),G=j(X),te=j(G),N=Z(j(te),2),M=j(N);H(N),H(te);var oe=Z(te,2);const ae=ce(()=>[s()]);io(oe,{get value(){return w(ae)},onValueChange:fe=>je(rr,fe.value[0]),markers:[25,50,75]}),H(G);var q=Z(G,2),_e=j(q);We(_e),ot(2),H(q);var xe=Z(q,2),de=j(xe);We(de),ot(2),H(xe),H(X);var Ee=Z(X,2),me=j(Ee);me.__click=[lb,i,g,t,u,d],H(Ee),H(k),Te(()=>nt(M,`${s()??""}%`)),yn(F,i,fe=>je(_n,fe)),si(_e,a,fe=>je(Or,fe)),si(de,o,fe=>je(Yt,fe)),ee(m,v)},$$slots:{trigger:!0,content:!0}}),ye(),r()}dt(["click","change"]);function vb(e,t){var r,i;const n=(i=(r=e.target)==null?void 0:r.files)==null?void 0:i[0];if(n){const s=new FileReader;s.onload=()=>{Q(t,s.result,!0)},s.readAsDataURL(n)}}var pb=(e,t,n)=>{const r=t.find(i=>i.label===e.currentTarget.value);r&&Q(n,r.url,!0)},gb=ue("<option> </option>"),mb=ue('<div class="mt-4 max-h-96 overflow-auto border rounded p-2"><img alt="模写用" class="w-full max-w-96 object-contain rounded border"/></div>'),bb=ue('<div class="space-y-4 p-4 bg-surface-100 rounded-xl"><h2 class="text-lg font-semibold">模写用</h2> <label class="flex flex-col"><span class="label-text font-medium">テンプレ</span> <select class="select select-bordered w-full bg-white"><option>自動入力</option><!></select></label> <div class="relative flex-1"><input name="url" type="url" placeholder="画像のURLを入力" class="input input-bordered w-full pr-8 bg-white"/> <!></div> <div><label class="label"><span class="label-text">ローカル保存ファイルから読み込む</span> <input class="input" type="file" accept="image/*"/></label></div> <!></div>');function yb(e,t){be(t,!0);let n=ge(""),r;const i=[{label:"鍵山雛",url:"https://i.imgur.com/Wd713Fe.png"},{label:"ドレミー",url:"https://i.imgur.com/vENwj1P.png"},{label:"八雲紫",url:"https://i.imgur.com/OLpXzvs.png"},{label:"カナ",url:"https://i.imgur.com/rgekbAz.png"},{label:"天子",url:"https://i.imgur.com/R6oYJge.png"},{label:"フラン",url:"https://i.imgur.com/Y126OqA.png"},{label:"パチュリー",url:"https://i.imgur.com/azs1Ko1.png"}];var s=bb(),a=Z(j(s),2),o=Z(j(a),2);o.__change=[pb,i,n];var u=j(o);u.value=u.__value="";var d=Z(u);pt(d,17,()=>i,vt,(y,x)=>{var E=gb(),k={},T=j(E,!0);H(E),Te(()=>{k!==(k=w(x).label)&&(E.value=(E.__value=w(x).label)??""),nt(T,w(x).label)}),ee(y,E)}),H(o),H(a);var f=Z(a,2),g=j(f);We(g);var c=Z(g,2);di(c,{class:"absolute right-2 top-2.5 text-gray-400",size:16,onclick:()=>{Q(n,"")}}),H(f);var l=Z(f,2),p=j(l),h=Z(j(p),2);h.__change=[vb,n],kt(h,y=>r=y,()=>r),H(p),H(l);var m=Z(l,2);{var v=y=>{var x=mb(),E=j(x);H(x),Te(()=>Ve(E,"src",w(n))),ee(y,x)};Le(m,y=>{w(n)&&y(v)})}H(s),yn(g,()=>w(n),y=>Q(n,y)),ee(e,s),ye()}dt(["change"]);const _b=(e,t,n)=>{t(new en(`レイヤー #${w(n).length+1}`))};var wb=()=>{},xb=(e,t,n)=>t(w(n)),kb=(e,t,n)=>t(w(n)),Eb=(e,t,n)=>t(w(n)),Cb=ue('<li><div tabindex="0" role="button" class="flex flex-grow items-center space-x-2"><div class="gimp-checkered-background relative w-8 h-8 rounded overflow-hidden"><div class="w-full h-full bg-center bg-cover"></div></div> <div><p class="text-sm font-medium truncate max-w-[128px]"> </p> <div class="flex items-center text-xs text-gray-500 space-x-1"><!> <!> <span> </span></div></div></div> <div class="flex space-x-1"><button class="p-1 text-gray-500 hover:text-blue-500"><!></button> <button class="p-1 text-gray-500 hover:text-blue-500"><!></button></div></li>'),Sb=ue('<div class="p-4 bg-white rounded shadow-md w-full max-w-md mx-auto max-h-[50vh] flex flex-col select-none"><div class="flex items-center text-xs text-gray-500"><!> 最背面</div> <ul class="divide-y divide-gray-200 overflow-auto flex-1 min-h-0"></ul> <div class="flex items-center text-xs text-gray-500"><!> 最前面</div> <button class="flex items-center justify-center py-1 bg-blue-500 text-white rounded hover:bg-blue-600"><!> レイヤー追加</button></div>');function Ib(e,t){be(t,!0);let n=$(t,"activeLayer",15,void 0),r=ge(tt([]));Me(()=>{n()&&Q(r,Er(),!0)});const i=p=>{const{prev:h}=p;h&&(p.swap(h.index),Q(r,Er(),!0))},s=p=>{const{next:h}=p;h&&(p.swap(h.index),Q(r,Er(),!0))};var a=Sb(),o=j(a),u=j(o);Kn(u,{class:"w-4 h-4 mr-1"}),ot(),H(o);var d=Z(o,2);pt(d,21,()=>w(r),vt,(p,h,m)=>{var v=Se(),y=pe(v);zi(y,()=>n()===w(h)?t.pointerupTimestamp:"noop",x=>{var E=Cb(),k=j(E);k.__keydown=[wb],k.__click=[xb,n,h];var T=j(k),A=j(T);H(T);var L=Z(T,2),O=j(L),B=j(O,!0);H(O);var F=Z(O,2),C=j(F);{var R=q=>{ms(q,{class:"w-3 h-3",onclick:()=>w(h).locked=!1})},b=q=>{ff(q,{class:"w-3 h-3",onclick:()=>w(h).locked=!0})};Le(C,q=>{w(h).locked?q(R):q(b,!1)})}var D=Z(C,2);{var V=q=>{gs(q,{class:"w-3 h-3",onclick:()=>w(h).visible=!1})},U=q=>{lf(q,{class:"w-3 h-3",onclick:()=>w(h).visible=!0})};Le(D,q=>{w(h).visible?q(V):q(U,!1)})}var X=Z(D,2),G=j(X);H(X),H(F),H(L),H(k);var te=Z(k,2),N=j(te);N.__click=[kb,s,h];var M=j(N);ps(M,{class:"w-4 h-4"}),H(N);var oe=Z(N,2);oe.__click=[Eb,i,h];var ae=j(oe);Kn(ae,{class:"w-4 h-4"}),H(oe),H(te),H(E),Te(q=>{st(E,1,`flex items-center justify-between p-2 cursor-pointer ${n()===w(h)?"bg-blue-100":"hover:bg-gray-100"}`),Qt(A,`background-image: url(${q??""});`),nt(B,w(h).name),nt(G,`${w(h).opacity??""}%`)},[()=>w(h).used?w(h).canvas.toDataURL("image/png"):"https://placehold.co/32x32?text=new"]),ee(x,E)}),ee(p,v)}),H(d);var f=Z(d,2),g=j(f);ps(g,{class:"w-4 h-4 mr-1"}),ot(),H(f);var c=Z(f,2);c.__click=[_b,n,r];var l=j(c);bf(l,{class:"w-4 h-4 mr-2"}),ot(),H(c),H(a),ee(e,a),ye()}dt(["keydown","click"]);const Tb=async()=>{for(const e of Er()){const{canvas:t,ctx:n}=e,r=n.getImageData(0,0,t.width,t.height),i=await createImageBitmap(r);e.clear(),n.save(),n.scale(-1,1),n.drawImage(i,-t.width,0),n.restore(),e.trace()}},Ab=(e,t)=>{const r=Cr().getContext("2d",{willReadFrequently:!0});if(!r)return;const{width:i,height:s}=Bn,a=Wi(),{data:o}=r.getImageData(0,0,i*a,s*a);for(let u=0;u<s;u++)for(let d=0;d<i;d++){const f=(d+i*u*a)*a*4,[g,c,l,p]=o.subarray(f,f+4);if(!p)for(let h=0;h<9;h++){if(h===4)continue;const m=d+h%3-1,v=u+(h/3|0)-1;if(m<0||m>=i||v<0||v>=s)continue;const y=(m+i*v*a)*a*4,[x,E,k,T]=o.subarray(y,y+4);if(T){t.activeLayer.drawByDot(d*a,u*a);break}}}t.activeLayer.trace()};var Ob=(e,t)=>{Q(t,!1)},Rb=ue('<header class="flex justify-between"><p class="font-bold text-xl">自動操作</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="space-y-4"><p class="opacity-60">自動お絵描き</p> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition" aria-label="submit">左右反転</button></div> <div class="pt-2"><button type="button" class="w-full px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition" aria-label="submit">輪郭塗り</button></div></article>',1);function Lb(e,t){be(t,!0);let n=ge(!1);Ur(e,{get open(){return w(n)},onOpenChange:s=>Q(n,s.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:s=>{ot();var a=sr("マクロ");ee(s,a)},content:s=>{var a=Rb(),o=pe(a),u=Z(j(o),2);u.__click=[Ob,n];var d=j(u);Fr(d,{}),H(u),H(o);var f=Z(o,2),g=Z(j(f),2),c=j(g);c.__click=[Tb],H(g);var l=Z(g,2),p=j(l);p.__click=[Ab,t],H(l),H(f),ee(s,a)},$$slots:{trigger:!0,content:!0}}),ye()}dt(["click"]);var Pb=(e,t)=>{Q(t,!1)},Db=ue('<header class="flex justify-between"><p class="font-bold text-xl">操作方法</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="opacity-60"><p>右クリック：カラーピッカー</p> <p>Ctrl + 1：ペン</p> <p>Ctrl + 2：消しゴム</p> <p>Ctrl + 3：カラーピッカー</p> <p>Ctrl + 4：塗りつぶし</p> <p>Ctrl + 5：ハンドツール</p> <p>Ctrl + E：常に消しゴム</p> <p>Ctrl + F：左右反転</p> <p>Ctrl + G：グリッド表示</p> <p>Ctrl + D：ダークモード</p> <p>Ctrl + O：オニオンスキン</p> <p>Ctrl + Z：戻す</p> <p>Ctrl + Shift + Z：やり直す</p> <p>Ctrl + S：保存</p> <p>Ctrl + C：コピー</p> <p>Ctrl + V：貼り付け</p> <p>画像ドロップ：貼り付け</p> <p>モニターサイズは24インチ以上推奨</p></article>',1);function Nb(e){let t=ge(!1);Ur(e,{get open(){return w(t)},onOpenChange:i=>Q(t,i.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:i=>{ot();var s=sr("説明書");ee(i,s)},content:i=>{var s=Db(),a=pe(s),o=Z(j(a),2);o.__click=[Pb,t];var u=j(o);Fr(u,{}),H(o),H(a),ot(2),ee(i,s)},$$slots:{trigger:!0,content:!0}})}dt(["click"]);var Fb=ue('<canvas class="border border-gray-300 gimp-checkered-background"></canvas>');function zb(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(tr,"$activeIndex",n),s=()=>Ye(Mn,"$fps",n),a=48*4;let o=ge(0);Me(()=>{t.initTimestamp&&Q(o,Math.floor(a*lr/or),!0)});const u=c=>{d=requestAnimationFrame(u);const{frames:l}=Bn,p=Math.floor(i()/l)*l,h=Ot,y=(c/1e3*s()|0)%h;if(!p&&p!==0||!w(f))return;const x=w(f).getContext("2d",{willReadFrequently:!0});if(!x)return;x.clearRect(0,0,w(f).width,w(f).height);const E=zt.get(p+y);E&&x.drawImage(E,0,0,w(f).width,w(f).height)};Me(()=>{if(w(f))return u(0),()=>cancelAnimationFrame(d)});let d,f=ge(void 0);var g=Fb();Ve(g,"width",a),kt(g,c=>Q(f,c),()=>w(f)),Te(()=>Ve(g,"height",w(o))),ee(e,g),ye(),r()}var Bb=ue('<canvas class="border border-gray-300 gimp-checkered-background"></canvas>'),Mb=ue('<div class="grid grid-cols-3 gap-2"></div>');function Vb(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(Mn,"$fps",n),s=48;let a=ge(0);Me(()=>{t.initTimestamp&&Q(a,Math.floor(s*lr/or),!0)});const o=[ke.q,ke.w,ke.e,ke.a,null,ke.d,ke.z,ke.s,ke.c],u=[ke.s,ke.a,ke.w,ke.d],d=[ke.s,ke.z,ke.a,ke.q,ke.w,ke.e,ke.d,ke.c],f=p=>{g=requestAnimationFrame(f);const h=Ot,v=p/1e3*i()|0,y=h!==3?v%h:2-Math.abs(2-v%4),x=v/(8/h)|0;for(const[E,k]of o.entries())if(k===null){const T=la;if(T!==4&&T!==8)continue;const L=(T===4?u:d)[x%T],O=oi.get(L);if(!O&&O!==0)continue;const B=zt.get(O+y);if(!B)continue;const F=c[E];if(!F)continue;const C=F.getContext("2d",{willReadFrequently:!0});if(!C)continue;C.clearRect(0,0,F.width,F.height),C.drawImage(B,0,0,F.width,F.height)}else{const T=oi.get(k);if(!T&&T!==0)continue;const A=c[E];if(!A)continue;const L=A.getContext("2d",{willReadFrequently:!0});if(!L)continue;L.clearRect(0,0,A.width,A.height);const O=zt.get(T+y);if(!O)continue;L.drawImage(O,0,0,A.width,A.height)}};Me(()=>{if(c)return f(0),()=>cancelAnimationFrame(g)});let g,c=tt(Array(o.length));var l=Mb();pt(l,21,()=>c,vt,(p,h,m)=>{var v=Bb();Ve(v,"width",s),kt(v,(y,x)=>c[x]=y,y=>c==null?void 0:c[y],()=>[m]),Te(()=>Ve(v,"height",w(a))),ee(p,v)}),H(l),ee(e,l),ye(),r()}var Ub=ue("<option> </option>"),Wb=ue("<option> </option>"),Hb=ue('<div class="max-w-xs flex flex-col gap-4"><label class="flex flex-col"><select class="select select-bordered w-full bg-white"></select></label> <label class="flex flex-col"><select class="select select-bordered w-full bg-white"></select></label> <!></div>');function $b(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(Mn,"$fps",n),s=()=>Ye(Hi,"$preview",n),a=[{value:0,label:"歩行グラ"},{value:1,label:"シンプル"}];var o=Hb(),u=j(o),d=j(u);rs(d,i);var f;d.__change=v=>{const{value:y}=v.currentTarget,x=Number(y);je(Mn,x),vc.value=String(x)},pt(d,20,()=>[2,3,4,5,6,7,8],vt,(v,y)=>{var x=Ub(),E={},k=j(x);H(x),Te(()=>{E!==(E=y)&&(x.value=(x.__value=y)??""),nt(k,`${y??""}fps`)}),ee(v,x)}),H(d),H(u);var g=Z(u,2),c=j(g);rs(c,s);var l;c.__change=v=>{const{value:y}=v.currentTarget,x=Number(y);je(Hi,x),pc.value=y},pt(c,21,()=>a,vt,(v,y)=>{var x=Wb(),E={},k=j(x,!0);H(x),Te(()=>{E!==(E=w(y).value)&&(x.value=(x.__value=w(y).value)??""),nt(k,w(y).label)}),ee(v,x)}),H(c),H(g);var p=Z(g,2);{var h=v=>{Vb(v,{get initTimestamp(){return t.initTimestamp}})},m=(v,y)=>{{var x=E=>{zb(E,{get initTimestamp(){return t.initTimestamp}})};Le(v,E=>{s()===1&&E(x)},y)}};Le(p,v=>{s()===0?v(h):v(m,!1)})}H(o),Te(()=>{f!==(f=i())&&(d.value=(d.__value=i())??"",is(d,i())),l!==(l=s())&&(c.value=(c.__value=s())??"",is(c,s()))}),ee(e,o),ye(),r()}dt(["change"]);var jb=(e,t)=>{Q(t,!1)},qb=(e,t,n,r,i,s)=>{const a=ca.find(o=>o.label===e.currentTarget.value);a&&(Q(t,a.w,!0),Q(n,a.h,!0),Q(r,a.frames,!0),Q(i,ci(a.ways),!0),Q(s,a.label,!0))},Gb=ue("<option> </option>"),Zb=ue('<header class="flex justify-between"><p class="font-bold text-xl">コマ数 / サイズ変更</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="space-y-4"><p class="opacity-60">ツクールの規格に対応できます</p> <label class="flex flex-col"><span class="label-text font-medium">テンプレ</span> <select class="select select-bordered w-full bg-white"><option>自動入力</option><!></select></label> <label class="flex flex-col gap-1"><span class="label-text font-medium">幅</span> <input type="number" placeholder="例: 48"/></label> <label class="flex flex-col gap-1"><span class="label-text font-medium">高さ</span> <input type="number" placeholder="例: 48"/></label> <label class="flex flex-col gap-1"><span class="label-text font-medium">コマ数</span> <input type="number" placeholder="例: 3"/></label> <label class="flex flex-col gap-1"><span class="label-text font-medium">方向転換</span> <input type="text" placeholder="例: wasdqezc"/> <p class="opacity-60 text-xs">wasd(前後左右)+qezc(ナナメ)</p></label> <div class="pt-2"><button type="button" class="btn btn-primary w-full bg-blue-500 text-white rounded hover:bg-blue-600" aria-label="submit">初期化の実行</button></div></article>',1);function Kb(e,t){be(t,!0);const[n,r]=rn();let i=$(t,"activeLayer",15),s=$(t,"initTimestamp",15),a=ge(!1),o=ge(void 0),u=ge(0),d=ge(0),f=ge(0),g=ge(""),c=ge(tt(new Set));Me(()=>{const p=bn(l,{width:Gt.url.searchParams.get("w"),height:Gt.url.searchParams.get("h"),frames:Gt.url.searchParams.get("frames"),ways:Gt.url.searchParams.get("ways")});p.success?Bi(p.output.width,p.output.height,p.output.frames,p.output.ways):Bi(fn.w,fn.h,fn.frames,ci(fn.ways)),t.init(),Q(u,or,!0),Q(d,lr,!0),Q(f,Ot,!0),Q(g,ci(Ct),!0);const h=Gt.url.searchParams.get("opacity");h!==null&&je(rr,Number(h)),je(Or,Gt.url.searchParams.get("trace")==="1"),je(Yt,Gt.url.searchParams.get("anime")==="0");const m=bn(qs,decodeURIComponent(Gt.url.searchParams.get("url")??""));m.success&&(async()=>{const x=await new Promise(k=>{const T=new Image;T.onload=()=>k(T),T.crossOrigin="anonymous",T.src=ho(m.output)});je(_n,m.output),Iu(x);const E=nr.get(0);E&&(Ar(E),i(E[E.length-1]),s(performance.now()))})();const v=bn(Tc,Gt.url.searchParams.get("fps"));v.success&&je(Mn,v.output);const y=bn(Ac,Gt.url.searchParams.get("preview"));y.success&&je(Hi,y.output)});const l=Ic({width:Bd,height:Md,frames:Vd,ways:Ud});Ur(e,{get open(){return w(a)},onOpenChange:m=>Q(a,m.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:m=>{ot();var v=sr("リサイズ");ee(m,v)},content:m=>{var v=Zb(),y=pe(v),x=Z(j(y),2);x.__click=[jb,a];var E=j(x);Fr(E,{}),H(x),H(y);var k=Z(y,2),T=Z(j(k),2),A=Z(j(T),2);rs(A,()=>w(o)??fn.label);var L;A.__change=[qb,u,d,f,g,o];var O=j(A);O.value=O.__value="";var B=Z(O);pt(B,17,()=>ca,vt,(q,_e)=>{var xe=Gb(),de={},Ee=j(xe,!0);H(xe),Te(()=>{de!==(de=w(_e).label)&&(xe.value=(xe.__value=w(_e).label)??""),nt(Ee,w(_e).label)}),ee(q,xe)}),H(A),H(T);var F=Z(T,2),C=Z(j(F),2);We(C);let R;H(F);var b=Z(F,2),D=Z(j(b),2);We(D);let V;H(b);var U=Z(b,2),X=Z(j(U),2);We(X);let G;H(U);var te=Z(U,2),N=Z(j(te),2);We(N);let M;ot(2),H(te);var oe=Z(te,2),ae=j(oe);ae.__click=()=>{const q=bn(l,{width:w(u),height:w(d),frames:w(f),ways:w(g)});if(!q.success){Q(c,new Set(q.issues.map(_e=>{var xe;return((xe=_e.path)==null?void 0:xe[0].key)??""}).map(String)),!0);return}Q(c,new Set,!0),confirm("初期化しますか？（※全てのデータは失われます）")&&(Bi(q.output.width,q.output.height,q.output.frames,q.output.ways),t.init(),w(o)&&(hc.value=w(o)))},H(oe),H(k),Te((q,_e,xe,de)=>{L!==(L=w(o)??fn.label)&&(A.value=(A.__value=w(o)??fn.label)??"",is(A,w(o)??fn.label)),R=st(C,1,"input input-bordered w-full placeholder:opacity-40",null,R,q),V=st(D,1,"input input-bordered w-full bg-white placeholder:opacity-40",null,V,_e),G=st(X,1,"input input-bordered w-full bg-white placeholder:opacity-40",null,G,xe),M=st(N,1,"input input-bordered w-full bg-white placeholder:opacity-40",null,M,de)},[()=>({"bg-error-50":w(c).has("width"),"bg-white":!w(c).has("width")}),()=>({"bg-error-50":w(c).has("height"),"bg-white":!w(c).has("height")}),()=>({"bg-error-50":w(c).has("frames"),"bg-white":!w(c).has("frames")}),()=>({"bg-error-50":w(c).has("ways"),"bg-white":!w(c).has("ways")})]),yn(C,()=>w(u),q=>Q(u,q)),yn(D,()=>w(d),q=>Q(d,q)),yn(X,()=>w(f),q=>Q(f,q)),yn(N,()=>w(g),q=>Q(g,q)),ee(m,v)},$$slots:{trigger:!0,content:!0}}),ye(),r()}dt(["click","change"]);const Xb=(e,t,n,r,i,s,a,o,u)=>{if(t()&&(!w(n)||w(n).naturalWidth===0))return;const d=new URLSearchParams;d.set("w",String(or)),d.set("h",String(lr)),d.set("frames",String(Ot)),d.set("ways",ci(Ct)),d.set("fps",String(r())),d.set("preview",String(i())),s()!==100&&d.set("opacity",String(s()|0)),a()&&d.set("trace","1"),o()&&d.set("anime","0"),t()&&d.set("url",encodeURIComponent(t())),Q(u,`${window.location.origin}${lc}/?${d.toString()}`)};var Yb=(e,t)=>{Q(t,!1)},Jb=ue('<div class="mt-4 max-h-32 overflow-auto border rounded p-2"><img alt="インポート画像" class="max-w-96 object-contain rounded border" crossorigin="anonymous"/></div>'),Qb=ue('<header class="flex justify-between"><p class="font-bold text-xl">共同編集用</p> <button class="btn-icon hover:preset-tonal"><!></button></header> <article class="space-y-4"><div><p class="opacity-60">画像URL無しの場合</p> <p class="opacity-60">キャンバスサイズだけが共有されます。</p></div> <div><b>使用可能な画像URL</b> <p class="opacity-60">右クリック、画像リンクをコピー</p> <p class="opacity-60">※レイヤー情報は共有できません。</p></div> <a href="https://imgur.com/upload" target="_blank" rel="noopener noreferrer" class="text-blue-800 hover:underline">画像アップローダー</a> <div class="relative flex-1"><input name="url" type="url" placeholder="画像のURLを入力" class="input input-bordered w-full pr-8 bg-white"/> <!></div> <!> <div class="space-y-0"><div class="flex items-center gap-4 max-w-[360px]"><div class="w-[20ch] flex justify-between font-mono text-sm tabular-nums"><span class="text-left">不透明度</span> <span class="text-right"> </span></div> <!></div> <label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> <p>トレース台を追加する</p></label> <label class="flex items-center space-x-2"><input class="checkbox" type="checkbox"/> <p>1枚絵として読み込む</p></label></div> <div class="pt-2"><button type="button" class="btn btn-primary w-full bg-blue-500 text-white rounded hover:bg-blue-600" aria-label="submit">共有リンク生成</button></div> <a target="_blank" rel="noopener noreferrer" class="block min-h-[2rem] max-w-full truncate text-blue-800 hover:underline"> </a></article>',1);function e0(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(_n,"$imageUrl",n),s=()=>Ye(Mn,"$fps",n),a=()=>Ye(Hi,"$preview",n),o=()=>Ye(rr,"$opacity",n),u=()=>Ye(Or,"$isAddEmptyLayer",n),d=()=>Ye(Yt,"$isSimpleImport",n);let f=ge(!1),g=ge(void 0),c=ge("");Ur(e,{get open(){return w(f)},onOpenChange:h=>Q(f,h.open,!0),positioning:{placement:"top"},triggerBase:"btn preset-tonal",contentBase:"card bg-surface-300 p-4 space-y-4 max-w-[320px] w-[320px]",arrow:!0,arrowBackground:"!bg-surface-300 dark:!bg-surface-800",trigger:h=>{ot();var m=sr("共有");ee(h,m)},content:h=>{var m=Qb(),v=pe(m),y=Z(j(v),2);y.__click=[Yb,f];var x=j(y);Fr(x,{}),H(y),H(v);var E=Z(v,2),k=Z(j(E),6),T=j(k);We(T);var A=Z(T,2);di(A,{class:"absolute right-2 top-2.5 text-gray-400",size:16,onclick:()=>{je(_n,"")}}),H(k);var L=Z(k,2);{var O=q=>{var _e=Jb(),xe=j(_e);kt(xe,de=>Q(g,de),()=>w(g)),H(_e),Te(de=>Ve(xe,"src",de),[()=>ho(i())]),ee(q,_e)};Le(L,q=>{i()&&q(O)})}var B=Z(L,2),F=j(B),C=j(F),R=Z(j(C),2),b=j(R);H(R),H(C);var D=Z(C,2);const V=ce(()=>[o()]);io(D,{get value(){return w(V)},onValueChange:q=>je(rr,q.value[0]),markers:[25,50,75]}),H(F);var U=Z(F,2),X=j(U);We(X),ot(2),H(U);var G=Z(U,2),te=j(G);We(te),ot(2),H(G),H(B);var N=Z(B,2),M=j(N);M.__click=[Xb,i,g,s,a,o,u,d,c],H(N);var oe=Z(N,2),ae=j(oe,!0);H(oe),H(E),Te(()=>{nt(b,`${o()??""}%`),Ve(oe,"href",w(c)),nt(ae,w(c))}),yn(T,i,q=>je(_n,q)),si(X,u,q=>je(Or,q)),si(te,d,q=>je(Yt,q)),ee(h,m)},$$slots:{trigger:!0,content:!0}}),ye(),r()}dt(["click"]);const ri=Cn(!1),Tu=()=>{const e=Zs.value;if(e&&(e.clear(),Dt(ri))){const t=Dt(tr),[n,r]=gc(t);let i=n-1;i===-1&&(i=Ot-1);const s=Xt(i,r),a=zt.get(s);if(!a)return;e.ctx.globalAlpha=.4,e.ctx.drawImage(a,0,0)}};tr.subscribe(Tu);ri.subscribe(Tu);var t0="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",n0="M16.24,3.56L21.19,8.5C21.97,9.29 21.97,10.55 21.19,11.34L12,20.53C10.44,22.09 7.91,22.09 6.34,20.53L2.81,17C2.03,16.21 2.03,14.95 2.81,14.16L13.41,3.56C14.2,2.78 15.46,2.78 16.24,3.56M4.22,15.58L7.76,19.11C8.54,19.9 9.8,19.9 10.59,19.11L14.12,15.58L9.17,10.63L4.22,15.58Z",r0="M19.35,11.72L17.22,13.85L15.81,12.43L8.1,20.14L3.5,22L2,20.5L3.86,15.9L11.57,8.19L10.15,6.78L12.28,4.65L19.35,11.72M16.76,3C17.93,1.83 19.83,1.83 21,3C22.17,4.17 22.17,6.07 21,7.24L19.08,9.16L14.84,4.92L16.76,3M5.56,17.03L4.5,19.5L6.97,18.44L14.4,11L13,9.6L5.56,17.03Z",i0="M19,11.5C19,11.5 17,13.67 17,15A2,2 0 0,0 19,17A2,2 0 0,0 21,15C21,13.67 19,11.5 19,11.5M5.21,10L10,5.21L14.79,10M16.56,8.94L7.62,0L6.21,1.41L8.59,3.79L3.44,8.94C2.85,9.5 2.85,10.47 3.44,11.06L8.94,16.56C9.23,16.85 9.62,17 10,17C10.38,17 10.77,16.85 11.06,16.56L16.56,11.06C17.15,10.47 17.15,9.5 16.56,8.94Z",a0="M13 24C9.74 24 6.81 22 5.6 19L2.57 11.37C2.26 10.58 3 9.79 3.81 10.05L4.6 10.31C5.16 10.5 5.62 10.92 5.84 11.47L7.25 15H8V3.25C8 2.56 8.56 2 9.25 2S10.5 2.56 10.5 3.25V12H11.5V1.25C11.5 .56 12.06 0 12.75 0S14 .56 14 1.25V12H15V2.75C15 2.06 15.56 1.5 16.25 1.5C16.94 1.5 17.5 2.06 17.5 2.75V12H18.5V5.75C18.5 5.06 19.06 4.5 19.75 4.5S21 5.06 21 5.75V16C21 20.42 17.42 24 13 24Z",s0="M20.71,7.04C20.37,7.38 20.04,7.71 20.03,8.04C20,8.36 20.34,8.69 20.66,9C21.14,9.5 21.61,9.95 21.59,10.44C21.57,10.93 21.06,11.44 20.55,11.94L16.42,16.08L15,14.66L19.25,10.42L18.29,9.46L16.87,10.87L13.12,7.12L16.96,3.29C17.35,2.9 18,2.9 18.37,3.29L20.71,5.63C21.1,6 21.1,6.65 20.71,7.04M3,17.25L12.56,7.68L16.31,11.43L6.75,21H3V17.25Z",o0="M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z",l0="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z",c0="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z",u0={grad:.9,turn:360,rad:360/(2*Math.PI)},dn=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},et=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Tt=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},Au=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Fl=function(e){return{r:Tt(e.r,0,255),g:Tt(e.g,0,255),b:Tt(e.b,0,255),a:Tt(e.a)}},Ya=function(e){return{r:et(e.r),g:et(e.g),b:et(e.b),a:et(e.a,3)}},d0=/^#([0-9a-f]{3,8})$/i,Di=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Ou=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=Math.max(t,n,r),a=s-Math.min(t,n,r),o=a?s===t?(n-r)/a:s===n?2+(r-t)/a:4+(t-n)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},Ru=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var s=Math.floor(t),a=r*(1-n),o=r*(1-(t-s)*n),u=r*(1-(1-t+s)*n),d=s%6;return{r:255*[r,o,a,a,u,r][d],g:255*[u,r,r,o,a,a][d],b:255*[a,a,u,r,r,o][d],a:i}},zl=function(e){return{h:Au(e.h),s:Tt(e.s,0,100),l:Tt(e.l,0,100),a:Tt(e.a)}},Bl=function(e){return{h:et(e.h),s:et(e.s),l:et(e.l),a:et(e.a,3)}},Ml=function(e){return Ru((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},ii=function(e){return{h:(t=Ou(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},f0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,h0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vl={string:[[function(e){var t=d0.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?et(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?et(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=v0.exec(e)||p0.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Fl({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=f0.exec(e)||h0.exec(e);if(!t)return null;var n,r,i=zl({h:(n=t[1],r=t[2],r===void 0&&(r="deg"),Number(n)*(u0[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ml(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,s=i===void 0?1:i;return dn(t)&&dn(n)&&dn(r)?Fl({r:Number(t),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,s=i===void 0?1:i;if(!dn(t)||!dn(n)||!dn(r))return null;var a=zl({h:Number(t),s:Number(n),l:Number(r),a:Number(s)});return Ml(a)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,s=i===void 0?1:i;if(!dn(t)||!dn(n)||!dn(r))return null;var a=function(o){return{h:Au(o.h),s:Tt(o.s,0,100),v:Tt(o.v,0,100),a:Tt(o.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(s)});return Ru(a)},"hsv"]]},Ul=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},g0=function(e){return typeof e=="string"?Ul(e.trim(),Vl.string):typeof e=="object"&&e!==null?Ul(e,Vl.object):[null,void 0]},Ja=function(e,t){var n=ii(e);return{h:n.h,s:Tt(n.s+100*t,0,100),l:n.l,a:n.a}},Qa=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Wl=function(e,t){var n=ii(e);return{h:n.h,s:n.s,l:Tt(n.l+100*t,0,100),a:n.a}},Hl=function(){function e(t){this.parsed=g0(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return et(Qa(this.rgba),2)},e.prototype.isDark=function(){return Qa(this.rgba)<.5},e.prototype.isLight=function(){return Qa(this.rgba)>=.5},e.prototype.toHex=function(){return t=Ya(this.rgba),n=t.r,r=t.g,i=t.b,a=(s=t.a)<1?Di(et(255*s)):"","#"+Di(n)+Di(r)+Di(i)+a;var t,n,r,i,s,a},e.prototype.toRgb=function(){return Ya(this.rgba)},e.prototype.toRgbString=function(){return t=Ya(this.rgba),n=t.r,r=t.g,i=t.b,(s=t.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var t,n,r,i,s},e.prototype.toHsl=function(){return Bl(ii(this.rgba))},e.prototype.toHslString=function(){return t=Bl(ii(this.rgba)),n=t.h,r=t.s,i=t.l,(s=t.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var t,n,r,i,s},e.prototype.toHsv=function(){return t=Ou(this.rgba),{h:et(t.h),s:et(t.s),v:et(t.v),a:et(t.a,3)};var t},e.prototype.invert=function(){return yt({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),yt(Ja(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),yt(Ja(this.rgba,-t))},e.prototype.grayscale=function(){return yt(Ja(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),yt(Wl(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),yt(Wl(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?yt({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):et(this.rgba.a,3);var n},e.prototype.hue=function(t){var n=ii(this.rgba);return typeof t=="number"?yt({h:t,s:n.s,l:n.l,a:n.a}):et(n.h)},e.prototype.isEqual=function(t){return this.toHex()===yt(t).toHex()},e}(),yt=function(e){return e instanceof Hl?e:new Hl(e)};function m0(e,t,n,r,i,s,a){var u;const o=e.shiftKey?w(t)*10:w(t);e.key==="ArrowUp"||e.key==="ArrowRight"?(n(n()+o),e.preventDefault()):e.key==="ArrowDown"||e.key==="ArrowLeft"?(n(n()-o),e.preventDefault()):e.key==="Home"?(n(w(r)),e.preventDefault()):e.key==="End"?(n(w(i)),e.preventDefault()):e.key==="PageUp"?(n(n()+w(t)*10),e.preventDefault()):e.key==="PageDown"&&(n(n()-w(t)*10),e.preventDefault()),n(s(n())),(u=a.onInput)==null||u.call(a,n())}var b0=ue('<input type="hidden"/>'),y0=ue('<div role="slider" tabindex="0"><div class="track svelte-lo47zs"></div> <div class="thumb svelte-lo47zs"></div></div> <!>',1);function ia(e,t){be(t,!0);let n=$(t,"min",3,0),r=$(t,"max",3,100),i=$(t,"step",3,1),s=$(t,"value",15,50),a=$(t,"ariaValueText",3,R=>R.toString()),o=$(t,"direction",3,"horizontal"),u=$(t,"reverse",3,!1),d=$(t,"keyboardOnly",3,!1),f=$(t,"slider",7),g=$(t,"isDragging",7,!1);const c=ce(()=>typeof n()=="string"?parseFloat(n()):n()),l=ce(()=>typeof r()=="string"?parseFloat(r()):r()),p=ce(()=>typeof i()=="string"?parseFloat(i()):i());function h(R){const b=1/w(p),D=Math.round(R*b)/b;return Math.max(w(c),Math.min(w(l),D))}const m={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function v(R){var U,X,G;const b=((U=f())==null?void 0:U[m[o()].clientSize])||120,D=((X=f())==null?void 0:X.getBoundingClientRect()[m[o()].offset])||0;let V=R[m[o()].client]-D;o()==="vertical"&&(V=-1*V+b),u()?s(w(l)-V/b*(w(l)-w(c))):s(V/b*(w(l)-w(c))+w(c)),s(h(s())),(G=t.onInput)==null||G.call(t,s())}function y(R){v(R),g(!0)}function x(R){g()&&v(R)}function E(){g(!1)}function k(R){R.preventDefault(),v({clientX:R.changedTouches[0].clientX,clientY:R.changedTouches[0].clientY})}const T=ce(()=>((s()-w(c))/(w(l)-w(c))*1).toFixed(4));var A=y0();Jn("mousemove",Qn,x),Jn("mouseup",Qn,E);var L=pe(A);let O;L.__keydown=[m0,p,s,c,l,h,t],L.__mousedown=function(...R){var b;(b=d()?void 0:y)==null||b.apply(this,R)},L.__touchstart=function(...R){var b;(b=d()?void 0:k)==null||b.apply(this,R)},L.__touchmove=function(...R){var b;(b=d()?void 0:k)==null||b.apply(this,R)},L.__touchend=function(...R){var b;(b=d()?void 0:k)==null||b.apply(this,R)};let B;kt(L,R=>f(R),()=>f());var F=Z(L,2);{var C=R=>{var b=b0();We(b),Te(()=>{Ve(b,"name",t.name),Nt(b,s())}),ee(R,b)};Le(F,R=>{t.name&&R(C)})}Te((R,b)=>{O=st(L,1,"slider svelte-lo47zs",null,O,R),Ve(L,"aria-orientation",o()),Ve(L,"aria-valuemax",w(l)),Ve(L,"aria-valuemin",w(c)),Ve(L,"aria-valuenow",s()),Ve(L,"aria-valuetext",b),Ve(L,"aria-label",t.ariaLabel),Ve(L,"aria-labelledby",t.ariaLabelledBy),Ve(L,"aria-controls",t.ariaControls),B=Qt(L,"",B,{"--position":w(T)})},[()=>({reverse:u()}),()=>a()(s())]),ee(e,A),ye()}dt(["keydown","mousedown","touchstart","touchmove","touchend"]);function es(e,t){e.preventDefault(),t(e.changedTouches[0])}var _0=ue('<div class="picker svelte-ckxa16"><!> <div class="s svelte-ckxa16"><!></div> <div class="v svelte-ckxa16"><!></div></div>');function w0(e,t){be(t,!0);let n=$(t,"s",15),r=$(t,"v",15),i=ge(void 0),s=!1,a=ge(tt({x:100,y:0})),o=ce(()=>yt({h:t.h,s:100,v:100,a:1}).toHex());function u(A,L,O){return Math.min(Math.max(L,A),O)}function d(A){if(!w(i))return;const{width:L,left:O,height:B,top:F}=w(i).getBoundingClientRect(),C={x:u(A.clientX-O,0,L),y:u(A.clientY-F,0,B)};n(u(C.x/L,0,1)*100),r(u((B-C.y)/B,0,1)*100),l()}function f(A){A.preventDefault(),A.button===0&&(s=!0,d(A))}function g(){s=!1}function c(A){s&&d(A)}Me(()=>{typeof n()=="number"&&typeof r()=="number"&&w(i)&&Q(a,{x:n(),y:100-r()},!0)});function l(A={}){t.onInput({s:n(),v:r(),...A})}var p=_0();Jn("mouseup",Qn,g),Jn("mousemove",Qn,c),p.__mousedown=f,p.__touchstart=[es,d],p.__touchmove=[es,d],p.__touchend=[es,d];let h;var m=j(p);ht(m,()=>t.components.pickerIndicator,(A,L)=>{L(A,{get pos(){return w(a)},get isDark(){return t.isDark}})});var v=Z(m,2);let y;var x=j(v);ia(x,{get value(){return n()},onInput:A=>l({s:A}),keyboardOnly:!0,ariaValueText:A=>`${A}%`,get ariaLabel(){return t.texts.label.s}}),H(v);var E=Z(v,2);let k;var T=j(E);ia(T,{get value(){return r()},onInput:A=>l({v:A}),keyboardOnly:!0,ariaValueText:A=>`${A}%`,direction:"vertical",get ariaLabel(){return t.texts.label.v}}),H(E),H(p),kt(p,A=>Q(i,A),()=>w(i)),Te(()=>{h=Qt(p,"",h,{"--picker-color-bg":w(o)}),y=Qt(v,"",y,{"--pos-y":w(a).y}),k=Qt(E,"",k,{"--pos-x":w(a).x})}),ee(e,p),ye()}dt(["mousedown","touchstart","touchmove","touchend"]);var x0=ue('<div class="picker-indicator svelte-1h8ycw8"></div>');function k0(e,t){be(t,!0);var n=x0();let r;Te(()=>r=Qt(n,"",r,{"--pos-x":t.pos.x,"--pos-y":t.pos.y})),ee(e,n),ye()}function E0(e,t,n,r){const i=e.target;t.test(i.value)&&(n(i.value),r.onInput({hex:n()}))}var C0=ue('<input class="svelte-qtukzs"/>'),S0=ue('<input type="number" min="0" max="255" class="svelte-qtukzs"/> <input type="number" min="0" max="255" class="svelte-qtukzs"/> <input type="number" min="0" max="255" class="svelte-qtukzs"/>',1),I0=ue('<input type="number" min="0" max="360" class="svelte-qtukzs"/> <input type="number" min="0" max="100" class="svelte-qtukzs"/> <input type="number" min="0" max="100" class="svelte-qtukzs"/>',1),T0=ue('<input type="number" min="0" max="1" step="0.01" class="svelte-qtukzs"/>'),A0=(e,t,n)=>Q(t,w(n),!0),O0=ue('<button type="button" class="svelte-qtukzs"><span class="disappear svelte-qtukzs" aria-hidden="true"> </span> <span class="appear svelte-qtukzs"> </span></button>'),R0=ue('<div class="button-like svelte-qtukzs"> </div>'),L0=ue('<div class="text-input svelte-qtukzs"><div class="input-container svelte-qtukzs"><!> <!></div> <!></div>');function P0(e,t){be(t,!0);let n=$(t,"rgb",15),r=$(t,"hsv",15),i=$(t,"hex",15);const s=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let a=ge(tt(t.textInputModes[0]||"hex")),o=ce(()=>t.textInputModes[(t.textInputModes.indexOf(w(a))+1)%t.textInputModes.length]),u=ce(()=>Math.round(r().h)),d=ce(()=>Math.round(r().s)),f=ce(()=>Math.round(r().v)),g=ce(()=>r().a===void 0?1:Math.round(r().a*100)/100);function c(L){return function(O){n({...n(),[L]:parseFloat(O.target.value)}),t.onInput({rgb:n()})}}function l(L){return function(O){r({...r(),[L]:parseFloat(O.target.value)}),t.onInput({hsv:r()})}}var p=L0(),h=j(p),m=j(h);{var v=L=>{var O=C0();We(O),O.__input=[E0,s,i,t],Qt(O,"",{},{flex:3}),Te(()=>{Ve(O,"aria-label",t.texts.label.hex),Nt(O,i())}),ee(L,O)},y=(L,O)=>{{var B=C=>{var R=S0(),b=pe(R);We(b);var D=ce(()=>c("r"));b.__input=function(...te){var N;(N=w(D))==null||N.apply(this,te)};var V=Z(b,2);We(V);var U=ce(()=>c("g"));V.__input=function(...te){var N;(N=w(U))==null||N.apply(this,te)};var X=Z(V,2);We(X);var G=ce(()=>c("b"));X.__input=function(...te){var N;(N=w(G))==null||N.apply(this,te)},Te(()=>{Ve(b,"aria-label",t.texts.label.r),Nt(b,n().r),Ve(V,"aria-label",t.texts.label.g),Nt(V,n().g),Ve(X,"aria-label",t.texts.label.b),Nt(X,n().b)}),ee(C,R)},F=C=>{var R=I0(),b=pe(R);We(b);var D=ce(()=>l("h"));b.__input=function(...te){var N;(N=w(D))==null||N.apply(this,te)};var V=Z(b,2);We(V);var U=ce(()=>l("s"));V.__input=function(...te){var N;(N=w(U))==null||N.apply(this,te)};var X=Z(V,2);We(X);var G=ce(()=>l("v"));X.__input=function(...te){var N;(N=w(G))==null||N.apply(this,te)},Te(()=>{Ve(b,"aria-label",t.texts.label.h),Nt(b,w(u)),Ve(V,"aria-label",t.texts.label.s),Nt(V,w(d)),Ve(X,"aria-label",t.texts.label.v),Nt(X,w(f))}),ee(C,R)};Le(L,C=>{w(a)==="rgb"?C(B):C(F,!1)},O)}};Le(m,L=>{w(a)==="hex"?L(v):L(y,!1)})}var x=Z(m,2);{var E=L=>{var O=T0();We(O);var B=ce(()=>w(a)==="hsv"?l("a"):c("a"));O.__input=function(...F){var C;(C=w(B))==null||C.apply(this,F)},Te(()=>{Ve(O,"aria-label",t.texts.label.a),Nt(O,w(g))}),ee(L,O)};Le(x,L=>{t.isAlpha&&L(E)})}H(h);var k=Z(h,2);{var T=L=>{var O=O0();O.__click=[A0,a,o];var B=j(O),F=j(B,!0);H(B);var C=Z(B,2),R=j(C);H(C),H(O),Te(()=>{nt(F,t.texts.color[w(a)]),nt(R,`${t.texts.changeTo??""} ${t.texts.color[w(o)]??""}`)}),ee(L,O)},A=L=>{var O=R0(),B=j(O,!0);H(O),Te(()=>nt(B,t.texts.color[w(a)])),ee(L,O)};Le(k,L=>{t.textInputModes.length>1?L(T):L(A,!1)})}H(p),ee(e,p),ye()}dt(["input","click"]);function Ni(e){e.preventDefault()}var D0=ue('<label class="svelte-lemcb1"><div class="container svelte-lemcb1"><input type="color" aria-haspopup="dialog" class="svelte-lemcb1"/> <div class="alpha svelte-lemcb1"></div> <div class="color svelte-lemcb1"></div></div> </label>');function N0(e,t){be(t,!0);let n=$(t,"labelElement",15),r=$(t,"name",3,void 0);var i=D0();i.__click=[Ni],i.__mousedown=[Ni];var s=j(i),a=j(s);We(a),a.__click=[Ni],a.__mousedown=[Ni];var o=Z(a,4);let u;H(s);var d=Z(s);H(i),kt(i,f=>n(f),()=>n()),Te(()=>{Ve(i,"dir",t.dir),Ve(a,"name",r()),Nt(a,t.hex),u=Qt(o,"",u,{background:t.hex}),nt(d,` ${t.label??""}`),i.dir=i.dir}),ee(e,i),ye()}dt(["click","mousedown"]);var F0=ue('<div aria-label="color picker"><!></div>');function z0(e,t){be(t,!0);let n=$(t,"wrapper",15);var r=F0();let i;var s=j(r);Pe(s,()=>t.children),H(r),kt(r,a=>n(a),()=>n()),Te(a=>{i=st(r,1,"wrapper svelte-h9ar9",null,i,a),Ve(r,"role",t.isDialog?"dialog":void 0)},[()=>({"is-open":t.isOpen})]),ee(e,r),ye()}const ts={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},Lu="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function B0(e){return function(t){if(t.target===window)return;const n=t.target;if(!e.contains(n))return;const r=e.querySelectorAll(Lu),i=r[0],s=r[r.length-1];function a(u){return u.code==="Tab"&&!u.shiftKey}function o(u){return u.code==="Tab"&&u.shiftKey}a(t)&&t.target===s?(t.preventDefault(),i.focus()):o(t)&&t.target===i&&(t.preventDefault(),s.focus())}}const M0=e=>{const t=e.querySelector(Lu);t&&t.focus();const n=B0(e);return document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n)}}};var V0=ue('<label class="nullability-checkbox svelte-oskb5b"><div class="svelte-oskb5b"><input type="checkbox" class="svelte-oskb5b"/> <span class="svelte-oskb5b"></span></div> </label>');function U0(e,t){be(t,!0);let n=$(t,"isUndefined",15);var r=V0(),i=j(r),s=j(i);We(s),ot(2),H(i);var a=Z(i);H(r),Te(()=>nt(a,` ${t.texts.label.withoutColor??""}`)),si(s,n),ee(e,r),ye()}var W0=ue('<input type="hidden"/>'),H0=ue('<div class="a svelte-1y2jcbx"><!></div>'),$0=ue('<!> <!> <div class="h svelte-1y2jcbx"><!></div> <!> <!> <!>',1),j0=ue("<span><!> <!></span>");function q0(e,t){be(t,!0);let n=$(t,"components",19,()=>({})),r=$(t,"label",3,"Choose a color"),i=$(t,"name",3,void 0),s=$(t,"nullable",3,!1),a=$(t,"rgb",31,()=>tt(s()?null:{r:255,g:0,b:0,a:1})),o=$(t,"hsv",31,()=>tt(s()?null:{h:0,s:100,v:100,a:1})),u=$(t,"hex",31,()=>tt(s()?null:"#ff0000")),d=$(t,"color",15,null),f=$(t,"isDark",15,!1),g=$(t,"isAlpha",3,!0),c=$(t,"isDialog",3,!0),l=$(t,"isOpen",31,()=>!c()),p=$(t,"position",3,"responsive"),h=$(t,"dir",3,"ltr"),m=$(t,"isTextInput",3,!0),v=$(t,"textInputModes",19,()=>["hex","rgb","hsv"]),y=$(t,"sliderDirection",3,"vertical"),x=$(t,"disableCloseClickOutside",3,!1),E=$(t,"a11yColors",19,()=>[{bgHex:"#ffffff"}]),k=$(t,"a11yLevel",3,"AA"),T=$(t,"texts",3,void 0),A=$(t,"a11yTexts",3,void 0),L=ge(tt({r:255,g:0,b:0,a:1})),O=ge(tt({h:0,s:100,v:100,a:1})),B=ge("#ff0000"),F=ge(!1),C=ge(tt(w(F))),R=ge(void 0),b=ge(void 0),D=ge(void 0),V,U=ge(1080),X=ge(720);const G=12,te={pickerIndicator:k0,textInput:P0,input:N0,nullabilityCheckbox:U0,wrapper:z0};function N(){return{...te,...n()}}function M(){var z,I,S;return{label:{...ts.label,...(z=T())==null?void 0:z.label},color:{...ts.color,...(I=T())==null?void 0:I.color},changeTo:((S=T())==null?void 0:S.changeTo)??ts.changeTo}}function oe({target:z}){var I,S,P;c()&&((I=w(b))!=null&&I.contains(z)||(S=w(b))!=null&&S.isSameNode(z)?l(!l()):l()&&!((P=w(D))!=null&&P.contains(z))&&!x()&&l(!1))}function ae({key:z,target:I}){var S;!c()||!w(b)||!w(R)||(z==="Enter"&&w(b).contains(I)?(l(!l()),setTimeout(()=>{w(D)&&(V=M0(w(D)))})):z==="Escape"&&l()&&(l(!1),w(R).contains(I)&&((S=w(b))==null||S.focus(),V==null||V.destroy())))}function q(){return!(o()&&a()&&o().h===w(O).h&&o().s===w(O).s&&o().v===w(O).v&&o().a===w(O).a&&a().r===w(L).r&&a().g===w(L).g&&a().b===w(L).b&&a().a===w(L).a&&u()===w(B))}function _e(){var z,I,S,P,Y,ne;if(w(F)&&!w(C)){Q(C,!0),o(null),a(null),u(null),(z=t.onInput)==null||z.call(t,{color:d(),hsv:o(),rgb:a(),hex:u()});return}else if(w(C)&&!w(F)){Q(C,!1),o(jn(w(O))),a(jn(w(L))),u(jn(w(B))),(I=t.onInput)==null||I.call(t,{color:d(),hsv:o(),rgb:a(),hex:u()});return}else if(!o()&&!a()&&!u()){Q(F,Q(C,!0),!0),(S=t.onInput)==null||S.call(t,{color:null,hsv:o(),rgb:a(),hex:u()});return}else if(!q())return;Q(F,!1),o()&&o().a===void 0&&o({...o(),a:1}),w(O).a===void 0&&Q(O,{...w(O),a:1},!0),a()&&a().a===void 0&&a({...a(),a:1}),w(L).a===void 0&&Q(L,{...w(L),a:1},!0),((P=u())==null?void 0:P.substring(7))==="ff"&&u(u().substring(0,7)),((Y=w(B))==null?void 0:Y.substring(7))==="ff"&&Q(B,w(B).substring(0,7),!0),o()&&(o().h!==w(O).h||o().s!==w(O).s||o().v!==w(O).v||o().a!==w(O).a||!a()&&!u())?(d(yt(o())),a(d().toRgb()),u(d().toHex())):a()&&(a().r!==w(L).r||a().g!==w(L).g||a().b!==w(L).b||a().a!==w(L).a||!o()&&!u())?(d(yt(a())),u(d().toHex()),o(d().toHsv())):u()&&(u()!==w(B)||!o()&&!a())&&(d(yt(u())),a(d().toRgb()),o(d().toHsv())),d()&&f(d().isDark()),!(!u()||!o()||!a())&&(Q(O,jn(o()),!0),Q(L,jn(a()),!0),Q(B,u(),!0),Q(C,w(F),!0),(ne=t.onInput)==null||ne.call(t,{color:d(),hsv:o(),rgb:a(),hex:u()}))}Me(()=>{(o()||a()||u())&&_e()}),Me(()=>{w(F),_e()});function xe(z){return I=>{o()||(Q(F,!1),Q(C,!1),o(jn(w(O)))),o({...o(),[z]:I})}}function de(z){return I=>{o()||(Q(F,!1),Q(C,!1),o(jn(w(O)))),o({...o(),...Object.fromEntries(z.map(S=>[S,I[S]]))})}}async function Ee(){if(await md(),p()==="fixed"||!l()||!c()||!w(b)||!w(D))return;const z=w(D).getBoundingClientRect(),I=w(b).getBoundingClientRect();if((p()==="responsive"||p()==="responsive-y")&&(I.top+z.height+G>w(X)?w(D).style.top=`-${z.height+G}px`:w(D).style.top=`${I.height+G}px`),p()==="responsive"||p()==="responsive-x")if(h()==="rtl"){const S=I.left+I.width-z.width<0;console.log(S,I.left-z.width,I.left,z.width),S?w(D).style.left="0px":w(D).style.left=`${I.width-z.width}px`}else I.left+z.width>w(U)?w(D).style.left=`${I.width-z.width}px`:w(D).style.left="0px"}Me(()=>{w(U)&&w(X)&&l()&&Ee()});const me=ce(N);var fe=j0();Jn("mousedown",Qn,oe),Jn("keyup",Qn,ae),Jn("scroll",Qn,Ee);var Oe=j(fe);{var De=z=>{var I=Se(),S=pe(I);ht(S,()=>w(me).input,(P,Y)=>{Y(P,{get hex(){return u()},get label(){return r()},get name(){return i()},get dir(){return h()},get labelElement(){return w(b)},set labelElement(ne){Q(b,ne,!0)}})}),ee(z,I)},_=(z,I)=>{{var S=P=>{var Y=W0();We(Y),Te(()=>{Nt(Y,u()),Ve(Y,"name",i())}),ee(P,Y)};Le(z,P=>{i()&&P(S)},I)}};Le(Oe,z=>{c()?z(De):z(_,!1)})}var K=Z(Oe,2);ht(K,()=>w(me).wrapper,(z,I)=>{I(z,{get isOpen(){return l()},get isDialog(){return c()},get wrapper(){return w(D)},set wrapper(S){Q(D,S,!0)},children:(S,P)=>{var Y=$0(),ne=pe(Y);{var W=ze=>{var Ke=Se(),rt=pe(Ke);const Wt=ce(M);ht(rt,()=>w(me).nullabilityCheckbox,(Ht,$t)=>{$t(Ht,{get texts(){return w(Wt)},get isUndefined(){return w(F)},set isUndefined(jt){Q(F,jt,!0)}})}),ee(ze,Ke)};Le(ne,ze=>{s()&&ze(W)})}var ie=Z(ne,2);const le=ce(N),se=ce(()=>{var ze;return((ze=o())==null?void 0:ze.h)??w(O).h}),ve=ce(()=>{var ze;return((ze=o())==null?void 0:ze.s)??w(O).s}),Ue=ce(()=>{var ze;return((ze=o())==null?void 0:ze.v)??w(O).v}),Ae=ce(()=>de(["s","v"])),Qe=ce(M);w0(ie,{get components(){return w(le)},get h(){return w(se)},get s(){return w(ve)},get v(){return w(Ue)},get onInput(){return w(Ae)},get isDark(){return f()},get texts(){return w(Qe)}});var Lt=Z(ie,2),ct=j(Lt);const Vt=ce(()=>{var ze;return((ze=o())==null?void 0:ze.h)??w(O).h}),qe=ce(()=>xe("h")),Ut=ce(()=>y()==="vertical");ia(ct,{min:0,max:360,step:1,get value(){return w(Vt)},get onInput(){return w(qe)},get direction(){return y()},get reverse(){return w(Ut)},get ariaLabel(){return M().label.h}}),H(Lt);var sn=Z(Lt,2);{var mt=ze=>{var Ke=H0();let rt;var Wt=j(Ke);const Ht=ce(()=>{var Sn;return((Sn=o())==null?void 0:Sn.a)??w(O).a}),$t=ce(()=>xe("a")),jt=ce(()=>y()==="vertical");ia(Wt,{min:0,max:1,step:.01,get value(){return w(Ht)},get onInput(){return w($t)},get direction(){return y()},get reverse(){return w(jt)},get ariaLabel(){return M().label.a}}),H(Ke),Te(Sn=>rt=Qt(Ke,"",rt,{"--alphaless-color":Sn}),[()=>(u()?u():w(B)).substring(0,7)]),ee(ze,Ke)};Le(sn,ze=>{g()&&ze(mt)})}var Hn=Z(sn,2);{var fr=ze=>{var Ke=Se(),rt=pe(Ke);const Wt=ce(()=>u()??w(B)),Ht=ce(()=>a()??w(L)),$t=ce(()=>o()??w(O)),jt=ce(M);ht(rt,()=>w(me).textInput,(Sn,Hr)=>{Hr(Sn,{get hex(){return w(Wt)},get rgb(){return w(Ht)},get hsv(){return w($t)},onInput:on=>{on.hsv?o(on.hsv):on.rgb?a(on.rgb):on.hex&&u(on.hex)},get isAlpha(){return g()},get textInputModes(){return v()},get texts(){return w(jt)}})}),ee(ze,Ke)};Le(Hn,ze=>{m()&&ze(fr)})}var hr=Z(Hn,2);{var Wr=ze=>{var Ke=Se(),rt=pe(Ke);const Wt=ce(N),Ht=ce(()=>u()||"#00000000");ht(rt,()=>w(me).a11yNotice,($t,jt)=>{jt($t,{get components(){return w(Wt)},get a11yColors(){return E()},get hex(){return w(Ht)},get a11yTexts(){return A()},get a11yLevel(){return k()}})}),ee(ze,Ke)};Le(hr,ze=>{N().a11yNotice&&ze(Wr)})}ee(S,Y)},$$slots:{default:!0}})}),H(fe),kt(fe,z=>Q(R,z),()=>w(R)),Te(()=>st(fe,1,`color-picker ${y()??""}`,"svelte-1y2jcbx")),Do("innerWidth",z=>Q(U,z,!0)),Do("innerHeight",z=>Q(X,z,!0)),ee(e,fe),ye()}var G0=(e,t)=>Q(t,!w(t)),Z0=(e,t,n)=>t(w(n).label),K0=ue('<button type="button" class="btn-icond btn-lg"><!></button>'),X0=(e,t,n)=>je(Xn,w(n)),Y0=ue('<button type="button" aria-label="Select color" class="w-8 h-8 rounded-full ring-2 ring-gray-200 hover:ring-primary-500 transition"></button>'),J0=ue('<div class="grid h-screen grid-rows-[auto_1fr_auto]"><header class="bg-surface-100 shadow flex flex-wrap items-center gap-3"><div class="flex-none px-8 bg-primary rounded select-none text-left font-bold text-success-700 flex items-center gap-2" style="min-width: 180px;"><img alt="Midori Icon" class="w-16 h-16 object-contain"/> <span class="hidden sm:inline">HGペイント（歩行グラフィックペイント）</span> <span class="sm:hidden flex flex-col"><span>HGペイント</span> <span>（歩行グラフィックペイント）</span></span></div> <div class="flex flex-1 flex-wrap justify-center items-center gap-3"><!> <div class="input-group grid-cols-[1fr_auto]"><input class="ig-input" type="text" placeholder="レイヤー名" maxlength="32"/> <button title="レイヤー名の編集"><!></button></div> <button type="button" class="btn-icond btn-lg"><!></button> <button type="button" class="btn-icond btn-lg"><!></button></div> <!> <div class="w-[12ch] flex justify-between font-mono text-sm tabular-nums"><span class="text-left">不透明度</span> <span class="text-right"> </span></div> <div class="my-2 w-full basis-full max-w-[300px] mt-2"><!></div></header> <div class="grid grid-cols-1 md:grid-cols-[auto_1fr_auto]"><aside class="bg-surface-200 p-4 space-y-4"><!></aside> <main class="bg-white flex items-center justify-center gap-4 px-4"><!> <div></div> <!></main> <aside class="bg-surface-200 p-4 space-y-4"><!> <!></aside></div> <footer class="bg-surface-100 shadow p-2 flex flex-wrap items-center justify-center gap-2"><!> <nav class="btn-group preset-outlined-surface-200-800 flex gap-4"><!> <!> <!> <!> <!></nav> <nav class="btn-group preset-outlined-surface-200-800 flex gap-2"></nav> <!> <!> <!> <!> <!> <!> <div class="w-full text-left flex flex-wrap items-center gap-4"><div class="rounded-full ring-2 ring-black ring-offset-2 ring-offset-white"><!></div> <input type="color" class="w-10 h-10 rounded-full border-none p-0"/> <div class="flex gap-2"></div></div></footer></div>');function o1(e,t){be(t,!0);const[n,r]=rn(),i=()=>Ye(Xn,"$color",n),s=()=>Ye(ri,"$isOnionSkin",n),a=globalThis.innerWidth<768;let o=ge(0);const u=()=>{setTimeout(()=>{Q(o,performance.now(),!0)})};Me(()=>(document.addEventListener("pointerup",u),()=>document.removeEventListener("pointerup",u)));const d=async J=>{if(f(J)||!J.ctrlKey)return;let he=J.key;switch(J.getModifierState("CapsLock")&&(he=/[a-z]/.test(he)?he.toUpperCase():he.toLowerCase()),he){case"1":J.preventDefault(),Q(X,V.pen.label,!0);break;case"2":J.preventDefault(),Q(X,V.eraser.label,!0);break;case"3":J.preventDefault(),Q(X,V.dropper.label,!0);break;case"4":J.preventDefault(),Q(X,V.fill.label,!0);break;case"5":J.preventDefault(),Q(X,V.translate.label,!0);break;case"e":J.preventDefault(),Q(te,!w(te));break;case"f":J.preventDefault(),Q(N,!w(N));break;case"g":J.preventDefault(),Q(M,!w(M));break;case"d":J.preventDefault(),Q(oe,!w(oe));break;case"o":J.preventDefault(),ri.update(re=>!re);break;case"z":J.preventDefault(),q(V.undo.label);break;case"Z":J.preventDefault(),q(V.redo.label);break;case"s":J.preventDefault(),q(V.save.label);break;case"c":{J.preventDefault();const re=await new Promise(Ce=>Cr().toBlob(Ce));if(!re)return;const we=new ClipboardItem({"image/png":re});await navigator.clipboard.write([we])}break}};Me(()=>{if(w(y))return window.removeEventListener("keydown",d),window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)});const f=J=>{var re;const he=J.target;return!((re=getSelection())!=null&&re.isCollapsed)||he.tagName==="INPUT"||he.tagName==="TEXTAREA"||he.isContentEditable},g=async J=>{var Ci,wo;if(!w(v)||(Ci=w(v))!=null&&Ci.locked)return;const he=Wi(),{width:re,height:we}=Bn,Ce=await createImageBitmap(J),Re=document.createElement("canvas");Re.width=re,Re.height=we;const Be=Re.getContext("2d",{willReadFrequently:!0});if(!Be)return;Be.imageSmoothingEnabled=!1;const ft=Ce.width,Pt=Ce.height,ln=Math.min(re/ft,we/Pt),cn=ft*ln,vr=Pt*ln,$n=(re-cn)/2,In=(we-vr)/2;Be.drawImage(Ce,$n,In,cn,vr);const{data:Tn}=Be.getImageData(0,0,re,we);for(let Si=0;Si<we;Si++)for(let Ii=0;Ii<re;Ii++){const xo=(Si*re+Ii)*4,[Du,Nu,Fu,ko]=Tn.subarray(xo,xo+4);ko&&(Nn.value=`rgba(${Du}, ${Nu}, ${Fu}, ${ko/255})`,w(v).drawByDot(Ii*he,Si*he),w(v).used=!0)}(wo=w(v))==null||wo.trace(),u()},c=J=>{var we,Ce;if(f(J)||!w(v)||(we=w(v))!=null&&we.locked)return;let he=null;for(const Re of((Ce=J.clipboardData)==null?void 0:Ce.items)??[])Re.kind==="file"&&Re.type.startsWith("image/")&&(he=Re);if(!he)return;const re=he.getAsFile();re&&g(re)};Me(()=>{if(w(y))return window.removeEventListener("paste",c),window.addEventListener("paste",c),()=>window.removeEventListener("paste",c)});let l=ge(!1);Me(()=>{w(m)&&(w(m).addEventListener("dragover",J=>{J.preventDefault(),Q(l,!0)}),w(m).addEventListener("dragleave",()=>{Q(l,!1)}),w(m).addEventListener("drop",J=>{if(J.preventDefault(),Q(l,!1),!J.dataTransfer)return;const[he]=J.dataTransfer.files;he.type.startsWith("image/")&&g(he)}))});const p=(J,he)=>{if(!w(v))return;const re=Cr().getContext("2d",{willReadFrequently:!0});if(!re)return;const{data:we}=re.getImageData(0,0,w(k),E),Ce=(he*w(k)+J)*4,[Re,Be,ft,Pt]=we.subarray(Ce,Ce+4);if(Pt){Q(te,!1);const ln=`#${[Re,Be,ft].map(cn=>cn.toString(16).padStart(2,"0")).join("")}`;je(Xn,ln)}else Q(te,!0)},h=async(J,he)=>{var ft;if(!w(v))return;const re=(ft=i().slice(1).match(/.{2}/g))==null?void 0:ft.map(Pt=>Number.parseInt(Pt,16));if((re==null?void 0:re.length)!==3)return;const[we,Ce,Re]=re,Be=Wd(w(v).data,w(k),E,J,he,w(te)?[0,0,0,0]:[we,Ce,Re,255]);Be&&(w(v).data=Be)};let m=ge(void 0),v=ge(void 0),y=ge(null),x=ge(null);const E=a?Math.floor(globalThis.innerWidth*.9/48)*48:480;let k=ge(tt(E)),T=ge(0);Me(()=>{A()});const A=async()=>{if(!w(m))return;Q(T,performance.now(),!0);const J=or,he=lr,re=Math.floor(E*(J/he));Kd(w(m),re,E),Q(k,re,!0);const we=Rc.value,Ce=Zs.value;we==null||we.canvas.classList.add("upper-canvas"),Ce==null||Ce.canvas.classList.add("gimp-checkered-background"),Q(y,we,!0),Q(x,Ce,!0),we&&(we.opacity=32),Gd(1,he),document.documentElement.style.setProperty("--grid-cell-size",`${Wi()}px`),Q(v,new en("レイヤー #1"),!0)};Me(()=>{w(y)&&document.addEventListener("pointermove",J=>{if(!w(y))return;const[he,re]=er(J);w(y).clear(),w(y).drawByDot(he,re)},{passive:!0})}),Me(()=>{if(!w(y))return;let J=null,he=null;Yd((Ce,Re,Be)=>{var ft,Pt,ln,cn,vr;if(J===null&&(J=Ce),he===null&&(he=Re),w(X)===V.dropper.label||(Be&2)!==0)p(Ce,Re),we=!0;else if(!((ft=w(v))!=null&&ft.locked))if(w(X)===V.translate.label)(Pt=w(v))==null||Pt.translateByDot(Ce-J,Re-he);else{const $n=ef(Ce,Re,J,he);switch(w(X)){case V.pen.label:for(const[In,Tn]of $n)w(te)?(ln=w(v))==null||ln.eraseByDot(In,Tn):(cn=w(v))==null||cn.drawByDot(In,Tn);break;case V.eraser.label:for(const[In,Tn]of $n)(vr=w(v))==null||vr.eraseByDot(In,Tn);break}}J=Ce,he=Re});const re=()=>{var Ce;(Ce=w(v))!=null&&Ce.modified()&&(w(v).trace(),D())};let we=!1;Jd((Ce,Re,Be)=>{var ft;J=null,he=null,!((ft=w(v))!=null&&ft.locked)&&(w(X)===V.fill.label&&!we&&h(Ce,Re),we=!1,re())}),Xd((Ce,Re,Be)=>{})}),Me(()=>{w(v)&&(Q(L,[w(v).opacity],!0),Q(O,w(v).visible,!0),Q(B,w(v).name,!0),Q(F,!0),Q(C,w(v).locked,!0))});let L=ge(tt([100])),O=ge(!0),B=ge(""),F=ge(!0),C=ge(!1);Me(()=>{w(v)&&(w(v).opacity=w(L)[0])}),Me(()=>{w(v)&&(w(v).visible=w(O))}),Me(()=>{w(v)&&(w(v).name=w(B))}),Me(()=>{w(v)&&(w(v).locked=w(C))}),Me(()=>{fc.value=i(),Nn.value=i()});let R=ge(tt([]));const b=32,D=()=>{if(w(X)===V.translate.label)return;const J=w(R).indexOf(i());J!==0&&(J!==-1&&w(R).splice(J,1),w(R).unshift(i()),w(R).length>b&&w(R).pop(),Q(R,[...w(R)],!0))},V={pen:{label:"ペン",mdi:s0,icon:gf},eraser:{label:"消しゴム",mdi:n0,icon:Uo},dropper:{label:"カラーピッカー",mdi:r0,icon:mf},fill:{label:"塗りつぶし",mdi:i0,icon:pf},translate:{label:"ハンドツール",mdi:a0,icon:vf},erasable:{icon:Uo},flip:{icon:uf},grid:{icon:df},undo:{label:"戻る",mdi:c0,icon:kf},redo:{label:"進む",mdi:o0,icon:yf},save:{label:"画像を保存",mdi:t0,icon:_f},clear:{label:"全消し",mdi:l0,icon:di}};let U=[V.pen,V.eraser,V.dropper,V.fill,V.translate],X=ge(tt(zo.value??V.pen.label));const G=J=>{const he=`fill="${w(oe)?"white":"black"}" stroke="${w(oe)?"black":"white"}" stroke-width="1"`,re=`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><path d="${J}" ${he}/></svg>`;return`data:image/svg+xml;base64,${btoa(re)}`};Me(()=>{var J;if(zo.value=w(X),w(y)){const he=w(X)===V.fill.label?"21 19":"3 21",re=(J=U.find(we=>we.label===w(X)))==null?void 0:J.mdi;if(!re)return;w(y).canvas.style.cursor=`url('${G(re)}') ${he}, auto`}});let te=ge(!1),N=ge(!1);Me(()=>{Gs.value=w(N)});let M=ge(!0),oe=ge(!1);Me(()=>{w(oe)?document.body.classList.add("hg-paint-gimp-dark"):document.body.classList.remove("hg-paint-gimp-dark")});let ae=[V.undo,V.redo,V.save,V.clear];const q=J=>{var he,re,we,Ce;switch(J){case V.undo.label:(he=w(v))==null||he.undo(),u();break;case V.redo.label:(re=w(v))==null||re.redo(),u();break;case V.save.label:{const Re=Cr().toDataURL("image/png"),Be=document.createElement("a");Be.href=Re,Be.download="drawing.png",Be.click()}break;case V.clear.label:(we=w(v))==null||we.clear(),(Ce=w(v))==null||Ce.trace();break}};var _e=J0(),xe=j(_e),de=j(xe),Ee=j(de);ot(4),H(de);var me=Z(de,2),fe=j(me);Gn(fe,{controlActive:"bg-secondary-500",get checked(){return w(C)},onCheckedChange:re=>{Q(C,re.checked,!0)},inactiveChild:re=>{ms(re,{size:"14"})},activeChild:re=>{ms(re,{size:"14"})},$$slots:{inactiveChild:!0,activeChild:!0}});var Oe=Z(fe,2),De=j(Oe);We(De);var _=Z(De,2);_.__click=[G0,F];var K=j(_);{var z=J=>{wf(J,{size:18})},I=J=>{of(J,{size:18})};Le(K,J=>{w(F)?J(z):J(I,!1)})}H(_),H(Oe);var S=Z(Oe,2);S.__click=()=>{if(w(C)||!w(v)||w(v).used&&!confirm(`${w(v).name}を削除しますか？`))return;w(v).delete();const{prev:J,next:he}=w(v);he?Q(v,he,!0):J?Q(v,J,!0):(vs(),Q(v,new en("レイヤー #1"),!0))};var P=j(S);di(P,{size:18}),H(S);var Y=Z(S,2);Y.__click=async()=>{w(C)||!w(v)||!confirm("全レイヤーを削除しますか？")||(Ar([]),vs(),Q(v,new en("レイヤー #1"),!0))};var ne=j(Y);sf(ne,{size:18}),H(Y),H(me);var W=Z(me,2);Gn(W,{controlActive:"bg-secondary-500",get checked(){return w(O)},onCheckedChange:re=>{Q(O,re.checked,!0)},inactiveChild:re=>{gs(re,{size:"14"})},activeChild:re=>{gs(re,{size:"14"})},$$slots:{inactiveChild:!0,activeChild:!0}});var ie=Z(W,2),le=Z(j(ie),2),se=j(le);H(le),H(ie);var ve=Z(ie,2),Ue=j(ve);io(Ue,{get value(){return w(L)},onValueChange:J=>Q(L,J.value,!0),markers:[25,50,75]}),H(ve),H(xe);var Ae=Z(xe,2),Qe=j(Ae),Lt=j(Qe);Af(Lt,{get initTimestamp(){return w(T)},get pointerupTimestamp(){return w(o)},get activeLayer(){return w(v)},set activeLayer(J){Q(v,J,!0)}}),H(Qe);var ct=Z(Qe,2),Vt=j(ct);{var qe=J=>{$b(J,{get initTimestamp(){return w(T)}})};Le(Vt,J=>{a||J(qe)})}var Ut=Z(Vt,2);let sn;kt(Ut,J=>Q(m,J),()=>w(m));var mt=Z(Ut,2);{var Hn=J=>{yb(J,{})};Le(mt,J=>{a||J(Hn)})}H(ct);var fr=Z(ct,2),hr=j(fr);Zf(hr,{});var Wr=Z(hr,2);Ib(Wr,{get pointerupTimestamp(){return w(o)},get activeLayer(){return w(v)},set activeLayer(J){Q(v,J,!0)}}),H(fr),H(Ae);var ze=Z(Ae,2),Ke=j(ze);cl(Ke,{name:"tool",get value(){return w(X)},onValueChange:J=>{J.value&&Q(X,J.value,!0)},children:(J,he)=>{var re=Se(),we=pe(re);pt(we,17,()=>U,vt,(Ce,Re)=>{var Be=Se(),ft=pe(Be);ht(ft,()=>cl.Item,(Pt,ln)=>{ln(Pt,{get value(){return w(Re).label},children:(cn,vr)=>{var $n=Se(),In=pe($n);ht(In,()=>w(Re).icon,(Tn,Ci)=>{Ci(Tn,{})}),ee(cn,$n)},$$slots:{default:!0}})}),ee(Ce,Be)}),ee(J,re)},$$slots:{default:!0}});var rt=Z(Ke,2),Wt=j(rt);Gn(Wt,{controlActive:"bg-secondary-500",get checked(){return w(te)},onCheckedChange:re=>{Q(te,re.checked,!0)},inactiveChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.erasable.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},activeChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.erasable.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},$$slots:{inactiveChild:!0,activeChild:!0}});var Ht=Z(Wt,2);Gn(Ht,{controlActive:"bg-secondary-500",get checked(){return w(N)},onCheckedChange:re=>{Q(N,re.checked,!0)},inactiveChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.flip.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},activeChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.flip.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},$$slots:{inactiveChild:!0,activeChild:!0}});var $t=Z(Ht,2);Gn($t,{controlActive:"bg-secondary-500",get checked(){return w(M)},onCheckedChange:re=>{Q(M,re.checked,!0)},inactiveChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.grid.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},activeChild:re=>{var we=Se(),Ce=pe(we);ht(Ce,()=>V.grid.icon,(Re,Be)=>{Be(Re,{size:"14"})}),ee(re,we)},$$slots:{inactiveChild:!0,activeChild:!0}});var jt=Z($t,2);Gn(jt,{controlActive:"bg-secondary-500",get checked(){return w(oe)},onCheckedChange:re=>{Q(oe,re.checked,!0)},inactiveChild:re=>{xf(re,{size:"14"})},activeChild:re=>{hf(re,{size:"14"})},$$slots:{inactiveChild:!0,activeChild:!0}});var Sn=Z(jt,2);Gn(Sn,{controlActive:"bg-secondary-500",get checked(){return s()},onCheckedChange:re=>{ri.set(re.checked)},inactiveChild:re=>{Wo(re,{size:"14"})},activeChild:re=>{Wo(re,{size:"14"})},$$slots:{inactiveChild:!0,activeChild:!0}}),H(rt);var Hr=Z(rt,2);pt(Hr,21,()=>ae,vt,(J,he)=>{var re=K0();re.__click=[Z0,q,he];var we=j(re);ht(we,()=>w(he).icon,(Ce,Re)=>{Re(Ce,{size:18})}),H(re),ee(J,re)}),H(Hr);var on=Z(Hr,2);Nb(on);var vo=Z(on,2);Kb(vo,{init:A,get activeLayer(){return w(v)},set activeLayer(J){Q(v,J,!0)},get initTimestamp(){return w(T)},set initTimestamp(J){Q(T,J,!0)}});var po=Z(vo,2);hb(po,{init:A,get activeLayer(){return w(v)},set activeLayer(J){Q(v,J,!0)},get initTimestamp(){return w(T)},set initTimestamp(J){Q(T,J,!0)}});var go=Z(po,2);ab(go,{get width(){return w(k)},get height(){return E}});var mo=Z(go,2);Lb(mo,{get activeLayer(){return w(v)},set activeLayer(J){Q(v,J,!0)}});var bo=Z(mo,2);e0(bo,{});var yo=Z(bo,2),Ea=j(yo),Pu=j(Ea);q0(Pu,{label:"",isAlpha:!1,get hex(){return _d(),i()},set hex(J){je(Xn,J)}}),H(Ea);var Ca=Z(Ea,2);We(Ca);var _o=Z(Ca,2);pt(_o,21,()=>w(R),vt,(J,he)=>{var re=Y0();re.__click=[X0,i,he],Te(()=>Qt(re,`background-color:${w(he)??""};`)),ee(J,re)}),H(_o),H(yo),H(ze),H(_e),Te(J=>{Ve(Ee,"src",`${lc??""}/midori.png`),De.disabled=w(F),st(_,1,`ig-btn ${w(F)?"":"preset-filled"}`),nt(se,`${w(L)??""}%`),sn=st(Ut,1,"relative",null,sn,J)},[()=>({"hg-paint-grid-mode":w(M),"hg-paint-dragover":w(l)})]),yn(De,()=>w(B),J=>Q(B,J)),yn(Ca,i,J=>je(Xn,J)),ee(e,_e),ye(),r()}dt(["click"]);export{o1 as component};
